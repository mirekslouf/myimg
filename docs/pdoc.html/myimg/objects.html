<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>myimg.objects API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../myimg.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;myimg</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#module-myimgobjects">Module: myimg.objects</a></li>
  <li><a href="#examples-how-does-it-work">Examples = how does it work?</a></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#MyImage">MyImage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MyImage.__init__">MyImage</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.open_image">open_image</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.get_font_size">get_font_size</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.to_gray">to_gray</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.to_rgb">to_rgb</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.to_rgba">to_rgba</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.cut">cut</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.crop">crop</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.resize">resize</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.autocontrast">autocontrast</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.label">label</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.caption">caption</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.border">border</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.scalebar">scalebar</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.show">show</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#MyImage.save_with_extension">save_with_extension</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MyReport">MyReport</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MyReport.__init__">MyReport</a>
                        </li>
                        <li>
                                <a class="function" href="#MyReport.process_images">process_images</a>
                        </li>
                        <li>
                                <a class="function" href="#MyReport.check_image_types">check_image_types</a>
                        </li>
                        <li>
                                <a class="function" href="#MyReport.rescale_images">rescale_images</a>
                        </li>
                        <li>
                                <a class="function" href="#MyReport.show">show</a>
                        </li>
                        <li>
                                <a class="function" href="#MyReport.save">save</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Units">Units</a>
                            <ul class="memberlist">
                        <li>
                                <a class="class" href="#Units.Lengths">Units.Lengths</a>
                                        <ul class="memberlist">
                            </ul>

                        </li>
                        <li>
                                <a class="class" href="#Units.RecLengths">Units.RecLengths</a>
                                        <ul class="memberlist">
                            </ul>

                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#NumberWithUnits">NumberWithUnits</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#NumberWithUnits.__init__">NumberWithUnits</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.text">text</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.units_Ok">units_Ok</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.index_of_units">index_of_units</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.increase_units">increase_units</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.decrease_units">decrease_units</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.set_units_to">set_units_to</a>
                        </li>
                        <li>
                                <a class="function" href="#NumberWithUnits.set_correct_units">set_correct_units</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ScaleWithUnits">ScaleWithUnits</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ScaleWithUnits.__init__">ScaleWithUnits</a>
                        </li>
                        <li>
                                <a class="function" href="#ScaleWithUnits.text">text</a>
                        </li>
                        <li>
                                <a class="function" href="#ScaleWithUnits.adjust_length_to">adjust_length_to</a>
                        </li>
                        <li>
                                <a class="function" href="#ScaleWithUnits.adjust_scalebar_size">adjust_scalebar_size</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../myimg.html">myimg</a><wbr>.objects    </h1>

                        <div class="docstring"><h2 id="module-myimgobjects">Module: <a href="">myimg.objects</a></h2>

<p>Key classes/objects for myimg package:</p>

<ol>
<li><em>MyImage</em> class
defines the basic MyImg object,
which is used in most image manipulations.</li>
<li><em>Montage</em> class
defines a montage/combination of several images,
which are arranged in a rectangular grid/multi-image.</li>
<li><em>Units</em>, <em>NumberWithUnits</em> and <em>ScaleWithUnits</em> classes
defines allowed units, number-with-units and scale-with-units, respectively.</li>
</ol>

<h2 id="examples-how-does-it-work">Examples = how does it work?</h2>

<p><strong>MyImage</strong> class creates the basic object,
which is used in most image manipulations within <a href="api.html">myimg.api</a> module.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># MyImage class :: simple example (short but real)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn"><a href="api.html">myimg.api</a></span> <span class="k">as</span> <span class="nn">mi</span>        <span class="c1"># import MyImage API ~ simple UI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">mi</span><span class="o">.</span><span class="n">MyImage</span><span class="p">(</span><span class="s1">&#39;some.bmp&#39;</span><span class="p">)</span>  <span class="c1"># open image: some.bmp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>                <span class="c1"># insert a label in the upper left corner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;rwi,100um&#39;</span><span class="p">)</span>     <span class="c1"># insert a scalebar to the lower right corner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save_with_ext</span><span class="p">(</span><span class="s1">&#39;_s.png&#39;</span><span class="p">)</span>   <span class="c1"># save the modified image to: some_ls.png</span>
</code></pre>
</div>

<p><strong>MyReport</strong> class creates the multi-image object,
which contains several images arranged in a rectangular grid.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># MyReport class :: simple example (short but real)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn"><a href="api.html">myimg.api</a></span> <span class="k">as</span> <span class="nn">mi</span>        <span class="c1"># import MyImage API ~ simple UI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;s1.png&#39;</span><span class="p">,</span><span class="s1">&#39;s2.png&#39;</span><span class="p">]</span>  <span class="c1"># define input images</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mrep</span> <span class="o">=</span> <span class="n">mi</span><span class="o">.</span><span class="n">MyReport</span><span class="p">(</span><span class="n">images</span><span class="p">,</span>    <span class="c1"># create montage image</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="c1"># ...grayscale, just two images in a row</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">padding</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>               <span class="c1"># ...padding/spacing between imgs = 10pixels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mrep</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;mreport.png&#39;</span><span class="p">)</span>      <span class="c1"># save the final montage of (the two) images   </span>
</code></pre>
</div>

<p><strong>Units</strong>, <strong>NumberWithUnits</strong>, and <strong>ScaleWithUnits</strong> classes
are used in <a href="utils/scalebar.html">myimg.utils.scalebar</a> module
when creating scalebars (as a scalebar contains <em>number with units</em>).
More information can be found below at the definitions of
<a href="#Units">myimg.objects.Units</a>, <a href="#NumberWithUnits">myimg.objects.NumberWithUnits</a>,
and <a href="#ScaleWithUnits">myimg.objects.ScaleWithUnits</a>.</p>
</div>

                        <input id="mod-objects-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-objects-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">Module: myimg.objects</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">---------------------</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">Key classes/objects for myimg package:</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="sd">1. *MyImage* class</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">   defines the basic MyImg object,</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="sd">   which is used in most image manipulations.</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="sd">2. *Montage* class</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="sd">   defines a montage/combination of several images,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="sd">   which are arranged in a rectangular grid/multi-image.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="sd">3. *Units*, *NumberWithUnits* and *ScaleWithUnits* classes</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="sd">   defines allowed units, number-with-units and scale-with-units, respectively.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="sd">Examples = how does it work?</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="sd">----------------------------</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">**MyImage** class creates the basic object,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">which is used in most image manipulations within myimg.api module.</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="sd">&gt;&gt;&gt; # MyImage class :: simple example (short but real)</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">&gt;&gt;&gt; import myimg.api as mi        # import MyImage API ~ simple UI</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">&gt;&gt;&gt; img = mi.MyImage(&#39;some.bmp&#39;)  # open image: some.bmp</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">&gt;&gt;&gt; img.label(&#39;a&#39;)                # insert a label in the upper left corner</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">&gt;&gt;&gt; img.scalebar(&#39;rwi,100um&#39;)     # insert a scalebar to the lower right corner</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">&gt;&gt;&gt; img.save_with_ext(&#39;_s.png&#39;)   # save the modified image to: some_ls.png</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">**MyReport** class creates the multi-image object,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">which contains several images arranged in a rectangular grid.</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">&gt;&gt;&gt; # MyReport class :: simple example (short but real)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">&gt;&gt;&gt; import myimg.api as mi        # import MyImage API ~ simple UI</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">&gt;&gt;&gt; images = [&#39;s1.png&#39;,&#39;s2.png&#39;]  # define input images</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">&gt;&gt;&gt; mrep = mi.MyReport(images,    # create montage image</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">&gt;&gt;&gt;     itype=&#39;gray&#39;, grid=(1,2), # ...grayscale, just two images in a row</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">&gt;&gt;&gt;     padding=10)               # ...padding/spacing between imgs = 10pixels</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">&gt;&gt;&gt; mrep.save(&#39;mreport.png&#39;)      # save the final montage of (the two) images   </span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">**Units**, **NumberWithUnits**, and **ScaleWithUnits** classes</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">are used in myimg.utils.scalebar module</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">when creating scalebars (as a scalebar contains *number with units*).</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">More information can be found below at the definitions of</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">myimg.objects.Units, myimg.objects.NumberWithUnits,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">and myimg.objects.ScaleWithUnits.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">re</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageFont</span><span class="p">,</span> <span class="n">ImageDraw</span><span class="p">,</span> <span class="n">ImageOps</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="kn">import</span> <span class="nn">skimage</span> <span class="k">as</span> <span class="nn">ski</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="k">class</span> <span class="nc">MyImage</span><span class="p">:</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">    Class defining MyImage objects.    </span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">        Initialize MyImage object.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">        Parameters</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">        ----------</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">        filename : str or path-like object</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">            Name of the image file to work with.</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        Returns</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">        -------</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">        MyImage object</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>        <span class="c1"># Store image name and open the image</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_image_type</span><span class="p">()</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>        <span class="c1"># Additional (optional) properties/features/methods/objects</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iLabels</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">FFT</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>    
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>    
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>    <span class="k">def</span> <span class="nf">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">        Open image file using PIL.Image taking into account all exceptions.</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">        Parameters</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">        ----------</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        filename : str</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">            Name of the file to open.</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a><span class="sd">        Returns</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="sd">        -------</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="sd">        img : PIL image object</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="sd">            The PIL image object is usually saved in MyImage object.</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>            <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File not found: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error opening image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;OS error when opening: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>    
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>    
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>    <span class="k">def</span> <span class="nf">get_font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font_name</span><span class="p">,</span> <span class="n">required_font_size_in_pixels</span><span class="p">):</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">        Get font size (in fontsize units)</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">        corresponding to *required_font_size_in_pixels*.</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">        Parameters</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a><span class="sd">        ----------</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">        fontname : str</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">            Name of the TrueType font to use.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">            Example (working in Windows): font_name=&#39;timesbd.ttf&#39;</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="sd">        required_font_size_in_pixels : float</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">            Required font size in pixels.</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">        Returns</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">        -------</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="sd">        font_size : int</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="sd">            Final font size (in font units).</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">            If the returned *font_size* (in fontsize units)</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">            is applied to font with given *fontname*,</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">            then the height of the font (in pixels units)</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="sd">            will correspond to *required_font_size_in_pixels* argument.</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">            </span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="sd">        Technical notes</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="sd">        ---------------</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">        * This function is a modified recipe from StackOverflow:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">          https://stackoverflow.com/q/4902198</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">        * My modification may be a bit slower (not too much)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">          but it seems to be clear and reliable.</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>        <span class="c1"># (1) Initial fontsize = required_font_size</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>        <span class="c1"># (Note: fontsize [in fontsize units]</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>        <span class="c1"># (is just APPROXIMATELY equal to required fontsize [in pixels].</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>        <span class="n">font_size</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">required_font_size_in_pixels</span><span class="p">)</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>        
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>        <span class="c1"># (2) Initialize draw_object + font_object and calculate font height</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>        <span class="c1"># (Note1: draw_object is needed for the correct font height calculation</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>        <span class="c1"># (Note2: we calculate the font height for a model text - here: cap &#39;M&#39;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>        <span class="n">draw_object</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>        <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>        <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span> 
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>        <span class="c1"># (2a) Current font_height &gt; required_font_size_in_pixels, decrease...</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&gt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>            <span class="n">font_size</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>        <span class="c1"># (2b) Current font_height &gt; required_font_size_in_pixels, increase...</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&lt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>            <span class="n">font_size</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>        <span class="c1"># (3) Return font size (for given font_name, in font_name units)</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>    
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>    
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>    <span class="k">def</span> <span class="nf">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">):</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>        <span class="n">bbox</span> <span class="o">=</span> <span class="n">draw_object</span><span class="o">.</span><span class="n">textbbox</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font_object</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>        <span class="n">text_height</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text_height</span><span class="p">)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>    
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>    
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>    <span class="k">def</span> <span class="nf">_set_image_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">        Set the image type.</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a><span class="sd">        </span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="sd">        This method gets the image type</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">        AND converts some less common image type to more standard ones.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">        Returns</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a><span class="sd">        -------</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">        Image type</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">            We use image types: &#39;binary&#39;, &#39;gray&#39;, &#39;gray16&#39;, &#39;rgb&#39;, &#39;rgba&#39;.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>        <span class="c1"># Get the image type</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>        <span class="c1"># AND convert some less common image types to more standard.</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>        <span class="n">imode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>        <span class="k">if</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;binary&#39;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>            <span class="n">itype</span> <span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;P&#39;</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>            <span class="n">itype</span> <span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;RGB&#39;</span><span class="p">:</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;rgb&#39;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;RGBA&#39;</span><span class="p">:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;rgba&#39;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;I;16&#39;</span><span class="p">:</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray16&#39;</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unsuported image type!&#39;</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PIL image mode: </span><span class="si">{</span><span class="n">imode</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;End of program.&#39;</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>        <span class="c1"># Return the image type</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">itype</span><span class="p">)</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>        
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>            
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>    <span class="k">def</span> <span class="nf">to_gray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;8bit&#39;</span><span class="p">):</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="sd">        Convert image to grayscale.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">        Parameters</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">        ----------</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="sd">        itype : str, optional, default is &#39;8bit&#39;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="sd">            The image is converted to 8bit grayscale.</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="sd">            Only the standard 8bit grayscale images are supported now.</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        Returns</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="sd">        -------</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">        None</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">            </span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">        Technical notes</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">        ---------------</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">        * We fully support only 8-bit grayscale images;</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a><span class="sd">          the same situation is in Pillow (full support only for 8-bit gray).</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="sd">        * Working with 16-bit grayscale images is surprisingly tricky.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">          You *can* read and work with 16-bit images,</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="sd">          but before using some methods of this package</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="sd">          (such as label, scalebar, montage),</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="sd">          they *should* be converted to 8-bit grayscale</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">          in order to avoid errors or strange results.</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a><span class="sd">        * This method can convert</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">          the standard 16-bit grayscale to the 8-bit grayscale,</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">          but it does not support other, less common grayscale formats.</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">        * The less common grayscale formats can be normalized and converted</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">          to 8-bit grayscale manually, in an analogous way as in this method.</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;8bit&#39;</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>            <span class="c1"># Conversion to 8-bit grayscale</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,</span><span class="s1">&#39;RGBA&#39;</span><span class="p">):</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>                <span class="c1"># Conversion of RGB and RGBA images should be fine.</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>                <span class="c1"># The image is 8-bit grayscale - just reset itype=&#39;gray&#39;.</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;I;16&#39;</span><span class="p">:</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>                <span class="c1"># Conversion of 16-bit grayscale to 8-bit grayscale</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>                <span class="c1"># (requires special treatment, not supported by Pillow.</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>                <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">arr</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">*</span> <span class="mi">255</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="n">normalized</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">normalized</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - unsupported image type!&#39;</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>            <span class="c1"># Conversion to non-8bit grayscale formats not supported now.</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - only 8-bit grayscale supported!&#39;</span><span class="p">)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>            
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>    
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>    <span class="k">def</span> <span class="nf">to_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;24bit&#39;</span><span class="p">):</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">        Convert image to RGB.</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">        Parameters</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        ----------</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        itype : str, optional, default is &#39;24bit&#39;</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">            The image is converted to standard RGB image = 24bit = 3*8bit.</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">            Only the standard 24bit RGB images are supported at the moment.</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a><span class="sd">        Returns</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a><span class="sd">        -------</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="sd">        None</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd">            </span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a><span class="sd">        Technical notes</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a><span class="sd">        ---------------</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="sd">        * Standard RGB format = 24bit RGB = 8 bits for each of (R,G,B) values.</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;24bit&#39;</span><span class="p">:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>            <span class="c1"># Conversion to non-standard RGB formats not supported.</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Only standard 24-bit RGB images are supported.&#39;</span><span class="p">)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>    <span class="k">def</span> <span class="nf">to_rgba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;32bit&#39;</span><span class="p">):</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">        Convert image to RGBA.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">        Parameters</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a><span class="sd">        ----------</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">        itype : str, optional, default is &#39;32bit&#39;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">            The image is converted to standard RGBA image = 32bit = 3*8+8bit.</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">            Only the standard 32bit RGBA images are supported at the moment.</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">        Returns</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">        -------</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a><span class="sd">        None</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="sd">            </span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd">        Technical notes</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">        ---------------</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">        * Standard RGBA format = 32bit RGBA = 8bits (R,G,B) + 8bit alpha.</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;32bit&#39;</span><span class="p">:</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">)</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>            <span class="c1"># Conversion to non-standard RGBA formats not supported.</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown image type when converting to RGBA!&#39;</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>    <span class="k">def</span> <span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height_of_bar</span><span class="p">):</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">        Cut off lower bar with given height.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="sd">        Parameters</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">        ----------</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">        height_of_bar : int</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">            Height of the lower bar to cut.</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd">            Lower bars are typical of many microscopic images.</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="sd">            A lower bar contains information from given microscope,</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="sd">            but it is usually removed when preparing the image for publication.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="sd">        Returns</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="sd">        -------</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="sd">        None</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>        <span class="c1"># Cut off lower bar</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">height_of_bar</span><span class="p">))</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>        <span class="c1"># Update image size</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>    
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>    
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">):</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="sd">        Crop image = keep just selected rectangular area.</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">        Parameters</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd">        ----------</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">        rectangle : tuple of four integers</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">            Tuple (X1,Y1,X2,Y2),</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="sd">            where X1,Y1 = coordinates of upper left corner</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">            and X2,Y2 = coordinates of lower right corner.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        Returns</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">        -------</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">        None</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">            The output is saved in *self.img*.</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="c1"># Crop image</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">rectangle</span><span class="p">)</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>        <span class="c1"># Update image size</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>    
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>    
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">        Resize image to new width or height, keeping the aspect ratio.</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">    </span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">        Parameters</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">        ----------</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">        width : int, optional, default is None</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">            The required width of the resized image.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">            The height will be calculated</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">        height : int, optional, default is None</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">            The required height of the resized image.</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="sd">            The width will be calculated</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">        resample : int or None</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="sd">            If None, default resampling filter is used (usually Ok).</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">            It is also possible to define a specific resampling filter.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">            For sharp images or plots we may prefer no resampling and </span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">            we can use *resampling = 0 = Image.Resampling.NEAREST*.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">            More: https://pillow.readthedocs.io -&gt; Reference -&gt; Image -&gt; resize</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">            </span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">        Returns</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">        -------</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        None</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">            The output is saved in *self.img*</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>        <span class="c1"># (0) Calculate AR = aspect_ratio</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>        <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>        
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>        <span class="c1"># (1) Calculate new dimensions while keeping aspect_ratio</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>     <span class="c1"># New dimensions if the width is given</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>            <span class="n">new_width</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>        <span class="k">elif</span> <span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># New dimensions if the height is given</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>            <span class="n">new_width</span>  <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Image resize: width or height was not given - no action!&#39;</span><span class="p">)</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>            <span class="k">return</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>        
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>        <span class="c1"># (2) Update image dimensions</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="n">new_width</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">new_height</span> 
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>        
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>        <span class="c1"># (2) Resize the image</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>            <span class="p">(</span><span class="n">new_width</span><span class="p">,</span> <span class="n">new_height</span><span class="p">),</span> <span class="n">resample</span><span class="o">=</span><span class="n">resample</span><span class="p">)</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>    
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>    <span class="k">def</span> <span class="nf">autocontrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="sd">        Enhance image contrast (using PIL.ImageOps.autocontrast function).</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">        Parameters</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">        ----------</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">            Any arguments of PIL.ImageOps.autocontrast function.</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a><span class="sd">        Returns</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="sd">        -------</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">        None</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">            The modified image is saved in self.img object.</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">autocontrast</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>        
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="sd">        Insert a one-letter label in the upper left corner of an image. </span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">        Parameters</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">        ----------</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        label : str</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">            One letter label that will be inserted in the upper left corner.</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">            Multiplication coefficient/factor that changes the label size.</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">            </span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a><span class="sd">        Returns</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="sd">        -------</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        None</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">        ----------------------</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a><span class="sd">        Technical notes</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">        ---------------</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="sd">        * Transparent background:</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="sd">          To set transparent background,</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>        
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">label</span> <span class="k">as</span> <span class="n">my_label</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="n">my_label</span><span class="o">.</span><span class="n">insert_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>         
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>    <span class="k">def</span> <span class="nf">caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">        Insert a one-line textual description at the bottom of an image. </span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a><span class="sd">        Parameters</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="sd">        ----------</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        text : str</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">            Multiplication coefficient/factor that changes the text size.</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">            color, bcolor, messages.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">            </span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">        Returns</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        -------</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="sd">        None</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="sd">        ----------------------</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        * align : int or str</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">            This parameter determines the alignment of the figure caption.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">            If align = integer,</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a><span class="sd">            x_position of the caption is {align} pixels from left.</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="sd">            If align = string,</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">            it can be either &#39;left&#39; or &#39;Left&#39; or &#39;&#39;</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">        Technical notes</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">        ---------------</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">        * Transparent background:</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">          To set transparent background,</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>        
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">caption</span> <span class="k">as</span> <span class="n">my_caption</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>        <span class="n">my_caption</span><span class="o">.</span><span class="n">insert_caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>    
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>    <span class="k">def</span> <span class="nf">border</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        Draw a border around an image. </span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a><span class="sd">        Parameters</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">        ----------</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a><span class="sd">        border : int or tuple, optional, default is 1</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a><span class="sd">            Int = the same thickness of border around all four edges.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a><span class="sd">            Tuple of 2 ints = (left/righ and top/bottom) border sizes.</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="sd">            Tuple of 4 ints = (left, top, right, bottom) border sizes. </span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="sd">        color : PIL color specification, default is &#39;black&#39;</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a><span class="sd">        &#39;&#39;&#39;</span>        
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="c1"># (0) In the future, we may add border with shadow</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>        <span class="c1"># Now we add just simple border using PIL.ImageOps.expand.</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>        
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>        <span class="c1"># (1) Add border</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">border</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>        
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>        <span class="c1"># (2) Update MyImage properties = width and height</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>         
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>    <span class="k">def</span> <span class="nf">scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a><span class="sd">        Insert a scalebar in the lower right corner of the image.</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a><span class="sd">        Parameters</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a><span class="sd">        ----------</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a><span class="sd">        pixsize : str</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a><span class="sd">            Description how to determine pixel size.</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a><span class="sd">            Pixel size is needed to calculate the scalebar length.</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="sd">            See *Example* section below to see available options.</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a><span class="sd">        F : float, optional, the default is None</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="sd">            Multiplication coefficient/factor that changes the scalebar size.</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="sd">            If F = 1.2, then all scalebar parameters are enlarged 1.2 times.</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">            See section *List of allowed kwargs* below for more info. </span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">            </span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">        Returns</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">        -------</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">        None</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a><span class="sd">            The scalebar is drawn directly to *self.img*.</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">            </span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">        Example</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">        -------</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">        &gt;&gt;&gt; # Four basic ways how to insert a scalebar in an image</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">        &gt;&gt;&gt; # (model example; in real life we use just one of the ways</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">        &gt;&gt;&gt; # (0) Import api + read image</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/image123_20kx.bmp&#39;)</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        &gt;&gt;&gt; # (1) Pixel size from real width of image = 100um</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;rwi,100um&#39;)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a><span class="sd">        &gt;&gt;&gt; # (2) Pixel size from a known length in image =&gt; 50 nm = 202 pixels</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;knl,50nm,202&#39;)</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="sd">        &gt;&gt;&gt; # (3) Pixel size from known magnification</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="sd">        &gt;&gt;&gt; # (note: this can be done only for calibrated microscope</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a><span class="sd">        &gt;&gt;&gt; # (calibrated microscopes =&gt; myimg.settings.MicCalibrations</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a><span class="sd">        &gt;&gt;&gt; # (3a) magnification deduced from last part of image name</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag = everything between last underscore and suffix</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a><span class="sd">        &gt;&gt;&gt; # (in this example we have: ../IMG/image123_20kx.bmp =&gt; mag = 20kx</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta&#39;)</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a><span class="sd">        &gt;&gt;&gt; # (3b) magnification inserted directly</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag can be something like 20kx, 20k, 20000x, 20000</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta,20kx&#39;)</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="sd">        &gt;&gt;&gt; # (4) Pixel size from accompanying text file</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a><span class="sd">        &gt;&gt;&gt; # (note: some microscopes save images + descriptive txt files</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">        &gt;&gt;&gt; # (the format of text file must be described somehow</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="sd">        &gt;&gt;&gt; # (description of text files =&gt; myimg.settings.MicDescriptionFiles</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;txt,MAIA3&#39;)</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">        ----------------------</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">            Text color = color of the scalebar text and line.</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">            Background color = color of the scalebar background/box.</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        * length : str, default is None.</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">            If length is given (using a string such as &#39;100um&#39;,&#39;1.2nm&#39;)</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">            then the lenght fixed at given value and not calculated by the</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a><span class="sd">            program (calculation would yield some reasonable lenght of</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="sd">            scalebar around 1/6 of the image width; this default is saved</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">            in myimg.settings.Scalebar.length property - which can be changed).</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a><span class="sd">        * position : list or tuple or None, default is None.</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">            If position = None, the scalebar is drawn</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">            at the default position in the lower-right corner of the image.</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a><span class="sd">            If position = (X,Y) = list or tuple of two integers,</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a><span class="sd">            the scalebar is drawn at position X,Y of the image.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="sd">        * stripes : bool or int, default is False.</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">            If stripes = False, draw standard scalebar.</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">            If stripes = True or 1, draw scalebar with 5 stripes.</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a><span class="sd">            If stripes = N, where N&gt;=2, draw striped scalebar with N stripes.</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a><span class="sd">        * messages : bool, default is False.</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a><span class="sd">            If messages=True, print info about program run.</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a><span class="sd">        </span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a><span class="sd">        Technical notes</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a><span class="sd">        ---------------</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">        * Transparent background:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a><span class="sd">          To set transparent background,</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a><span class="sd">          are set to their defaults defined in Settings.Scalebar.</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a><span class="sd">        * Color scalebar in grayscale image:</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">scalebar</span> <span class="k">as</span> <span class="n">my_scalebar</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>        <span class="n">my_scalebar</span><span class="o">.</span><span class="n">insert_scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>    
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>    
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">iscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a><span class="sd">        Show image.</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a><span class="sd">        Parameters</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="sd">        ----------</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a><span class="sd">        Returns</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">        -------</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">        None</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">            The output is the image shown on the screen.</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>        <span class="c1"># Grayscale images require special treatment</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>        <span class="n">grayscale_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>            <span class="c1"># If not specified explicitly, cmap should be gray.</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>            <span class="k">if</span> <span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>            <span class="c1"># If not required, grayscale images should not be autoscaled.</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>            <span class="k">if</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-8bit</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-16bit</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">65535</span><span class="p">)</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>        <span class="c1"># Do not show axes if axes = False</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>        <span class="c1"># Plot the image</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>        <span class="c1"># ...intensity of grayscale images should not be autoscaled</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span> <span class="ow">and</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">imin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">imax</span><span class="p">)</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="c1"># Show the plot </span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>    
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>    
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">        Save image using arbitrary output dir, name and extension.</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a><span class="sd">        Parameters</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a><span class="sd">        ----------</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">        Returns</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        -------</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">        None</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>    
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>    
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>    <span class="k">def</span> <span class="nf">save_with_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_extension</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a><span class="sd">        Save image in the same dir with slightly modified name and extension.</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">        Parameters</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">        ----------</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">        my_extension : str</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">            Specific extension of the output image.</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">            The argument my_extension can extend image name</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a><span class="sd">            + modify image extension/format;</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">            see the example below.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">            </span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">        Returns</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">        -------</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">        None</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">            The output is the saved output image with *my_extension*.</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">        </span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">        Example</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="sd">        -------</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="sd">        &gt;&gt;&gt; # Open image</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/somefile.bmp&#39;)</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        &gt;&gt;&gt; # Cut off lower bar </span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a><span class="sd">        &gt;&gt;&gt; img.cut(60)</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a><span class="sd">        &gt;&gt;&gt; # Save the image as: &#39;../IMG/somefile_cut.png&#39;)</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a><span class="sd">        &gt;&gt;&gt; img.save_with_ext(&#39;_cut.png&#39;)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>        <span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">ext</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>        <span class="n">output_image</span> <span class="o">=</span> <span class="n">file</span> <span class="o">+</span> <span class="n">my_extension</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>    
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="k">class</span> <span class="nc">MyReport</span><span class="p">:</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a><span class="sd">    Class defining MyReport objects.</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>    
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">itype</span><span class="p">,</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>                 <span class="n">grid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        Initialize MyReport object.</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="sd">        Parameters</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">        ----------</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">        images : list of images (arrays or str or path-like or MyImage objects)</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">            The list of images from which the MyReport will be created.</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a><span class="sd">            If {images} list consists of arrays,</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="sd">            we assume that these arrays are the direct input to</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">            skimage.util.montage method.</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a><span class="sd">            If {images} list contains of strings or path-like objects,</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a><span class="sd">            we assume that these are filenames of images</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a><span class="sd">            that should be read as arrays.</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="sd">            If {images} lists contains MyImage objecs,</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="sd">            we use MyImage objects to create the final MyReport/montage.</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="sd">        itype : type of images/arrays (&#39;gray&#39; or &#39;rgb&#39; or &#39;rgba&#39;)</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">            The type of input/output images/arrays.</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a><span class="sd">            If itype=&#39;gray&#39;,</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">            then the input/output are converted to grayscale.</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="sd">            If itype=&#39;rgb&#39; or &#39;rgba&#39;</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a><span class="sd">            then the input/output are treated as RGB or RGBA images/arrays.</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a><span class="sd">        grid : tuple of two integers (number-of-rows, number-of-cols)</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a><span class="sd">            *grid_shape* argument in skimage.util.montage function.</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a><span class="sd">            It defines the number-of-rows and number-of-cols of the montage.</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a><span class="sd">            Note: If grid is None, it defaults to a suitable square grid.</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a><span class="sd">        padding : int; the default is 0</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a><span class="sd">            *padding_width* argument in skimage.util.montage function.</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a><span class="sd">            It defines the distance between the images/arrays of the montage.</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a><span class="sd">        fill : str or int or tuple/list/array; the default is &#39;white&#39;</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a><span class="sd">            This argument is a (slightly extended) equivalent of </span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a><span class="sd">            *fill* argument in skimage.util.montage function.</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="sd">            It defines the color between the images/arrays.</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a><span class="sd">            If fill=&#39;white&#39; or fill=&#39;black&#39;,</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a><span class="sd">            the color among the images/arrays is white or black.</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="sd">            It can also be an integer value (for grayscale images)</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="sd">            or a three-value tuple/list/array (for RGB images);</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a><span class="sd">            in such a case, it defines the exact R,G,B color among the images.</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">        crop : bool; the default is True</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">            If crop=True, the outer padding is decreased to 1/2*padding.</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">            This makes the montages nicer (like the outputs from ImageMagick).</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">        rescale : float; the default is None</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">            If *rescale* is not None, then the original size</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">            of all input images/arrays is multiplied by *rescale*.</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">            Example: If *rescale* = 1/2, then the original size</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">            of all input images/arrays is halved (reduced by 50%).</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">            </span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">        Returns</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">        -------</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a><span class="sd">        MyReport object</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a><span class="sd">            Multi-image = tiled image composed of *images*.</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a><span class="sd">            The MyReport object can be shown (MyReport.show)</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="sd">            or saved (MyReport.save).</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a><span class="sd">        </span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="sd">        Technical notes</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a><span class="sd">        ---------------</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="sd">        * Only &#39;gray&#39;, &#39;rgb&#39;, and &#39;rgba&#39; standard formats are supported.</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a><span class="sd">          If an image has some non-standard format,</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="sd">          it can be read and converted using a sister MyImage class</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">          (methods MyImage.to_gray, MyImage.to_rgb, MyImage.to_rgba).</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">        * The user does not have to differentiate &#39;rgb&#39; and &#39;rgba&#39; images.</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">          It is enough to specify &#39;rgb&#39; for color images</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">          and if the images are &#39;rgba&#39;, the program can work with them.</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>        
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>        <span class="c1"># Get basic arguments/properties</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">images</span>  <span class="o">=</span> <span class="n">images</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span>   <span class="o">=</span> <span class="n">itype</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span>    <span class="o">=</span> <span class="n">grid</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span>    <span class="o">=</span> <span class="n">fill</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crop</span>    <span class="o">=</span> <span class="n">crop</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="o">=</span> <span class="n">rescale</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="c1"># Process self.images</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="c1"># 1) Convert all images to np.arrays.</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="c1"># 2) Check if the np.arrays have the same size,</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="c1">#    i.e. the same dimensions, including the number of channels.</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>        <span class="c1">#    (channels ~ colors + transparency; usually the last dim/axis</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="c1"># 3) Rescale images/arrays if requested.</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>        <span class="c1">#    (the images/arrays are rescaled if self.rescale != None</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_images</span><span class="p">()</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>        
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>        <span class="c1"># Process self.itypes</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="c1"># 1) Check image tepes</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>        <span class="c1">#    (the only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>        <span class="c1"># 2) Define additional parameters for montage:</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>        <span class="c1">#    (the additional parameters will be saved within the self object</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_image_types</span><span class="p">()</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>        
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>        <span class="c1"># Rescale images if requested</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="c1"># (rescaleing can be performed AFTER...</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>        <span class="c1"># (...self.process_images =&gt; because images are converted to arrays</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>        <span class="c1"># (...self.check_image_types =&gt; because this sets additional params:</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>        <span class="c1"># (   self.montage_channel_axis</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>        <span class="c1"># (   self.montage_number_of_channels</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale_images</span><span class="p">()</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>        <span class="c1"># Adjust white/black colors according to image type and no-of-channels</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span> 
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>   <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> 
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="mi">255</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>                
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>        <span class="c1"># Analyze fill = fill_color and adjust acc.to image_type</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="k">match</span> <span class="n">fill</span><span class="p">:</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>            <span class="k">case</span> <span class="s1">&#39;white&#39;</span><span class="p">:</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_white</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>            <span class="k">case</span> <span class="s1">&#39;black&#39;</span><span class="p">:</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_black</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>    
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="c1"># Create final montage</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">montage</span><span class="p">(</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>            <span class="n">arr_in</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">,</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>            <span class="n">grid_shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>            <span class="n">padding_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span><span class="p">)</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>        
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>        <span class="c1"># Crop the montage (= reduce the outer padding size to 1/2*padding)</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>            <span class="n">my_crop</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">[</span><span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">,</span> <span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">]</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>    
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>    <span class="k">def</span> <span class="nf">process_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="sd">        Check and prepare images before creating MyReport/montage.</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="sd">        </span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a><span class="sd">       * The images used for MyReport/montage</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a><span class="sd">         should be convertible to arrays with the same type and size.</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a><span class="sd">       * This method goes through all images in self.images</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="sd">         and converts them to arrays.</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="sd">       * If the converted images/arrays have the same dimensions(=type),</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">         then everything is Ok</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a><span class="sd">         and we cen proceed.</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">       * If the conerted images/arrays do not have the same dimension(=type),</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">         then this methods ends with an error</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">         and the user has to adjust images BEFORE calling the montage method.</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="sd">       </span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="sd">        Returns</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">        -------</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">        None</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">            If everything is Ok,</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">            the checked images are read and saved as arrays in the self.images.</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">            If the images are not of the same type</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a><span class="sd">            this method prints an error and the program quits.</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>        <span class="c1"># (0) Prepare variables</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>        <span class="n">img_sizes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>        
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>        <span class="c1"># (1) Go through the images (self.images) to create montage array.</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>            <span class="c1"># Case 1: NumPy array =&gt; just </span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>                <span class="c1"># self.images is not changed = we already have an array</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>                <span class="c1"># just save image size</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>            <span class="c1"># Case 2: MyImage object =&gt; convert to array and append </span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>            <span class="k">elif</span> <span class="s1">&#39;MyImage&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>                <span class="c1"># self.images[i] is changed =&gt; np.array instead of MyImg object</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>                <span class="c1"># save image size</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>            <span class="c1"># Case 3: None object =&gt; append None</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>            <span class="c1"># TODO: Later, None should be exchanged for suitable empty array.</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>                <span class="k">pass</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>            <span class="c1"># Case 4: Nothing of the above =&gt; we suppose it is a filename.</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>            <span class="c1"># TODO: Consider exceptions etc...</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>                <span class="c1"># self.images[i] is changed =&gt; we read a file to an array</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>                <span class="k">if</span> <span class="s1">&#39;rgb&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>                    <span class="c1"># Read image in the default way (as_gray=False)</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>                <span class="k">elif</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>                    <span class="c1"># Read image as grayscale (as_grayscale=True)</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in: myimg.Montage.process_images&#39;</span><span class="p">)</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown input image type!&#39;</span><span class="p">)</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                <span class="c1"># Save image size</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>                
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>        <span class="c1"># (2) Additional adjustment for all grayscale images</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>        <span class="c1"># =&gt; if itype = &#39;gray&#39;, then normalize image to 8bit grayscale.</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="c1"># (3-value gray-imgs normalized to 1, 8bit to 255, 16bit to 65535</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="c1"># (moreover, we can have a combination of various grayscales</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="c1"># (to get reproducible results, we ALWA&amp;S normalize to 8-bit gray</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>            <span class="k">if</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>                <span class="n">arr_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">arr_max</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>        
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>        <span class="c1"># (3) Final check if all images are of the same size</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>        <span class="c1"># Trick: All-list-elements-are-the-same</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>        <span class="c1"># if the number of the occurrences of the first elements</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="c1"># equals to the total number of elements in the list.</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="n">all_the_same</span> <span class="o">=</span> <span class="n">img_sizes</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">)</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>        <span class="c1"># Now the final check</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>        <span class="k">if</span> <span class="n">all_the_same</span><span class="p">:</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>            <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>        
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>    
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="k">def</span> <span class="nf">check_image_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">        Check image/array types and prepare additional parametrs for montage.</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">        </span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        * The only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">        * Other image types =&gt; print error message and exit program.</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="sd">        * For each image type we have to set two additional montage params:</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">            - self.montage_channel_axis =&gt; the last axis of the array</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="sd">            - self.montage_number_of_channels =&gt; gray ~ 1, rgb ~ 3, rgba ~ 4</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        </span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">        Returns</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">        -------</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a><span class="sd">        None</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a><span class="sd">            The additional montage parameters are are saved in</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a><span class="sd">            self.montage_channel_axes and self.montage_number_of_channels.</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a><span class="sd">            These parameters are needed</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="sd">            for correct treatement of rgb/gray images/arrays.</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>        
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>            <span class="c1"># RGB and RGBA images = 3D-arrays</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>            <span class="c1"># the last axis = channel axis = color channels = axis 4 =&gt; index 3</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>            <span class="c1"># the number of channels = either 3 (RGB) or 4 (RGBA)</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>            <span class="c1"># Grayscale images = 2D-arrays</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>            <span class="c1"># (no channel axis = just one channel, grayscale value</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>            <span class="c1"># (all grayscale images are read by ski.io.imread as 1-value gray</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="c1"># Other image formats are not supported at the moment.</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown image type: [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="si">}</span><span class="s1">]!&#39;</span><span class="p">)</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Allowed image types are &#39;gray&#39;, &#39;rgb&#39; or &#39;rgba&#39;.&quot;</span><span class="p">)</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>            
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>    
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>    <span class="k">def</span> <span class="nf">rescale_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a><span class="sd">        Rescale input images/arrays if requested.</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a><span class="sd">        </span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a><span class="sd">        * The images are rescaled if self.rescale != None.</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a><span class="sd">        * This rescaling should be applied to each of self.images</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a><span class="sd">          AFTER the images have been checked and converted to arrays.</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="sd">       </span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a><span class="sd">        Returns</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a><span class="sd">        -------</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a><span class="sd">        None</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a><span class="sd">            The rescaled images/arrays are saved in self.images.</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>        
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>        <span class="c1"># Rescale all input images/arrays if requested.</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>            <span class="c1"># Go through the images/arrays in arr_in</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>            <span class="c1"># and rescale them one-by-one,</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>            <span class="c1"># preserving the range and data type.</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>                <span class="c1"># Save the original data type.</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>                <span class="n">original_data_type</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">dtype</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>                <span class="c1"># Prepare channel axis</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>                <span class="c1"># Rescale the array, preserving the range and data type.</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rescale</span><span class="p">(</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>                    <span class="n">image</span><span class="p">,</span>                        <span class="c1"># input montage array</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span><span class="p">,</span>                 <span class="c1"># rescaling coefficient</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>                    <span class="n">anti_aliasing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>           <span class="c1"># anti-aliasing</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>                    <span class="n">preserve_range</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>          <span class="c1"># preserve intensities</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>                    <span class="n">channel_axis</span><span class="o">=</span><span class="n">channel_axis</span>     <span class="c1"># channel axis for RGB images</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>                    <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">original_data_type</span><span class="p">)</span>  <span class="c1"># preserve original data type</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a><span class="sd">        Show MyReport = rectangular montage of images.</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a><span class="sd">        Parameters</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a><span class="sd">        ----------</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="sd">        Returns</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">        -------</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a><span class="sd">        None</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a><span class="sd">            The output is the MyReport (image montage) shown on the screen.</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>        <span class="c1"># Check/adjust the colormap</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>        <span class="c1"># (if we have grayscale image and no colormap, we want cmap=&#39;gray&#39;</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">):</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>        <span class="c1"># Prepare the plot</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>        <span class="c1"># Switch off the axes, if not requested otherwise</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>        <span class="c1"># Show the plot</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>    
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>    
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        Save MyReport (using an arbitrary path, name and extension).</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a><span class="sd">        Parameters</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">        ----------</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a><span class="sd">            The dpi of the saved image/montage.</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a><span class="sd">        Returns</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="sd">        -------</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a><span class="sd">        None</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>        <span class="c1"># Convert to grayscale, if required.</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>        <span class="c1"># Save the output image montage.</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>        <span class="c1"># (ski.io.imsave does not support saving with defined DPI</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>        <span class="c1"># (plt.imsave supports DPI, but grayscale images require cmap=&#39;gray&#39;</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>            <span class="c1"># Grayscale images are saved with colormap = &#39;gray&#39;</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>            <span class="c1"># RGB (and RGBA) images are saved without cmap to keep the colors</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>        
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>        
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="nd">@dataclass</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a><span class="k">class</span> <span class="nc">Units</span><span class="p">:</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="sd">    Data class: just a container for the following two dataclasses.</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a><span class="sd">    </span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a><span class="sd">    * The sub-dataclasses are used in NumberWithUnits/ScaleWithUnits objects.</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a><span class="sd">    * The units definitions are fixed, the users should not change them.</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a><span class="sd">    * The correct units (Lenghts or RecLenghts) are guessed</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a><span class="sd">      during NumberWithUnits/ScaleWithUnits object initialization.</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a><span class="sd">      Example: If `nwu = NumberWithUnits(&#39;2um&#39;)`, then we use `Units.Lenghts`.</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>    
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>    <span class="nd">@dataclass</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>    <span class="k">class</span> <span class="nc">Lengths</span><span class="p">:</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a><span class="sd">        Data class: length units (and their ratios) for micrographs.    </span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>        <span class="n">micro</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u00B5</span><span class="s1">&#39;</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>        <span class="n">angstrem</span>   <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>        <span class="n">micrometer</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">micro</span> <span class="o">+</span> <span class="s1">&#39;m&#39;</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>        <span class="n">units</span>      <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;cm&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="s1">&#39;um&#39;</span><span class="p">,</span> <span class="s1">&#39;nm&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>        <span class="n">ratios</span>     <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">,</span> <span class="mf">1e9</span><span class="p">,</span> <span class="mf">1e10</span><span class="p">)</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>    
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>    <span class="nd">@dataclass</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>    <span class="k">class</span> <span class="nc">RecLengths</span><span class="p">:</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a><span class="sd">        Data class: reciprocal lenght units (and their ratios).</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a><span class="sd">        </span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a><span class="sd">        * Reminder: reciprocal lenghts are used in diffractograms</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a><span class="sd">        * Here: rust a pair of units that are employed in real life: 1/nm, 1/A</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>        <span class="n">angstrem</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>        <span class="n">rec_angstrem</span>  <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span>  <span class="s1">&#39;1/&#39;</span><span class="o">+</span><span class="n">angstrem</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>        <span class="n">units</span>         <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1/nm&#39;</span><span class="p">,</span><span class="s1">&#39;1/A&#39;</span><span class="p">)</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>        <span class="n">ratios</span>        <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a><span class="k">class</span> <span class="nc">NumberWithUnits</span><span class="p">:</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a><span class="sd">    Class defining NumberWithUnits object.</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a><span class="sd">    </span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a><span class="sd">    * NumberWithUnits object = number + units.</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a><span class="sd">    * The numbers-with-units are used for pixel sizes or scalebars.</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a><span class="sd">      </span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a><span class="sd">    Object initialiation</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a><span class="sd">    </span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a><span class="sd">    &gt;&gt;&gt; # Three basic ways how to initialize a NumberWithUnits object</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a><span class="sd">    &gt;&gt;&gt; # (this is a NON-typical usage</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a><span class="sd">    &gt;&gt;&gt; # (NumberWithUnits object is used internally, when drawing scalebars</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a><span class="sd">    &gt;&gt;&gt; from myimg.nwu import NumberWithUnits</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a><span class="sd">    &gt;&gt;&gt; nwu1 = NumberWithUnits(&#39;1.2um&#39;)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a><span class="sd">    &gt;&gt;&gt; nwu2 = NumberWithUnits(number=1.2, units=&#39;um&#39;)</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="sd">    &gt;&gt;&gt; nwu3 = NumberWithUnits(a_number_with_units_object_such_as_nwu1)</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="sd">    </span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="sd">    List of object properties</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a><span class="sd">        </span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">    * number = number/numeric value</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a><span class="sd">    * units = units corresponding to number</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">    * _units_description = myimg.settings.Units subclass, private property</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">    </span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a><span class="sd">    Object methods</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a><span class="sd">    </span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">    * text = return number-with-units as string</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="sd">    * units_Ok = test if the defined units are correct</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a><span class="sd">    * index_of_units = index of units in units_description.units list</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a><span class="sd">    * increase_units = increase units and modify number accordingly</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a><span class="sd">    * decrease_units = decrease units and modify number accordingly</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a><span class="sd">    * set_units_to = set units to given units and modify number accordingly</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a><span class="sd">    * set_correct_units = set units so that the number was within &lt;1,1000)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>    
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="sd">        Initialize NumberWithUnits object.</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a><span class="sd">        Parameters</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a><span class="sd">        ----------</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a><span class="sd">              </span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="sd">            </span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">        Returns</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">        -------</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">        NumberWithUnits object</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units), and</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">            (iii) further props/methods (NumberWithUnits.change_units ...).</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>        <span class="c1"># (1) Determine input types</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>        <span class="k">if</span> <span class="n">number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input1</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>        <span class="k">if</span> <span class="n">units</span>  <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input2</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>        <span class="c1"># (2) Parse the input number with units</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>        <span class="k">if</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>            <span class="c1"># 1st input is a float (number) =&gt; 2nd input should be str (units)</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>            <span class="k">if</span> <span class="n">input2</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits object!&#39;</span><span class="p">)</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Units not given, exiting...&#39;</span><span class="p">)</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>            <span class="c1"># input is string =&gt; split using regexp</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>            <span class="c1"># TODO: consider errors and exceptions</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a><span class="s1">                # 1st/2nd group = number/units in standard () =&gt; to remember</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a><span class="s1">                # exponent/rec.value in (?:) =&gt; not to remember</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a><span class="s1">                (                  # start of 1st group = number</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a><span class="s1">                  \d*\.?\d*        # number, such as 1, 1.2, .9</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a><span class="s1">                  (?:e[+-]?\d+)?   # optional exponent, such as e3 e-6</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a><span class="s1">                )                  # end of 1st group</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a><span class="s1">                \s*                # possible whitespace</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a><span class="s1">                (                  # start of 2nd group = units</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="s1">                  (?:1/)?          # optional reciprocal value = &#39;1/&#39;</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="s1">                  \D+              # one or more non-digit characters</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="s1">                )                  # end of 2nd group</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>                <span class="n">string</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>                <span class="n">flags</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>            <span class="n">number</span><span class="p">,</span><span class="n">units</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="n">NumberWithUnits</span><span class="p">:</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>            <span class="c1"># input is another NumberWithUnits =&gt; create copy of it</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">units</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Wrong input number_with_units!&#39;</span><span class="p">)</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>        <span class="c1"># (3) Determine, which units we use</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>        <span class="c1"># =&gt; set private _units_description property</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uknown units!&#39;</span><span class="p">)</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>    
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Overwritten __str__ method to get nice output with print.&#39;&#39;&#39;</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>        <span class="c1"># Get number and units (they will be adjusted, originals unchanged).</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>        <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>        <span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="c1"># Adjust number: if it is (very close to) integer, convert to integer.</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>        <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-10</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">number</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">:</span> <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>        <span class="c1"># Adjust units: if units contains a special character, print it.</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>        <span class="k">if</span>   <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;um&#39;</span> <span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">micrometer</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>        <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span>  <span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">angstrem</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>        <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;1/A&#39;</span><span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">rec_angstrem</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>        <span class="c1"># Combine final number and units</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">units</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>        <span class="c1"># Return resulting string</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>    
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">        Return number + units as string.</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a><span class="sd">        Returns</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">        -------</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">        str : number-with-units</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>    
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>    <span class="k">def</span> <span class="nf">units_Ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="sd">        Test if current units are correct.</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a><span class="sd">        Parameters</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a><span class="sd">        ----------</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a><span class="sd">            If units=&#39;something&#39;, then &#39;something&#39; is compared</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a><span class="sd">            with the list of allowed units for self = NumberWithUnits object.</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a><span class="sd">        Returns</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a><span class="sd">        -------</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a><span class="sd">        bool</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a><span class="sd">            True if the units are correct and False otherwise.</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>        <span class="c1"># (1) If units argument is not given,</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>        <span class="c1"># check units of current NumberWithUnits object.</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>            <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>        <span class="c1"># (2) Return True/False if units are correct/incorrect.</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>        
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>    <span class="k">def</span> <span class="nf">index_of_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units_to_check</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">        Get index of current or specified units.</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a><span class="sd">        Parameters</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a><span class="sd">        ----------</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="sd">        units_to_check : str, optional, default is None</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a><span class="sd">            Any string representing some units.</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a><span class="sd">            If units_to_check is not given,</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a><span class="sd">            the method check current units of self object.</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a><span class="sd">            </span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a><span class="sd">        Returns</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="sd">        -------</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">        int</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a><span class="sd">            Index of current or specified units.</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a><span class="sd">            If units = &#39;um&#39; then index_of_units = 2,</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a><span class="sd">            because Units.Lenghts.units = (&#39;m&#39;, &#39;mm&#39;, &#39;um&#39;, &#39;nm&#39;, &#39;A&#39;),</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a><span class="sd">            which means: &#39;m&#39; =&gt; 0, &#39;mm&#39; =&gt; 1, &#39;um&#39; =&gt; 2...</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a><span class="sd">        </span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a><span class="sd">        Note</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a><span class="sd">        ----</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a><span class="sd">        This function is employed in further functions</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="sd">        manipulating with units, such as increase_units, decrease_units...</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>        <span class="k">if</span> <span class="n">units_to_check</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">units_to_check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> 
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>        <span class="n">index_of_units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">units_to_check</span><span class="p">)</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">index_of_units</span><span class="p">)</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>        
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>    <span class="k">def</span> <span class="nf">increase_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">        Increase current units (for example: um -&gt; mm).</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a><span class="sd">        Returns</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a><span class="sd">        -------</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a><span class="sd">        None</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>        <span class="c1"># (2) If index-of-curent-units = 0,</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>        <span class="c1"># then it is not possible to increase units - we are at maximum. </span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to increase units!&#39;</span><span class="p">)</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>        <span class="c1"># (3) If index-of-current-units &gt; 0,</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) decrease number, 3) increase units.</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>    <span class="k">def</span> <span class="nf">decrease_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a><span class="sd">        Decrease current units (for example: um -&gt; nm).</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a><span class="sd">        Returns</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a><span class="sd">        -------</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a><span class="sd">        None</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>        <span class="c1"># (2) If index-of-curent-units = last-index-of-our-units,</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>        <span class="c1"># then it is not possible to decrease units - we are at minimum. </span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">max_index</span><span class="p">:</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to decrease units!&#39;</span><span class="p">)</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="c1"># (3) If index-of-current-units &lt; last-index-of-our-units,</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) increase number, 3) decrease units.</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>        
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>    <span class="k">def</span> <span class="nf">set_units_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_units</span><span class="p">):</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">        Set units to *target_units* and modify number accordingly.</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a><span class="sd">        Parameters</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="sd">        ----------</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">        target_units : str</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a><span class="sd">            Any string specifying valid units.</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a><span class="sd">        Returns</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a><span class="sd">        -------</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a><span class="sd">        None</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a><span class="sd">            The results = changed units (and correspondingly changed number)</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">            are saved in NumberWithUnits object.</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="n">index_current</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="n">index_target</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">(</span><span class="n">target_units</span><span class="p">)</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>        <span class="n">index_difference</span> <span class="o">=</span> <span class="n">index_target</span> <span class="o">-</span> <span class="n">index_current</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>        <span class="k">if</span> <span class="n">index_difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index_difference</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>        <span class="k">elif</span> <span class="n">index_difference</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">index_difference</span><span class="p">)):</span> <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>                
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>    <span class="k">def</span> <span class="nf">set_correct_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a><span class="sd">        Set correct units, so that the number was between 1 and 1000.</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">        Returns</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">        -------</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a><span class="sd">        None</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a><span class="k">class</span> <span class="nc">ScaleWithUnits</span><span class="p">(</span><span class="n">NumberWithUnits</span><span class="p">):</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a><span class="sd">    Class defining ScaleWithUnits object.</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a><span class="sd">    </span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a><span class="sd">    * ScaleWithUnits object = number + units + pixels.</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a><span class="sd">    * The objet defines a scalebar:</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a><span class="sd">      its lenght (number,units) and length-in-pixels (pixels).</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a><span class="sd">    </span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a><span class="sd">    Object initialiation</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a><span class="sd">    </span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a><span class="sd">    &gt;&gt;&gt; # Three basic ways how to initialize a ScaleWithUnits object</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a><span class="sd">    &gt;&gt;&gt; # (this is a NON-typical usage</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a><span class="sd">    &gt;&gt;&gt; # (ScaleWithUnits object is used internally, when drawing scalebars</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a><span class="sd">    &gt;&gt;&gt; from myimg.nwu import ScaleWithUnits</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a><span class="sd">    &gt;&gt;&gt; swu1 = ScaleWithUnits(&#39;1.2um&#39;, pixels=100)</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a><span class="sd">    &gt;&gt;&gt; swu2 = ScaleWithUnits(number=1.2, units=&#39;um&#39;, pixels=100)</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">    &gt;&gt;&gt; swu3 = ScaleWithUnits(a_number_with_units_object, pixels=100)</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a><span class="sd">    </span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a><span class="sd">    List of object properties</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a><span class="sd">        </span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a><span class="sd">    * number = number/numeric value</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a><span class="sd">    * units  = units corresponding to number</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a><span class="sd">    * pixels = pixels corresponding to number-with-units</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a><span class="sd">    * _units_description: myimg.settings.Units subclass, private property</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a><span class="sd">    </span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="sd">    Object methods</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">    </span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a><span class="sd">    * inherited methods from myimg.nwu.NumberWithUnits</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a><span class="sd">    * adjust_lenght_to = adjust lenght in pixels and modify number accordingly</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a><span class="sd">    * adjust_scalebar_size = adjusts scalebar lenght to some reasonable size</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>    
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a><span class="sd">        Initialize ScaleWithUnits object.</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a><span class="sd">        Parameters</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a><span class="sd">        ----------</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a><span class="sd">        pixels : float</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a><span class="sd">            Length of scalebar in pixels.</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a><span class="sd">            This is a keyword argument that is formally optional, but in fact </span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a><span class="sd">            it must be specified so that the initialization made sense.</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a><span class="sd">            Moreover, this argument must be specified as keyword argument,</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a><span class="sd">            because the 2nd argument (units) is really optional and</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a><span class="sd">            it may not be clear, which argument is which.</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a><span class="sd">            </span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a><span class="sd">        Returns</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a><span class="sd">        -------</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a><span class="sd">        ScaleWithUnits object</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units),</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a><span class="sd">            (iii) length-of-scalebar-in-pixels and</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="sd">            (iv) further props/methods (most of which</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a><span class="sd">            are inherited from NumberWithUnits superclass).</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">pixels</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>    
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Overwritten __str__ method to get nice output with print.&#39;&#39;&#39;</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>        <span class="n">text</span> <span class="o">=</span> \
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>            <span class="s1">&#39;Scalebar: &#39;</span> <span class="o">+</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="o">+</span> \
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>            <span class="s1">&#39;, length-in-pixels: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">)</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>    
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a><span class="sd">        Return number-with-units as string (ignoring pixels).</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a><span class="sd">        Returns</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a><span class="sd">        -------</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a><span class="sd">        str : number-with-units</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>        <span class="c1"># We need JUST text.</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>        <span class="c1"># =&gt; therefore, we call super().__str__() - this returns just text.</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>        <span class="c1"># =&gt; if we called self.__str__(), we would get text + pixel-size-info.</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>    
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>    <span class="k">def</span> <span class="nf">adjust_length_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a><span class="sd">        Set lenght-of-scalebar to *n* and modify lenght-in-pixels accordingly.</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a><span class="sd">        Parameters</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a><span class="sd">        ----------</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a><span class="sd">        n : float</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a><span class="sd">            The new length-of-scalebar (= self.number).</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a><span class="sd">        Returns</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">        -------</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a><span class="sd">        None</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a><span class="sd">            The new lenght-of-scalebar and lenght-of-scalebar-in-pixels</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">            are saved in ScaleWithUnits.number and ScaleWithUnits.pixels</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a><span class="sd">            properties, respectively.</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">*</span> <span class="n">n</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">n</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>        
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>    <span class="k">def</span> <span class="nf">adjust_scalebar_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a><span class="sd">        Set scalebar to some reasonable lenght</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a><span class="sd">        and modify lenght-in-pixels accordingly.</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a><span class="sd">        Returns</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a><span class="sd">        -------</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a><span class="sd">        None</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a><span class="sd">            The modified (number, units, and pixels) are saved in</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a><span class="sd">            ScaleWithUnits object.</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a><span class="sd">            </span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a><span class="sd">        Examples</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a><span class="sd">        --------</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a><span class="sd">        * swu = 0.3 um =&gt; swu.adjust_scalebar_size() =&gt; 300 nm</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a><span class="sd">        * swu = 2.3 um =&gt; swu.adjust_scalebar_size() =&gt; 2 um</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a><span class="sd">        * swu = 456 um =&gt; swu.adjust_scalebar_size() =&gt; 500 um</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a><span class="sd">        * swu = 888 um =&gt; swu.adjust_scalebar_size() =&gt; 1 mm</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>        <span class="c1"># Get the number in the interval &lt;1...1000)</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>        <span class="c1"># Adjust the number to a reasonable value (1,2,3,5,10,20,30...),</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="c1"># modify the lenght-in-pixels accordingly, and change units if needed.</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>        <span class="k">if</span>   <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">750</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">350</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">500</span><span class="p">)</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">250</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">200</span><span class="p">)</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">50</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">35</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">50</span><span class="p">)</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">25</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">30</span><span class="p">)</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">15</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">20</span><span class="p">)</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">7.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">10</span><span class="p">)</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">3.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">5</span><span class="p">)</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">2.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">3</span><span class="p">)</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">1.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">2</span><span class="p">)</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>        <span class="k">else</span>                  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">1</span><span class="p">)</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>        <span class="c1"># Correct units in case we achieved the value of 1000.</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="c1"># Round number (for nicer output: 1 um instead of 1.0 um)</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>        <span class="c1"># Round pixels (for correct drawing in image = whole pixels)</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="MyImage">
                            <input id="MyImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MyImage</span>:

                <label class="view-source-button" for="MyImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage-60"><a href="#MyImage-60"><span class="linenos"> 60</span></a><span class="k">class</span> <span class="nc">MyImage</span><span class="p">:</span>
</span><span id="MyImage-61"><a href="#MyImage-61"><span class="linenos"> 61</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-62"><a href="#MyImage-62"><span class="linenos"> 62</span></a><span class="sd">    Class defining MyImage objects.    </span>
</span><span id="MyImage-63"><a href="#MyImage-63"><span class="linenos"> 63</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="MyImage-64"><a href="#MyImage-64"><span class="linenos"> 64</span></a>
</span><span id="MyImage-65"><a href="#MyImage-65"><span class="linenos"> 65</span></a>
</span><span id="MyImage-66"><a href="#MyImage-66"><span class="linenos"> 66</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="MyImage-67"><a href="#MyImage-67"><span class="linenos"> 67</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-68"><a href="#MyImage-68"><span class="linenos"> 68</span></a><span class="sd">        Initialize MyImage object.</span>
</span><span id="MyImage-69"><a href="#MyImage-69"><span class="linenos"> 69</span></a>
</span><span id="MyImage-70"><a href="#MyImage-70"><span class="linenos"> 70</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-71"><a href="#MyImage-71"><span class="linenos"> 71</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-72"><a href="#MyImage-72"><span class="linenos"> 72</span></a><span class="sd">        filename : str or path-like object</span>
</span><span id="MyImage-73"><a href="#MyImage-73"><span class="linenos"> 73</span></a><span class="sd">            Name of the image file to work with.</span>
</span><span id="MyImage-74"><a href="#MyImage-74"><span class="linenos"> 74</span></a>
</span><span id="MyImage-75"><a href="#MyImage-75"><span class="linenos"> 75</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-76"><a href="#MyImage-76"><span class="linenos"> 76</span></a><span class="sd">        -------</span>
</span><span id="MyImage-77"><a href="#MyImage-77"><span class="linenos"> 77</span></a><span class="sd">        MyImage object</span>
</span><span id="MyImage-78"><a href="#MyImage-78"><span class="linenos"> 78</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-79"><a href="#MyImage-79"><span class="linenos"> 79</span></a>        <span class="c1"># Store image name and open the image</span>
</span><span id="MyImage-80"><a href="#MyImage-80"><span class="linenos"> 80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="MyImage-81"><a href="#MyImage-81"><span class="linenos"> 81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="MyImage-82"><a href="#MyImage-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="MyImage-83"><a href="#MyImage-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_image_type</span><span class="p">()</span>
</span><span id="MyImage-84"><a href="#MyImage-84"><span class="linenos"> 84</span></a>
</span><span id="MyImage-85"><a href="#MyImage-85"><span class="linenos"> 85</span></a>        <span class="c1"># Additional (optional) properties/features/methods/objects</span>
</span><span id="MyImage-86"><a href="#MyImage-86"><span class="linenos"> 86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iLabels</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyImage-87"><a href="#MyImage-87"><span class="linenos"> 87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">FFT</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyImage-88"><a href="#MyImage-88"><span class="linenos"> 88</span></a>    
</span><span id="MyImage-89"><a href="#MyImage-89"><span class="linenos"> 89</span></a>    
</span><span id="MyImage-90"><a href="#MyImage-90"><span class="linenos"> 90</span></a>    <span class="nd">@staticmethod</span>
</span><span id="MyImage-91"><a href="#MyImage-91"><span class="linenos"> 91</span></a>    <span class="k">def</span> <span class="nf">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="MyImage-92"><a href="#MyImage-92"><span class="linenos"> 92</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-93"><a href="#MyImage-93"><span class="linenos"> 93</span></a><span class="sd">        Open image file using PIL.Image taking into account all exceptions.</span>
</span><span id="MyImage-94"><a href="#MyImage-94"><span class="linenos"> 94</span></a>
</span><span id="MyImage-95"><a href="#MyImage-95"><span class="linenos"> 95</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-96"><a href="#MyImage-96"><span class="linenos"> 96</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-97"><a href="#MyImage-97"><span class="linenos"> 97</span></a><span class="sd">        filename : str</span>
</span><span id="MyImage-98"><a href="#MyImage-98"><span class="linenos"> 98</span></a><span class="sd">            Name of the file to open.</span>
</span><span id="MyImage-99"><a href="#MyImage-99"><span class="linenos"> 99</span></a>
</span><span id="MyImage-100"><a href="#MyImage-100"><span class="linenos">100</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-101"><a href="#MyImage-101"><span class="linenos">101</span></a><span class="sd">        -------</span>
</span><span id="MyImage-102"><a href="#MyImage-102"><span class="linenos">102</span></a><span class="sd">        img : PIL image object</span>
</span><span id="MyImage-103"><a href="#MyImage-103"><span class="linenos">103</span></a><span class="sd">            The PIL image object is usually saved in MyImage object.</span>
</span><span id="MyImage-104"><a href="#MyImage-104"><span class="linenos">104</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-105"><a href="#MyImage-105"><span class="linenos">105</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="MyImage-106"><a href="#MyImage-106"><span class="linenos">106</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="MyImage-107"><a href="#MyImage-107"><span class="linenos">107</span></a>            <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage-108"><a href="#MyImage-108"><span class="linenos">108</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="MyImage-109"><a href="#MyImage-109"><span class="linenos">109</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File not found: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage-110"><a href="#MyImage-110"><span class="linenos">110</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage-111"><a href="#MyImage-111"><span class="linenos">111</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="MyImage-112"><a href="#MyImage-112"><span class="linenos">112</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error opening image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage-113"><a href="#MyImage-113"><span class="linenos">113</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="MyImage-114"><a href="#MyImage-114"><span class="linenos">114</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage-115"><a href="#MyImage-115"><span class="linenos">115</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="MyImage-116"><a href="#MyImage-116"><span class="linenos">116</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;OS error when opening: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage-117"><a href="#MyImage-117"><span class="linenos">117</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="MyImage-118"><a href="#MyImage-118"><span class="linenos">118</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage-119"><a href="#MyImage-119"><span class="linenos">119</span></a>    
</span><span id="MyImage-120"><a href="#MyImage-120"><span class="linenos">120</span></a>    
</span><span id="MyImage-121"><a href="#MyImage-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">get_font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font_name</span><span class="p">,</span> <span class="n">required_font_size_in_pixels</span><span class="p">):</span>
</span><span id="MyImage-122"><a href="#MyImage-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-123"><a href="#MyImage-123"><span class="linenos">123</span></a><span class="sd">        Get font size (in fontsize units)</span>
</span><span id="MyImage-124"><a href="#MyImage-124"><span class="linenos">124</span></a><span class="sd">        corresponding to *required_font_size_in_pixels*.</span>
</span><span id="MyImage-125"><a href="#MyImage-125"><span class="linenos">125</span></a>
</span><span id="MyImage-126"><a href="#MyImage-126"><span class="linenos">126</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-127"><a href="#MyImage-127"><span class="linenos">127</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-128"><a href="#MyImage-128"><span class="linenos">128</span></a><span class="sd">        fontname : str</span>
</span><span id="MyImage-129"><a href="#MyImage-129"><span class="linenos">129</span></a><span class="sd">            Name of the TrueType font to use.</span>
</span><span id="MyImage-130"><a href="#MyImage-130"><span class="linenos">130</span></a><span class="sd">            Example (working in Windows): font_name=&#39;timesbd.ttf&#39;</span>
</span><span id="MyImage-131"><a href="#MyImage-131"><span class="linenos">131</span></a><span class="sd">        required_font_size_in_pixels : float</span>
</span><span id="MyImage-132"><a href="#MyImage-132"><span class="linenos">132</span></a><span class="sd">            Required font size in pixels.</span>
</span><span id="MyImage-133"><a href="#MyImage-133"><span class="linenos">133</span></a>
</span><span id="MyImage-134"><a href="#MyImage-134"><span class="linenos">134</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-135"><a href="#MyImage-135"><span class="linenos">135</span></a><span class="sd">        -------</span>
</span><span id="MyImage-136"><a href="#MyImage-136"><span class="linenos">136</span></a><span class="sd">        font_size : int</span>
</span><span id="MyImage-137"><a href="#MyImage-137"><span class="linenos">137</span></a><span class="sd">            Final font size (in font units).</span>
</span><span id="MyImage-138"><a href="#MyImage-138"><span class="linenos">138</span></a><span class="sd">            If the returned *font_size* (in fontsize units)</span>
</span><span id="MyImage-139"><a href="#MyImage-139"><span class="linenos">139</span></a><span class="sd">            is applied to font with given *fontname*,</span>
</span><span id="MyImage-140"><a href="#MyImage-140"><span class="linenos">140</span></a><span class="sd">            then the height of the font (in pixels units)</span>
</span><span id="MyImage-141"><a href="#MyImage-141"><span class="linenos">141</span></a><span class="sd">            will correspond to *required_font_size_in_pixels* argument.</span>
</span><span id="MyImage-142"><a href="#MyImage-142"><span class="linenos">142</span></a><span class="sd">            </span>
</span><span id="MyImage-143"><a href="#MyImage-143"><span class="linenos">143</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-144"><a href="#MyImage-144"><span class="linenos">144</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-145"><a href="#MyImage-145"><span class="linenos">145</span></a><span class="sd">        * This function is a modified recipe from StackOverflow:</span>
</span><span id="MyImage-146"><a href="#MyImage-146"><span class="linenos">146</span></a><span class="sd">          https://stackoverflow.com/q/4902198</span>
</span><span id="MyImage-147"><a href="#MyImage-147"><span class="linenos">147</span></a><span class="sd">        * My modification may be a bit slower (not too much)</span>
</span><span id="MyImage-148"><a href="#MyImage-148"><span class="linenos">148</span></a><span class="sd">          but it seems to be clear and reliable.</span>
</span><span id="MyImage-149"><a href="#MyImage-149"><span class="linenos">149</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-150"><a href="#MyImage-150"><span class="linenos">150</span></a>        <span class="c1"># (1) Initial fontsize = required_font_size</span>
</span><span id="MyImage-151"><a href="#MyImage-151"><span class="linenos">151</span></a>        <span class="c1"># (Note: fontsize [in fontsize units]</span>
</span><span id="MyImage-152"><a href="#MyImage-152"><span class="linenos">152</span></a>        <span class="c1"># (is just APPROXIMATELY equal to required fontsize [in pixels].</span>
</span><span id="MyImage-153"><a href="#MyImage-153"><span class="linenos">153</span></a>        <span class="n">font_size</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">required_font_size_in_pixels</span><span class="p">)</span>
</span><span id="MyImage-154"><a href="#MyImage-154"><span class="linenos">154</span></a>        
</span><span id="MyImage-155"><a href="#MyImage-155"><span class="linenos">155</span></a>        <span class="c1"># (2) Initialize draw_object + font_object and calculate font height</span>
</span><span id="MyImage-156"><a href="#MyImage-156"><span class="linenos">156</span></a>        <span class="c1"># (Note1: draw_object is needed for the correct font height calculation</span>
</span><span id="MyImage-157"><a href="#MyImage-157"><span class="linenos">157</span></a>        <span class="c1"># (Note2: we calculate the font height for a model text - here: cap &#39;M&#39;</span>
</span><span id="MyImage-158"><a href="#MyImage-158"><span class="linenos">158</span></a>        <span class="n">draw_object</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage-159"><a href="#MyImage-159"><span class="linenos">159</span></a>        <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage-160"><a href="#MyImage-160"><span class="linenos">160</span></a>        <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span> 
</span><span id="MyImage-161"><a href="#MyImage-161"><span class="linenos">161</span></a>        <span class="c1"># (2a) Current font_height &gt; required_font_size_in_pixels, decrease...</span>
</span><span id="MyImage-162"><a href="#MyImage-162"><span class="linenos">162</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&gt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="MyImage-163"><a href="#MyImage-163"><span class="linenos">163</span></a>            <span class="n">font_size</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="MyImage-164"><a href="#MyImage-164"><span class="linenos">164</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage-165"><a href="#MyImage-165"><span class="linenos">165</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="MyImage-166"><a href="#MyImage-166"><span class="linenos">166</span></a>        <span class="c1"># (2b) Current font_height &gt; required_font_size_in_pixels, increase...</span>
</span><span id="MyImage-167"><a href="#MyImage-167"><span class="linenos">167</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&lt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="MyImage-168"><a href="#MyImage-168"><span class="linenos">168</span></a>            <span class="n">font_size</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="MyImage-169"><a href="#MyImage-169"><span class="linenos">169</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage-170"><a href="#MyImage-170"><span class="linenos">170</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="MyImage-171"><a href="#MyImage-171"><span class="linenos">171</span></a>        
</span><span id="MyImage-172"><a href="#MyImage-172"><span class="linenos">172</span></a>        <span class="c1"># (3) Return font size (for given font_name, in font_name units)</span>
</span><span id="MyImage-173"><a href="#MyImage-173"><span class="linenos">173</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage-174"><a href="#MyImage-174"><span class="linenos">174</span></a>    
</span><span id="MyImage-175"><a href="#MyImage-175"><span class="linenos">175</span></a>    
</span><span id="MyImage-176"><a href="#MyImage-176"><span class="linenos">176</span></a>    <span class="nd">@staticmethod</span>
</span><span id="MyImage-177"><a href="#MyImage-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">):</span>
</span><span id="MyImage-178"><a href="#MyImage-178"><span class="linenos">178</span></a>        <span class="n">bbox</span> <span class="o">=</span> <span class="n">draw_object</span><span class="o">.</span><span class="n">textbbox</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="n">font_object</span><span class="p">)</span>
</span><span id="MyImage-179"><a href="#MyImage-179"><span class="linenos">179</span></a>        <span class="n">text_height</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MyImage-180"><a href="#MyImage-180"><span class="linenos">180</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text_height</span><span class="p">)</span>
</span><span id="MyImage-181"><a href="#MyImage-181"><span class="linenos">181</span></a>    
</span><span id="MyImage-182"><a href="#MyImage-182"><span class="linenos">182</span></a>    
</span><span id="MyImage-183"><a href="#MyImage-183"><span class="linenos">183</span></a>    <span class="k">def</span> <span class="nf">_set_image_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyImage-184"><a href="#MyImage-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-185"><a href="#MyImage-185"><span class="linenos">185</span></a><span class="sd">        Set the image type.</span>
</span><span id="MyImage-186"><a href="#MyImage-186"><span class="linenos">186</span></a><span class="sd">        </span>
</span><span id="MyImage-187"><a href="#MyImage-187"><span class="linenos">187</span></a><span class="sd">        This method gets the image type</span>
</span><span id="MyImage-188"><a href="#MyImage-188"><span class="linenos">188</span></a><span class="sd">        AND converts some less common image type to more standard ones.</span>
</span><span id="MyImage-189"><a href="#MyImage-189"><span class="linenos">189</span></a>
</span><span id="MyImage-190"><a href="#MyImage-190"><span class="linenos">190</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-191"><a href="#MyImage-191"><span class="linenos">191</span></a><span class="sd">        -------</span>
</span><span id="MyImage-192"><a href="#MyImage-192"><span class="linenos">192</span></a><span class="sd">        Image type</span>
</span><span id="MyImage-193"><a href="#MyImage-193"><span class="linenos">193</span></a><span class="sd">            We use image types: &#39;binary&#39;, &#39;gray&#39;, &#39;gray16&#39;, &#39;rgb&#39;, &#39;rgba&#39;.</span>
</span><span id="MyImage-194"><a href="#MyImage-194"><span class="linenos">194</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-195"><a href="#MyImage-195"><span class="linenos">195</span></a>        <span class="c1"># Get the image type</span>
</span><span id="MyImage-196"><a href="#MyImage-196"><span class="linenos">196</span></a>        <span class="c1"># AND convert some less common image types to more standard.</span>
</span><span id="MyImage-197"><a href="#MyImage-197"><span class="linenos">197</span></a>        <span class="n">imode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span>
</span><span id="MyImage-198"><a href="#MyImage-198"><span class="linenos">198</span></a>        <span class="k">if</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
</span><span id="MyImage-199"><a href="#MyImage-199"><span class="linenos">199</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;binary&#39;</span>
</span><span id="MyImage-200"><a href="#MyImage-200"><span class="linenos">200</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="MyImage-201"><a href="#MyImage-201"><span class="linenos">201</span></a>            <span class="n">itype</span> <span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-202"><a href="#MyImage-202"><span class="linenos">202</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;P&#39;</span><span class="p">:</span>
</span><span id="MyImage-203"><a href="#MyImage-203"><span class="linenos">203</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</span><span id="MyImage-204"><a href="#MyImage-204"><span class="linenos">204</span></a>            <span class="n">itype</span> <span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-205"><a href="#MyImage-205"><span class="linenos">205</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;RGB&#39;</span><span class="p">:</span>
</span><span id="MyImage-206"><a href="#MyImage-206"><span class="linenos">206</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;rgb&#39;</span>
</span><span id="MyImage-207"><a href="#MyImage-207"><span class="linenos">207</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;RGBA&#39;</span><span class="p">:</span>
</span><span id="MyImage-208"><a href="#MyImage-208"><span class="linenos">208</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;rgba&#39;</span>
</span><span id="MyImage-209"><a href="#MyImage-209"><span class="linenos">209</span></a>        <span class="k">elif</span> <span class="n">imode</span> <span class="o">==</span> <span class="s1">&#39;I;16&#39;</span><span class="p">:</span>
</span><span id="MyImage-210"><a href="#MyImage-210"><span class="linenos">210</span></a>            <span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray16&#39;</span>
</span><span id="MyImage-211"><a href="#MyImage-211"><span class="linenos">211</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-212"><a href="#MyImage-212"><span class="linenos">212</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unsuported image type!&#39;</span><span class="p">)</span>
</span><span id="MyImage-213"><a href="#MyImage-213"><span class="linenos">213</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PIL image mode: </span><span class="si">{</span><span class="n">imode</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage-214"><a href="#MyImage-214"><span class="linenos">214</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;End of program.&#39;</span><span class="p">)</span>
</span><span id="MyImage-215"><a href="#MyImage-215"><span class="linenos">215</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage-216"><a href="#MyImage-216"><span class="linenos">216</span></a>        <span class="c1"># Return the image type</span>
</span><span id="MyImage-217"><a href="#MyImage-217"><span class="linenos">217</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">itype</span><span class="p">)</span>
</span><span id="MyImage-218"><a href="#MyImage-218"><span class="linenos">218</span></a>        
</span><span id="MyImage-219"><a href="#MyImage-219"><span class="linenos">219</span></a>            
</span><span id="MyImage-220"><a href="#MyImage-220"><span class="linenos">220</span></a>    <span class="k">def</span> <span class="nf">to_gray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;8bit&#39;</span><span class="p">):</span>
</span><span id="MyImage-221"><a href="#MyImage-221"><span class="linenos">221</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-222"><a href="#MyImage-222"><span class="linenos">222</span></a><span class="sd">        Convert image to grayscale.</span>
</span><span id="MyImage-223"><a href="#MyImage-223"><span class="linenos">223</span></a>
</span><span id="MyImage-224"><a href="#MyImage-224"><span class="linenos">224</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-225"><a href="#MyImage-225"><span class="linenos">225</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-226"><a href="#MyImage-226"><span class="linenos">226</span></a><span class="sd">        itype : str, optional, default is &#39;8bit&#39;</span>
</span><span id="MyImage-227"><a href="#MyImage-227"><span class="linenos">227</span></a><span class="sd">            The image is converted to 8bit grayscale.</span>
</span><span id="MyImage-228"><a href="#MyImage-228"><span class="linenos">228</span></a><span class="sd">            Only the standard 8bit grayscale images are supported now.</span>
</span><span id="MyImage-229"><a href="#MyImage-229"><span class="linenos">229</span></a>
</span><span id="MyImage-230"><a href="#MyImage-230"><span class="linenos">230</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-231"><a href="#MyImage-231"><span class="linenos">231</span></a><span class="sd">        -------</span>
</span><span id="MyImage-232"><a href="#MyImage-232"><span class="linenos">232</span></a><span class="sd">        None</span>
</span><span id="MyImage-233"><a href="#MyImage-233"><span class="linenos">233</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="MyImage-234"><a href="#MyImage-234"><span class="linenos">234</span></a><span class="sd">            </span>
</span><span id="MyImage-235"><a href="#MyImage-235"><span class="linenos">235</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-236"><a href="#MyImage-236"><span class="linenos">236</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-237"><a href="#MyImage-237"><span class="linenos">237</span></a><span class="sd">        * We fully support only 8-bit grayscale images;</span>
</span><span id="MyImage-238"><a href="#MyImage-238"><span class="linenos">238</span></a><span class="sd">          the same situation is in Pillow (full support only for 8-bit gray).</span>
</span><span id="MyImage-239"><a href="#MyImage-239"><span class="linenos">239</span></a><span class="sd">        * Working with 16-bit grayscale images is surprisingly tricky.</span>
</span><span id="MyImage-240"><a href="#MyImage-240"><span class="linenos">240</span></a><span class="sd">          You *can* read and work with 16-bit images,</span>
</span><span id="MyImage-241"><a href="#MyImage-241"><span class="linenos">241</span></a><span class="sd">          but before using some methods of this package</span>
</span><span id="MyImage-242"><a href="#MyImage-242"><span class="linenos">242</span></a><span class="sd">          (such as label, scalebar, montage),</span>
</span><span id="MyImage-243"><a href="#MyImage-243"><span class="linenos">243</span></a><span class="sd">          they *should* be converted to 8-bit grayscale</span>
</span><span id="MyImage-244"><a href="#MyImage-244"><span class="linenos">244</span></a><span class="sd">          in order to avoid errors or strange results.</span>
</span><span id="MyImage-245"><a href="#MyImage-245"><span class="linenos">245</span></a><span class="sd">        * This method can convert</span>
</span><span id="MyImage-246"><a href="#MyImage-246"><span class="linenos">246</span></a><span class="sd">          the standard 16-bit grayscale to the 8-bit grayscale,</span>
</span><span id="MyImage-247"><a href="#MyImage-247"><span class="linenos">247</span></a><span class="sd">          but it does not support other, less common grayscale formats.</span>
</span><span id="MyImage-248"><a href="#MyImage-248"><span class="linenos">248</span></a><span class="sd">        * The less common grayscale formats can be normalized and converted</span>
</span><span id="MyImage-249"><a href="#MyImage-249"><span class="linenos">249</span></a><span class="sd">          to 8-bit grayscale manually, in an analogous way as in this method.</span>
</span><span id="MyImage-250"><a href="#MyImage-250"><span class="linenos">250</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-251"><a href="#MyImage-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;8bit&#39;</span><span class="p">:</span>
</span><span id="MyImage-252"><a href="#MyImage-252"><span class="linenos">252</span></a>            <span class="c1"># Conversion to 8-bit grayscale</span>
</span><span id="MyImage-253"><a href="#MyImage-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,</span><span class="s1">&#39;RGBA&#39;</span><span class="p">):</span>
</span><span id="MyImage-254"><a href="#MyImage-254"><span class="linenos">254</span></a>                <span class="c1"># Conversion of RGB and RGBA images should be fine.</span>
</span><span id="MyImage-255"><a href="#MyImage-255"><span class="linenos">255</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</span><span id="MyImage-256"><a href="#MyImage-256"><span class="linenos">256</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-257"><a href="#MyImage-257"><span class="linenos">257</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="MyImage-258"><a href="#MyImage-258"><span class="linenos">258</span></a>                <span class="c1"># The image is 8-bit grayscale - just reset itype=&#39;gray&#39;.</span>
</span><span id="MyImage-259"><a href="#MyImage-259"><span class="linenos">259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-260"><a href="#MyImage-260"><span class="linenos">260</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;I;16&#39;</span><span class="p">:</span>
</span><span id="MyImage-261"><a href="#MyImage-261"><span class="linenos">261</span></a>                <span class="c1"># Conversion of 16-bit grayscale to 8-bit grayscale</span>
</span><span id="MyImage-262"><a href="#MyImage-262"><span class="linenos">262</span></a>                <span class="c1"># (requires special treatment, not supported by Pillow.</span>
</span><span id="MyImage-263"><a href="#MyImage-263"><span class="linenos">263</span></a>                <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage-264"><a href="#MyImage-264"><span class="linenos">264</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">arr</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">*</span> <span class="mi">255</span>
</span><span id="MyImage-265"><a href="#MyImage-265"><span class="linenos">265</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="n">normalized</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyImage-266"><a href="#MyImage-266"><span class="linenos">266</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">normalized</span><span class="p">)</span>
</span><span id="MyImage-267"><a href="#MyImage-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-268"><a href="#MyImage-268"><span class="linenos">268</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-269"><a href="#MyImage-269"><span class="linenos">269</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - unsupported image type!&#39;</span><span class="p">)</span>
</span><span id="MyImage-270"><a href="#MyImage-270"><span class="linenos">270</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-271"><a href="#MyImage-271"><span class="linenos">271</span></a>            <span class="c1"># Conversion to non-8bit grayscale formats not supported now.</span>
</span><span id="MyImage-272"><a href="#MyImage-272"><span class="linenos">272</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - only 8-bit grayscale supported!&#39;</span><span class="p">)</span>
</span><span id="MyImage-273"><a href="#MyImage-273"><span class="linenos">273</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="MyImage-274"><a href="#MyImage-274"><span class="linenos">274</span></a>            
</span><span id="MyImage-275"><a href="#MyImage-275"><span class="linenos">275</span></a>    
</span><span id="MyImage-276"><a href="#MyImage-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">to_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;24bit&#39;</span><span class="p">):</span>
</span><span id="MyImage-277"><a href="#MyImage-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-278"><a href="#MyImage-278"><span class="linenos">278</span></a><span class="sd">        Convert image to RGB.</span>
</span><span id="MyImage-279"><a href="#MyImage-279"><span class="linenos">279</span></a>
</span><span id="MyImage-280"><a href="#MyImage-280"><span class="linenos">280</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-281"><a href="#MyImage-281"><span class="linenos">281</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-282"><a href="#MyImage-282"><span class="linenos">282</span></a><span class="sd">        itype : str, optional, default is &#39;24bit&#39;</span>
</span><span id="MyImage-283"><a href="#MyImage-283"><span class="linenos">283</span></a><span class="sd">            The image is converted to standard RGB image = 24bit = 3*8bit.</span>
</span><span id="MyImage-284"><a href="#MyImage-284"><span class="linenos">284</span></a><span class="sd">            Only the standard 24bit RGB images are supported at the moment.</span>
</span><span id="MyImage-285"><a href="#MyImage-285"><span class="linenos">285</span></a>
</span><span id="MyImage-286"><a href="#MyImage-286"><span class="linenos">286</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-287"><a href="#MyImage-287"><span class="linenos">287</span></a><span class="sd">        -------</span>
</span><span id="MyImage-288"><a href="#MyImage-288"><span class="linenos">288</span></a><span class="sd">        None</span>
</span><span id="MyImage-289"><a href="#MyImage-289"><span class="linenos">289</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="MyImage-290"><a href="#MyImage-290"><span class="linenos">290</span></a><span class="sd">            </span>
</span><span id="MyImage-291"><a href="#MyImage-291"><span class="linenos">291</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-292"><a href="#MyImage-292"><span class="linenos">292</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-293"><a href="#MyImage-293"><span class="linenos">293</span></a><span class="sd">        * Standard RGB format = 24bit RGB = 8 bits for each of (R,G,B) values.</span>
</span><span id="MyImage-294"><a href="#MyImage-294"><span class="linenos">294</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="MyImage-295"><a href="#MyImage-295"><span class="linenos">295</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="MyImage-296"><a href="#MyImage-296"><span class="linenos">296</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="MyImage-297"><a href="#MyImage-297"><span class="linenos">297</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-298"><a href="#MyImage-298"><span class="linenos">298</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;24bit&#39;</span><span class="p">:</span>
</span><span id="MyImage-299"><a href="#MyImage-299"><span class="linenos">299</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="MyImage-300"><a href="#MyImage-300"><span class="linenos">300</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
</span><span id="MyImage-301"><a href="#MyImage-301"><span class="linenos">301</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-302"><a href="#MyImage-302"><span class="linenos">302</span></a>            <span class="c1"># Conversion to non-standard RGB formats not supported.</span>
</span><span id="MyImage-303"><a href="#MyImage-303"><span class="linenos">303</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Only standard 24-bit RGB images are supported.&#39;</span><span class="p">)</span>
</span><span id="MyImage-304"><a href="#MyImage-304"><span class="linenos">304</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="MyImage-305"><a href="#MyImage-305"><span class="linenos">305</span></a>
</span><span id="MyImage-306"><a href="#MyImage-306"><span class="linenos">306</span></a>
</span><span id="MyImage-307"><a href="#MyImage-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">to_rgba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;32bit&#39;</span><span class="p">):</span>
</span><span id="MyImage-308"><a href="#MyImage-308"><span class="linenos">308</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-309"><a href="#MyImage-309"><span class="linenos">309</span></a><span class="sd">        Convert image to RGBA.</span>
</span><span id="MyImage-310"><a href="#MyImage-310"><span class="linenos">310</span></a>
</span><span id="MyImage-311"><a href="#MyImage-311"><span class="linenos">311</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-312"><a href="#MyImage-312"><span class="linenos">312</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-313"><a href="#MyImage-313"><span class="linenos">313</span></a><span class="sd">        itype : str, optional, default is &#39;32bit&#39;</span>
</span><span id="MyImage-314"><a href="#MyImage-314"><span class="linenos">314</span></a><span class="sd">            The image is converted to standard RGBA image = 32bit = 3*8+8bit.</span>
</span><span id="MyImage-315"><a href="#MyImage-315"><span class="linenos">315</span></a><span class="sd">            Only the standard 32bit RGBA images are supported at the moment.</span>
</span><span id="MyImage-316"><a href="#MyImage-316"><span class="linenos">316</span></a>
</span><span id="MyImage-317"><a href="#MyImage-317"><span class="linenos">317</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-318"><a href="#MyImage-318"><span class="linenos">318</span></a><span class="sd">        -------</span>
</span><span id="MyImage-319"><a href="#MyImage-319"><span class="linenos">319</span></a><span class="sd">        None</span>
</span><span id="MyImage-320"><a href="#MyImage-320"><span class="linenos">320</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="MyImage-321"><a href="#MyImage-321"><span class="linenos">321</span></a><span class="sd">            </span>
</span><span id="MyImage-322"><a href="#MyImage-322"><span class="linenos">322</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-323"><a href="#MyImage-323"><span class="linenos">323</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-324"><a href="#MyImage-324"><span class="linenos">324</span></a><span class="sd">        * Standard RGBA format = 32bit RGBA = 8bits (R,G,B) + 8bit alpha.</span>
</span><span id="MyImage-325"><a href="#MyImage-325"><span class="linenos">325</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="MyImage-326"><a href="#MyImage-326"><span class="linenos">326</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="MyImage-327"><a href="#MyImage-327"><span class="linenos">327</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="MyImage-328"><a href="#MyImage-328"><span class="linenos">328</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-329"><a href="#MyImage-329"><span class="linenos">329</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;32bit&#39;</span><span class="p">:</span>
</span><span id="MyImage-330"><a href="#MyImage-330"><span class="linenos">330</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="MyImage-331"><a href="#MyImage-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">)</span>
</span><span id="MyImage-332"><a href="#MyImage-332"><span class="linenos">332</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-333"><a href="#MyImage-333"><span class="linenos">333</span></a>            <span class="c1"># Conversion to non-standard RGBA formats not supported.</span>
</span><span id="MyImage-334"><a href="#MyImage-334"><span class="linenos">334</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown image type when converting to RGBA!&#39;</span><span class="p">)</span>
</span><span id="MyImage-335"><a href="#MyImage-335"><span class="linenos">335</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span><span id="MyImage-336"><a href="#MyImage-336"><span class="linenos">336</span></a>
</span><span id="MyImage-337"><a href="#MyImage-337"><span class="linenos">337</span></a>
</span><span id="MyImage-338"><a href="#MyImage-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height_of_bar</span><span class="p">):</span>
</span><span id="MyImage-339"><a href="#MyImage-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-340"><a href="#MyImage-340"><span class="linenos">340</span></a><span class="sd">        Cut off lower bar with given height.</span>
</span><span id="MyImage-341"><a href="#MyImage-341"><span class="linenos">341</span></a>
</span><span id="MyImage-342"><a href="#MyImage-342"><span class="linenos">342</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-343"><a href="#MyImage-343"><span class="linenos">343</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-344"><a href="#MyImage-344"><span class="linenos">344</span></a><span class="sd">        height_of_bar : int</span>
</span><span id="MyImage-345"><a href="#MyImage-345"><span class="linenos">345</span></a><span class="sd">            Height of the lower bar to cut.</span>
</span><span id="MyImage-346"><a href="#MyImage-346"><span class="linenos">346</span></a><span class="sd">            Lower bars are typical of many microscopic images.</span>
</span><span id="MyImage-347"><a href="#MyImage-347"><span class="linenos">347</span></a><span class="sd">            A lower bar contains information from given microscope,</span>
</span><span id="MyImage-348"><a href="#MyImage-348"><span class="linenos">348</span></a><span class="sd">            but it is usually removed when preparing the image for publication.</span>
</span><span id="MyImage-349"><a href="#MyImage-349"><span class="linenos">349</span></a>
</span><span id="MyImage-350"><a href="#MyImage-350"><span class="linenos">350</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-351"><a href="#MyImage-351"><span class="linenos">351</span></a><span class="sd">        -------</span>
</span><span id="MyImage-352"><a href="#MyImage-352"><span class="linenos">352</span></a><span class="sd">        None</span>
</span><span id="MyImage-353"><a href="#MyImage-353"><span class="linenos">353</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="MyImage-354"><a href="#MyImage-354"><span class="linenos">354</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-355"><a href="#MyImage-355"><span class="linenos">355</span></a>        <span class="c1"># Cut off lower bar</span>
</span><span id="MyImage-356"><a href="#MyImage-356"><span class="linenos">356</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="MyImage-357"><a href="#MyImage-357"><span class="linenos">357</span></a>            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">height_of_bar</span><span class="p">))</span>
</span><span id="MyImage-358"><a href="#MyImage-358"><span class="linenos">358</span></a>        <span class="c1"># Update image size</span>
</span><span id="MyImage-359"><a href="#MyImage-359"><span class="linenos">359</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="MyImage-360"><a href="#MyImage-360"><span class="linenos">360</span></a>    
</span><span id="MyImage-361"><a href="#MyImage-361"><span class="linenos">361</span></a>    
</span><span id="MyImage-362"><a href="#MyImage-362"><span class="linenos">362</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">):</span>
</span><span id="MyImage-363"><a href="#MyImage-363"><span class="linenos">363</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-364"><a href="#MyImage-364"><span class="linenos">364</span></a><span class="sd">        Crop image = keep just selected rectangular area.</span>
</span><span id="MyImage-365"><a href="#MyImage-365"><span class="linenos">365</span></a>
</span><span id="MyImage-366"><a href="#MyImage-366"><span class="linenos">366</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-367"><a href="#MyImage-367"><span class="linenos">367</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-368"><a href="#MyImage-368"><span class="linenos">368</span></a><span class="sd">        rectangle : tuple of four integers</span>
</span><span id="MyImage-369"><a href="#MyImage-369"><span class="linenos">369</span></a><span class="sd">            Tuple (X1,Y1,X2,Y2),</span>
</span><span id="MyImage-370"><a href="#MyImage-370"><span class="linenos">370</span></a><span class="sd">            where X1,Y1 = coordinates of upper left corner</span>
</span><span id="MyImage-371"><a href="#MyImage-371"><span class="linenos">371</span></a><span class="sd">            and X2,Y2 = coordinates of lower right corner.</span>
</span><span id="MyImage-372"><a href="#MyImage-372"><span class="linenos">372</span></a>
</span><span id="MyImage-373"><a href="#MyImage-373"><span class="linenos">373</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-374"><a href="#MyImage-374"><span class="linenos">374</span></a><span class="sd">        -------</span>
</span><span id="MyImage-375"><a href="#MyImage-375"><span class="linenos">375</span></a><span class="sd">        None</span>
</span><span id="MyImage-376"><a href="#MyImage-376"><span class="linenos">376</span></a><span class="sd">            The output is saved in *self.img*.</span>
</span><span id="MyImage-377"><a href="#MyImage-377"><span class="linenos">377</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-378"><a href="#MyImage-378"><span class="linenos">378</span></a>        <span class="c1"># Crop image</span>
</span><span id="MyImage-379"><a href="#MyImage-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">rectangle</span><span class="p">)</span>
</span><span id="MyImage-380"><a href="#MyImage-380"><span class="linenos">380</span></a>        <span class="c1"># Update image size</span>
</span><span id="MyImage-381"><a href="#MyImage-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="MyImage-382"><a href="#MyImage-382"><span class="linenos">382</span></a>    
</span><span id="MyImage-383"><a href="#MyImage-383"><span class="linenos">383</span></a>    
</span><span id="MyImage-384"><a href="#MyImage-384"><span class="linenos">384</span></a>    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="MyImage-385"><a href="#MyImage-385"><span class="linenos">385</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-386"><a href="#MyImage-386"><span class="linenos">386</span></a><span class="sd">        Resize image to new width or height, keeping the aspect ratio.</span>
</span><span id="MyImage-387"><a href="#MyImage-387"><span class="linenos">387</span></a><span class="sd">    </span>
</span><span id="MyImage-388"><a href="#MyImage-388"><span class="linenos">388</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-389"><a href="#MyImage-389"><span class="linenos">389</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-390"><a href="#MyImage-390"><span class="linenos">390</span></a><span class="sd">        width : int, optional, default is None</span>
</span><span id="MyImage-391"><a href="#MyImage-391"><span class="linenos">391</span></a><span class="sd">            The required width of the resized image.</span>
</span><span id="MyImage-392"><a href="#MyImage-392"><span class="linenos">392</span></a><span class="sd">            The height will be calculated</span>
</span><span id="MyImage-393"><a href="#MyImage-393"><span class="linenos">393</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="MyImage-394"><a href="#MyImage-394"><span class="linenos">394</span></a><span class="sd">        height : int, optional, default is None</span>
</span><span id="MyImage-395"><a href="#MyImage-395"><span class="linenos">395</span></a><span class="sd">            The required height of the resized image.</span>
</span><span id="MyImage-396"><a href="#MyImage-396"><span class="linenos">396</span></a><span class="sd">            The width will be calculated</span>
</span><span id="MyImage-397"><a href="#MyImage-397"><span class="linenos">397</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="MyImage-398"><a href="#MyImage-398"><span class="linenos">398</span></a><span class="sd">        resample : int or None</span>
</span><span id="MyImage-399"><a href="#MyImage-399"><span class="linenos">399</span></a><span class="sd">            If None, default resampling filter is used (usually Ok).</span>
</span><span id="MyImage-400"><a href="#MyImage-400"><span class="linenos">400</span></a><span class="sd">            It is also possible to define a specific resampling filter.</span>
</span><span id="MyImage-401"><a href="#MyImage-401"><span class="linenos">401</span></a><span class="sd">            For sharp images or plots we may prefer no resampling and </span>
</span><span id="MyImage-402"><a href="#MyImage-402"><span class="linenos">402</span></a><span class="sd">            we can use *resampling = 0 = Image.Resampling.NEAREST*.</span>
</span><span id="MyImage-403"><a href="#MyImage-403"><span class="linenos">403</span></a><span class="sd">            More: https://pillow.readthedocs.io -&gt; Reference -&gt; Image -&gt; resize</span>
</span><span id="MyImage-404"><a href="#MyImage-404"><span class="linenos">404</span></a><span class="sd">            </span>
</span><span id="MyImage-405"><a href="#MyImage-405"><span class="linenos">405</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-406"><a href="#MyImage-406"><span class="linenos">406</span></a><span class="sd">        -------</span>
</span><span id="MyImage-407"><a href="#MyImage-407"><span class="linenos">407</span></a><span class="sd">        None</span>
</span><span id="MyImage-408"><a href="#MyImage-408"><span class="linenos">408</span></a><span class="sd">            The output is saved in *self.img*</span>
</span><span id="MyImage-409"><a href="#MyImage-409"><span class="linenos">409</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-410"><a href="#MyImage-410"><span class="linenos">410</span></a>        <span class="c1"># (0) Calculate AR = aspect_ratio</span>
</span><span id="MyImage-411"><a href="#MyImage-411"><span class="linenos">411</span></a>        <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
</span><span id="MyImage-412"><a href="#MyImage-412"><span class="linenos">412</span></a>        
</span><span id="MyImage-413"><a href="#MyImage-413"><span class="linenos">413</span></a>        <span class="c1"># (1) Calculate new dimensions while keeping aspect_ratio</span>
</span><span id="MyImage-414"><a href="#MyImage-414"><span class="linenos">414</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>     <span class="c1"># New dimensions if the width is given</span>
</span><span id="MyImage-415"><a href="#MyImage-415"><span class="linenos">415</span></a>            <span class="n">new_width</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
</span><span id="MyImage-416"><a href="#MyImage-416"><span class="linenos">416</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="MyImage-417"><a href="#MyImage-417"><span class="linenos">417</span></a>        <span class="k">elif</span> <span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># New dimensions if the height is given</span>
</span><span id="MyImage-418"><a href="#MyImage-418"><span class="linenos">418</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
</span><span id="MyImage-419"><a href="#MyImage-419"><span class="linenos">419</span></a>            <span class="n">new_width</span>  <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="MyImage-420"><a href="#MyImage-420"><span class="linenos">420</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-421"><a href="#MyImage-421"><span class="linenos">421</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Image resize: width or height was not given - no action!&#39;</span><span class="p">)</span>
</span><span id="MyImage-422"><a href="#MyImage-422"><span class="linenos">422</span></a>            <span class="k">return</span>
</span><span id="MyImage-423"><a href="#MyImage-423"><span class="linenos">423</span></a>        
</span><span id="MyImage-424"><a href="#MyImage-424"><span class="linenos">424</span></a>        <span class="c1"># (2) Update image dimensions</span>
</span><span id="MyImage-425"><a href="#MyImage-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="n">new_width</span>
</span><span id="MyImage-426"><a href="#MyImage-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">new_height</span> 
</span><span id="MyImage-427"><a href="#MyImage-427"><span class="linenos">427</span></a>        
</span><span id="MyImage-428"><a href="#MyImage-428"><span class="linenos">428</span></a>        <span class="c1"># (2) Resize the image</span>
</span><span id="MyImage-429"><a href="#MyImage-429"><span class="linenos">429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
</span><span id="MyImage-430"><a href="#MyImage-430"><span class="linenos">430</span></a>            <span class="p">(</span><span class="n">new_width</span><span class="p">,</span> <span class="n">new_height</span><span class="p">),</span> <span class="n">resample</span><span class="o">=</span><span class="n">resample</span><span class="p">)</span>
</span><span id="MyImage-431"><a href="#MyImage-431"><span class="linenos">431</span></a>
</span><span id="MyImage-432"><a href="#MyImage-432"><span class="linenos">432</span></a>    
</span><span id="MyImage-433"><a href="#MyImage-433"><span class="linenos">433</span></a>    <span class="k">def</span> <span class="nf">autocontrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage-434"><a href="#MyImage-434"><span class="linenos">434</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-435"><a href="#MyImage-435"><span class="linenos">435</span></a><span class="sd">        Enhance image contrast (using PIL.ImageOps.autocontrast function).</span>
</span><span id="MyImage-436"><a href="#MyImage-436"><span class="linenos">436</span></a>
</span><span id="MyImage-437"><a href="#MyImage-437"><span class="linenos">437</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-438"><a href="#MyImage-438"><span class="linenos">438</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-439"><a href="#MyImage-439"><span class="linenos">439</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="MyImage-440"><a href="#MyImage-440"><span class="linenos">440</span></a><span class="sd">            Any arguments of PIL.ImageOps.autocontrast function.</span>
</span><span id="MyImage-441"><a href="#MyImage-441"><span class="linenos">441</span></a>
</span><span id="MyImage-442"><a href="#MyImage-442"><span class="linenos">442</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-443"><a href="#MyImage-443"><span class="linenos">443</span></a><span class="sd">        -------</span>
</span><span id="MyImage-444"><a href="#MyImage-444"><span class="linenos">444</span></a><span class="sd">        None</span>
</span><span id="MyImage-445"><a href="#MyImage-445"><span class="linenos">445</span></a><span class="sd">            The modified image is saved in self.img object.</span>
</span><span id="MyImage-446"><a href="#MyImage-446"><span class="linenos">446</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-447"><a href="#MyImage-447"><span class="linenos">447</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">autocontrast</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="MyImage-448"><a href="#MyImage-448"><span class="linenos">448</span></a>        
</span><span id="MyImage-449"><a href="#MyImage-449"><span class="linenos">449</span></a>        
</span><span id="MyImage-450"><a href="#MyImage-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage-451"><a href="#MyImage-451"><span class="linenos">451</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-452"><a href="#MyImage-452"><span class="linenos">452</span></a><span class="sd">        Insert a one-letter label in the upper left corner of an image. </span>
</span><span id="MyImage-453"><a href="#MyImage-453"><span class="linenos">453</span></a>
</span><span id="MyImage-454"><a href="#MyImage-454"><span class="linenos">454</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-455"><a href="#MyImage-455"><span class="linenos">455</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-456"><a href="#MyImage-456"><span class="linenos">456</span></a><span class="sd">        label : str</span>
</span><span id="MyImage-457"><a href="#MyImage-457"><span class="linenos">457</span></a><span class="sd">            One letter label that will be inserted in the upper left corner.</span>
</span><span id="MyImage-458"><a href="#MyImage-458"><span class="linenos">458</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="MyImage-459"><a href="#MyImage-459"><span class="linenos">459</span></a><span class="sd">            Multiplication coefficient/factor that changes the label size.</span>
</span><span id="MyImage-460"><a href="#MyImage-460"><span class="linenos">460</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="MyImage-461"><a href="#MyImage-461"><span class="linenos">461</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage-462"><a href="#MyImage-462"><span class="linenos">462</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage-463"><a href="#MyImage-463"><span class="linenos">463</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="MyImage-464"><a href="#MyImage-464"><span class="linenos">464</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="MyImage-465"><a href="#MyImage-465"><span class="linenos">465</span></a><span class="sd">            </span>
</span><span id="MyImage-466"><a href="#MyImage-466"><span class="linenos">466</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-467"><a href="#MyImage-467"><span class="linenos">467</span></a><span class="sd">        -------</span>
</span><span id="MyImage-468"><a href="#MyImage-468"><span class="linenos">468</span></a><span class="sd">        None</span>
</span><span id="MyImage-469"><a href="#MyImage-469"><span class="linenos">469</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="MyImage-470"><a href="#MyImage-470"><span class="linenos">470</span></a>
</span><span id="MyImage-471"><a href="#MyImage-471"><span class="linenos">471</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage-472"><a href="#MyImage-472"><span class="linenos">472</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage-473"><a href="#MyImage-473"><span class="linenos">473</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage-474"><a href="#MyImage-474"><span class="linenos">474</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="MyImage-475"><a href="#MyImage-475"><span class="linenos">475</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage-476"><a href="#MyImage-476"><span class="linenos">476</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage-477"><a href="#MyImage-477"><span class="linenos">477</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage-478"><a href="#MyImage-478"><span class="linenos">478</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="MyImage-479"><a href="#MyImage-479"><span class="linenos">479</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage-480"><a href="#MyImage-480"><span class="linenos">480</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage-481"><a href="#MyImage-481"><span class="linenos">481</span></a>
</span><span id="MyImage-482"><a href="#MyImage-482"><span class="linenos">482</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-483"><a href="#MyImage-483"><span class="linenos">483</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-484"><a href="#MyImage-484"><span class="linenos">484</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage-485"><a href="#MyImage-485"><span class="linenos">485</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage-486"><a href="#MyImage-486"><span class="linenos">486</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage-487"><a href="#MyImage-487"><span class="linenos">487</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage-488"><a href="#MyImage-488"><span class="linenos">488</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage-489"><a href="#MyImage-489"><span class="linenos">489</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="MyImage-490"><a href="#MyImage-490"><span class="linenos">490</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage-491"><a href="#MyImage-491"><span class="linenos">491</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="MyImage-492"><a href="#MyImage-492"><span class="linenos">492</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage-493"><a href="#MyImage-493"><span class="linenos">493</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage-494"><a href="#MyImage-494"><span class="linenos">494</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage-495"><a href="#MyImage-495"><span class="linenos">495</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-496"><a href="#MyImage-496"><span class="linenos">496</span></a>        
</span><span id="MyImage-497"><a href="#MyImage-497"><span class="linenos">497</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage-498"><a href="#MyImage-498"><span class="linenos">498</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage-499"><a href="#MyImage-499"><span class="linenos">499</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage-500"><a href="#MyImage-500"><span class="linenos">500</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">label</span> <span class="k">as</span> <span class="n">my_label</span>
</span><span id="MyImage-501"><a href="#MyImage-501"><span class="linenos">501</span></a>        <span class="n">my_label</span><span class="o">.</span><span class="n">insert_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="MyImage-502"><a href="#MyImage-502"><span class="linenos">502</span></a>
</span><span id="MyImage-503"><a href="#MyImage-503"><span class="linenos">503</span></a>         
</span><span id="MyImage-504"><a href="#MyImage-504"><span class="linenos">504</span></a>    <span class="k">def</span> <span class="nf">caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage-505"><a href="#MyImage-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-506"><a href="#MyImage-506"><span class="linenos">506</span></a><span class="sd">        Insert a one-line textual description at the bottom of an image. </span>
</span><span id="MyImage-507"><a href="#MyImage-507"><span class="linenos">507</span></a>
</span><span id="MyImage-508"><a href="#MyImage-508"><span class="linenos">508</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-509"><a href="#MyImage-509"><span class="linenos">509</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-510"><a href="#MyImage-510"><span class="linenos">510</span></a><span class="sd">        text : str</span>
</span><span id="MyImage-511"><a href="#MyImage-511"><span class="linenos">511</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="MyImage-512"><a href="#MyImage-512"><span class="linenos">512</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="MyImage-513"><a href="#MyImage-513"><span class="linenos">513</span></a><span class="sd">            Multiplication coefficient/factor that changes the text size.</span>
</span><span id="MyImage-514"><a href="#MyImage-514"><span class="linenos">514</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="MyImage-515"><a href="#MyImage-515"><span class="linenos">515</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage-516"><a href="#MyImage-516"><span class="linenos">516</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage-517"><a href="#MyImage-517"><span class="linenos">517</span></a><span class="sd">            color, bcolor, messages.</span>
</span><span id="MyImage-518"><a href="#MyImage-518"><span class="linenos">518</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="MyImage-519"><a href="#MyImage-519"><span class="linenos">519</span></a><span class="sd">            </span>
</span><span id="MyImage-520"><a href="#MyImage-520"><span class="linenos">520</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-521"><a href="#MyImage-521"><span class="linenos">521</span></a><span class="sd">        -------</span>
</span><span id="MyImage-522"><a href="#MyImage-522"><span class="linenos">522</span></a><span class="sd">        None</span>
</span><span id="MyImage-523"><a href="#MyImage-523"><span class="linenos">523</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="MyImage-524"><a href="#MyImage-524"><span class="linenos">524</span></a>
</span><span id="MyImage-525"><a href="#MyImage-525"><span class="linenos">525</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage-526"><a href="#MyImage-526"><span class="linenos">526</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage-527"><a href="#MyImage-527"><span class="linenos">527</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage-528"><a href="#MyImage-528"><span class="linenos">528</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="MyImage-529"><a href="#MyImage-529"><span class="linenos">529</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage-530"><a href="#MyImage-530"><span class="linenos">530</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage-531"><a href="#MyImage-531"><span class="linenos">531</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage-532"><a href="#MyImage-532"><span class="linenos">532</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="MyImage-533"><a href="#MyImage-533"><span class="linenos">533</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage-534"><a href="#MyImage-534"><span class="linenos">534</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage-535"><a href="#MyImage-535"><span class="linenos">535</span></a><span class="sd">        * align : int or str</span>
</span><span id="MyImage-536"><a href="#MyImage-536"><span class="linenos">536</span></a><span class="sd">            This parameter determines the alignment of the figure caption.</span>
</span><span id="MyImage-537"><a href="#MyImage-537"><span class="linenos">537</span></a><span class="sd">            If align = integer,</span>
</span><span id="MyImage-538"><a href="#MyImage-538"><span class="linenos">538</span></a><span class="sd">            x_position of the caption is {align} pixels from left.</span>
</span><span id="MyImage-539"><a href="#MyImage-539"><span class="linenos">539</span></a><span class="sd">            If align = string,</span>
</span><span id="MyImage-540"><a href="#MyImage-540"><span class="linenos">540</span></a><span class="sd">            it can be either &#39;left&#39; or &#39;Left&#39; or &#39;&#39;</span>
</span><span id="MyImage-541"><a href="#MyImage-541"><span class="linenos">541</span></a>
</span><span id="MyImage-542"><a href="#MyImage-542"><span class="linenos">542</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-543"><a href="#MyImage-543"><span class="linenos">543</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-544"><a href="#MyImage-544"><span class="linenos">544</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage-545"><a href="#MyImage-545"><span class="linenos">545</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage-546"><a href="#MyImage-546"><span class="linenos">546</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage-547"><a href="#MyImage-547"><span class="linenos">547</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage-548"><a href="#MyImage-548"><span class="linenos">548</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage-549"><a href="#MyImage-549"><span class="linenos">549</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="MyImage-550"><a href="#MyImage-550"><span class="linenos">550</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage-551"><a href="#MyImage-551"><span class="linenos">551</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="MyImage-552"><a href="#MyImage-552"><span class="linenos">552</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage-553"><a href="#MyImage-553"><span class="linenos">553</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage-554"><a href="#MyImage-554"><span class="linenos">554</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage-555"><a href="#MyImage-555"><span class="linenos">555</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-556"><a href="#MyImage-556"><span class="linenos">556</span></a>        
</span><span id="MyImage-557"><a href="#MyImage-557"><span class="linenos">557</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage-558"><a href="#MyImage-558"><span class="linenos">558</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage-559"><a href="#MyImage-559"><span class="linenos">559</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage-560"><a href="#MyImage-560"><span class="linenos">560</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">caption</span> <span class="k">as</span> <span class="n">my_caption</span>
</span><span id="MyImage-561"><a href="#MyImage-561"><span class="linenos">561</span></a>        <span class="n">my_caption</span><span class="o">.</span><span class="n">insert_caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="MyImage-562"><a href="#MyImage-562"><span class="linenos">562</span></a>    
</span><span id="MyImage-563"><a href="#MyImage-563"><span class="linenos">563</span></a>
</span><span id="MyImage-564"><a href="#MyImage-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">border</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
</span><span id="MyImage-565"><a href="#MyImage-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-566"><a href="#MyImage-566"><span class="linenos">566</span></a><span class="sd">        Draw a border around an image. </span>
</span><span id="MyImage-567"><a href="#MyImage-567"><span class="linenos">567</span></a>
</span><span id="MyImage-568"><a href="#MyImage-568"><span class="linenos">568</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-569"><a href="#MyImage-569"><span class="linenos">569</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-570"><a href="#MyImage-570"><span class="linenos">570</span></a><span class="sd">        border : int or tuple, optional, default is 1</span>
</span><span id="MyImage-571"><a href="#MyImage-571"><span class="linenos">571</span></a><span class="sd">            Int = the same thickness of border around all four edges.</span>
</span><span id="MyImage-572"><a href="#MyImage-572"><span class="linenos">572</span></a><span class="sd">            Tuple of 2 ints = (left/righ and top/bottom) border sizes.</span>
</span><span id="MyImage-573"><a href="#MyImage-573"><span class="linenos">573</span></a><span class="sd">            Tuple of 4 ints = (left, top, right, bottom) border sizes. </span>
</span><span id="MyImage-574"><a href="#MyImage-574"><span class="linenos">574</span></a><span class="sd">        color : PIL color specification, default is &#39;black&#39;</span>
</span><span id="MyImage-575"><a href="#MyImage-575"><span class="linenos">575</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="MyImage-576"><a href="#MyImage-576"><span class="linenos">576</span></a><span class="sd">        &#39;&#39;&#39;</span>        
</span><span id="MyImage-577"><a href="#MyImage-577"><span class="linenos">577</span></a>        <span class="c1"># (0) In the future, we may add border with shadow</span>
</span><span id="MyImage-578"><a href="#MyImage-578"><span class="linenos">578</span></a>        <span class="c1"># Now we add just simple border using PIL.ImageOps.expand.</span>
</span><span id="MyImage-579"><a href="#MyImage-579"><span class="linenos">579</span></a>        
</span><span id="MyImage-580"><a href="#MyImage-580"><span class="linenos">580</span></a>        <span class="c1"># (1) Add border</span>
</span><span id="MyImage-581"><a href="#MyImage-581"><span class="linenos">581</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">border</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="MyImage-582"><a href="#MyImage-582"><span class="linenos">582</span></a>        
</span><span id="MyImage-583"><a href="#MyImage-583"><span class="linenos">583</span></a>        <span class="c1"># (2) Update MyImage properties = width and height</span>
</span><span id="MyImage-584"><a href="#MyImage-584"><span class="linenos">584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MyImage-585"><a href="#MyImage-585"><span class="linenos">585</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MyImage-586"><a href="#MyImage-586"><span class="linenos">586</span></a>
</span><span id="MyImage-587"><a href="#MyImage-587"><span class="linenos">587</span></a>         
</span><span id="MyImage-588"><a href="#MyImage-588"><span class="linenos">588</span></a>    <span class="k">def</span> <span class="nf">scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage-589"><a href="#MyImage-589"><span class="linenos">589</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-590"><a href="#MyImage-590"><span class="linenos">590</span></a><span class="sd">        Insert a scalebar in the lower right corner of the image.</span>
</span><span id="MyImage-591"><a href="#MyImage-591"><span class="linenos">591</span></a>
</span><span id="MyImage-592"><a href="#MyImage-592"><span class="linenos">592</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-593"><a href="#MyImage-593"><span class="linenos">593</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-594"><a href="#MyImage-594"><span class="linenos">594</span></a><span class="sd">        pixsize : str</span>
</span><span id="MyImage-595"><a href="#MyImage-595"><span class="linenos">595</span></a><span class="sd">            Description how to determine pixel size.</span>
</span><span id="MyImage-596"><a href="#MyImage-596"><span class="linenos">596</span></a><span class="sd">            Pixel size is needed to calculate the scalebar length.</span>
</span><span id="MyImage-597"><a href="#MyImage-597"><span class="linenos">597</span></a><span class="sd">            See *Example* section below to see available options.</span>
</span><span id="MyImage-598"><a href="#MyImage-598"><span class="linenos">598</span></a><span class="sd">        F : float, optional, the default is None</span>
</span><span id="MyImage-599"><a href="#MyImage-599"><span class="linenos">599</span></a><span class="sd">            Multiplication coefficient/factor that changes the scalebar size.</span>
</span><span id="MyImage-600"><a href="#MyImage-600"><span class="linenos">600</span></a><span class="sd">            If F = 1.2, then all scalebar parameters are enlarged 1.2 times.</span>
</span><span id="MyImage-601"><a href="#MyImage-601"><span class="linenos">601</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage-602"><a href="#MyImage-602"><span class="linenos">602</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage-603"><a href="#MyImage-603"><span class="linenos">603</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="MyImage-604"><a href="#MyImage-604"><span class="linenos">604</span></a><span class="sd">            See section *List of allowed kwargs* below for more info. </span>
</span><span id="MyImage-605"><a href="#MyImage-605"><span class="linenos">605</span></a><span class="sd">            </span>
</span><span id="MyImage-606"><a href="#MyImage-606"><span class="linenos">606</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-607"><a href="#MyImage-607"><span class="linenos">607</span></a><span class="sd">        -------</span>
</span><span id="MyImage-608"><a href="#MyImage-608"><span class="linenos">608</span></a><span class="sd">        None</span>
</span><span id="MyImage-609"><a href="#MyImage-609"><span class="linenos">609</span></a><span class="sd">            The scalebar is drawn directly to *self.img*.</span>
</span><span id="MyImage-610"><a href="#MyImage-610"><span class="linenos">610</span></a><span class="sd">            </span>
</span><span id="MyImage-611"><a href="#MyImage-611"><span class="linenos">611</span></a><span class="sd">        Example</span>
</span><span id="MyImage-612"><a href="#MyImage-612"><span class="linenos">612</span></a><span class="sd">        -------</span>
</span><span id="MyImage-613"><a href="#MyImage-613"><span class="linenos">613</span></a><span class="sd">        &gt;&gt;&gt; # Four basic ways how to insert a scalebar in an image</span>
</span><span id="MyImage-614"><a href="#MyImage-614"><span class="linenos">614</span></a><span class="sd">        &gt;&gt;&gt; # (model example; in real life we use just one of the ways</span>
</span><span id="MyImage-615"><a href="#MyImage-615"><span class="linenos">615</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage-616"><a href="#MyImage-616"><span class="linenos">616</span></a><span class="sd">        &gt;&gt;&gt; # (0) Import api + read image</span>
</span><span id="MyImage-617"><a href="#MyImage-617"><span class="linenos">617</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="MyImage-618"><a href="#MyImage-618"><span class="linenos">618</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/image123_20kx.bmp&#39;)</span>
</span><span id="MyImage-619"><a href="#MyImage-619"><span class="linenos">619</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage-620"><a href="#MyImage-620"><span class="linenos">620</span></a><span class="sd">        &gt;&gt;&gt; # (1) Pixel size from real width of image = 100um</span>
</span><span id="MyImage-621"><a href="#MyImage-621"><span class="linenos">621</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;rwi,100um&#39;)</span>
</span><span id="MyImage-622"><a href="#MyImage-622"><span class="linenos">622</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage-623"><a href="#MyImage-623"><span class="linenos">623</span></a><span class="sd">        &gt;&gt;&gt; # (2) Pixel size from a known length in image =&gt; 50 nm = 202 pixels</span>
</span><span id="MyImage-624"><a href="#MyImage-624"><span class="linenos">624</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;knl,50nm,202&#39;)</span>
</span><span id="MyImage-625"><a href="#MyImage-625"><span class="linenos">625</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage-626"><a href="#MyImage-626"><span class="linenos">626</span></a><span class="sd">        &gt;&gt;&gt; # (3) Pixel size from known magnification</span>
</span><span id="MyImage-627"><a href="#MyImage-627"><span class="linenos">627</span></a><span class="sd">        &gt;&gt;&gt; # (note: this can be done only for calibrated microscope</span>
</span><span id="MyImage-628"><a href="#MyImage-628"><span class="linenos">628</span></a><span class="sd">        &gt;&gt;&gt; # (calibrated microscopes =&gt; myimg.settings.MicCalibrations</span>
</span><span id="MyImage-629"><a href="#MyImage-629"><span class="linenos">629</span></a><span class="sd">        &gt;&gt;&gt; # (3a) magnification deduced from last part of image name</span>
</span><span id="MyImage-630"><a href="#MyImage-630"><span class="linenos">630</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag = everything between last underscore and suffix</span>
</span><span id="MyImage-631"><a href="#MyImage-631"><span class="linenos">631</span></a><span class="sd">        &gt;&gt;&gt; # (in this example we have: ../IMG/image123_20kx.bmp =&gt; mag = 20kx</span>
</span><span id="MyImage-632"><a href="#MyImage-632"><span class="linenos">632</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta&#39;)</span>
</span><span id="MyImage-633"><a href="#MyImage-633"><span class="linenos">633</span></a><span class="sd">        &gt;&gt;&gt; # (3b) magnification inserted directly</span>
</span><span id="MyImage-634"><a href="#MyImage-634"><span class="linenos">634</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag can be something like 20kx, 20k, 20000x, 20000</span>
</span><span id="MyImage-635"><a href="#MyImage-635"><span class="linenos">635</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta,20kx&#39;)</span>
</span><span id="MyImage-636"><a href="#MyImage-636"><span class="linenos">636</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage-637"><a href="#MyImage-637"><span class="linenos">637</span></a><span class="sd">        &gt;&gt;&gt; # (4) Pixel size from accompanying text file</span>
</span><span id="MyImage-638"><a href="#MyImage-638"><span class="linenos">638</span></a><span class="sd">        &gt;&gt;&gt; # (note: some microscopes save images + descriptive txt files</span>
</span><span id="MyImage-639"><a href="#MyImage-639"><span class="linenos">639</span></a><span class="sd">        &gt;&gt;&gt; # (the format of text file must be described somehow</span>
</span><span id="MyImage-640"><a href="#MyImage-640"><span class="linenos">640</span></a><span class="sd">        &gt;&gt;&gt; # (description of text files =&gt; myimg.settings.MicDescriptionFiles</span>
</span><span id="MyImage-641"><a href="#MyImage-641"><span class="linenos">641</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;txt,MAIA3&#39;)</span>
</span><span id="MyImage-642"><a href="#MyImage-642"><span class="linenos">642</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage-643"><a href="#MyImage-643"><span class="linenos">643</span></a>
</span><span id="MyImage-644"><a href="#MyImage-644"><span class="linenos">644</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage-645"><a href="#MyImage-645"><span class="linenos">645</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage-646"><a href="#MyImage-646"><span class="linenos">646</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage-647"><a href="#MyImage-647"><span class="linenos">647</span></a><span class="sd">            Text color = color of the scalebar text and line.</span>
</span><span id="MyImage-648"><a href="#MyImage-648"><span class="linenos">648</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage-649"><a href="#MyImage-649"><span class="linenos">649</span></a><span class="sd">            Background color = color of the scalebar background/box.</span>
</span><span id="MyImage-650"><a href="#MyImage-650"><span class="linenos">650</span></a><span class="sd">        * length : str, default is None.</span>
</span><span id="MyImage-651"><a href="#MyImage-651"><span class="linenos">651</span></a><span class="sd">            If length is given (using a string such as &#39;100um&#39;,&#39;1.2nm&#39;)</span>
</span><span id="MyImage-652"><a href="#MyImage-652"><span class="linenos">652</span></a><span class="sd">            then the lenght fixed at given value and not calculated by the</span>
</span><span id="MyImage-653"><a href="#MyImage-653"><span class="linenos">653</span></a><span class="sd">            program (calculation would yield some reasonable lenght of</span>
</span><span id="MyImage-654"><a href="#MyImage-654"><span class="linenos">654</span></a><span class="sd">            scalebar around 1/6 of the image width; this default is saved</span>
</span><span id="MyImage-655"><a href="#MyImage-655"><span class="linenos">655</span></a><span class="sd">            in myimg.settings.Scalebar.length property - which can be changed).</span>
</span><span id="MyImage-656"><a href="#MyImage-656"><span class="linenos">656</span></a><span class="sd">        * position : list or tuple or None, default is None.</span>
</span><span id="MyImage-657"><a href="#MyImage-657"><span class="linenos">657</span></a><span class="sd">            If position = None, the scalebar is drawn</span>
</span><span id="MyImage-658"><a href="#MyImage-658"><span class="linenos">658</span></a><span class="sd">            at the default position in the lower-right corner of the image.</span>
</span><span id="MyImage-659"><a href="#MyImage-659"><span class="linenos">659</span></a><span class="sd">            If position = (X,Y) = list or tuple of two integers,</span>
</span><span id="MyImage-660"><a href="#MyImage-660"><span class="linenos">660</span></a><span class="sd">            the scalebar is drawn at position X,Y of the image.</span>
</span><span id="MyImage-661"><a href="#MyImage-661"><span class="linenos">661</span></a><span class="sd">        * stripes : bool or int, default is False.</span>
</span><span id="MyImage-662"><a href="#MyImage-662"><span class="linenos">662</span></a><span class="sd">            If stripes = False, draw standard scalebar.</span>
</span><span id="MyImage-663"><a href="#MyImage-663"><span class="linenos">663</span></a><span class="sd">            If stripes = True or 1, draw scalebar with 5 stripes.</span>
</span><span id="MyImage-664"><a href="#MyImage-664"><span class="linenos">664</span></a><span class="sd">            If stripes = N, where N&gt;=2, draw striped scalebar with N stripes.</span>
</span><span id="MyImage-665"><a href="#MyImage-665"><span class="linenos">665</span></a><span class="sd">        * messages : bool, default is False.</span>
</span><span id="MyImage-666"><a href="#MyImage-666"><span class="linenos">666</span></a><span class="sd">            If messages=True, print info about program run.</span>
</span><span id="MyImage-667"><a href="#MyImage-667"><span class="linenos">667</span></a><span class="sd">        </span>
</span><span id="MyImage-668"><a href="#MyImage-668"><span class="linenos">668</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage-669"><a href="#MyImage-669"><span class="linenos">669</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage-670"><a href="#MyImage-670"><span class="linenos">670</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage-671"><a href="#MyImage-671"><span class="linenos">671</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage-672"><a href="#MyImage-672"><span class="linenos">672</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage-673"><a href="#MyImage-673"><span class="linenos">673</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage-674"><a href="#MyImage-674"><span class="linenos">674</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage-675"><a href="#MyImage-675"><span class="linenos">675</span></a><span class="sd">          are set to their defaults defined in Settings.Scalebar.</span>
</span><span id="MyImage-676"><a href="#MyImage-676"><span class="linenos">676</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage-677"><a href="#MyImage-677"><span class="linenos">677</span></a><span class="sd">        * Color scalebar in grayscale image:</span>
</span><span id="MyImage-678"><a href="#MyImage-678"><span class="linenos">678</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage-679"><a href="#MyImage-679"><span class="linenos">679</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage-680"><a href="#MyImage-680"><span class="linenos">680</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage-681"><a href="#MyImage-681"><span class="linenos">681</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-682"><a href="#MyImage-682"><span class="linenos">682</span></a>        
</span><span id="MyImage-683"><a href="#MyImage-683"><span class="linenos">683</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage-684"><a href="#MyImage-684"><span class="linenos">684</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage-685"><a href="#MyImage-685"><span class="linenos">685</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage-686"><a href="#MyImage-686"><span class="linenos">686</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">scalebar</span> <span class="k">as</span> <span class="n">my_scalebar</span>
</span><span id="MyImage-687"><a href="#MyImage-687"><span class="linenos">687</span></a>        <span class="n">my_scalebar</span><span class="o">.</span><span class="n">insert_scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="MyImage-688"><a href="#MyImage-688"><span class="linenos">688</span></a>    
</span><span id="MyImage-689"><a href="#MyImage-689"><span class="linenos">689</span></a>    
</span><span id="MyImage-690"><a href="#MyImage-690"><span class="linenos">690</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">iscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="MyImage-691"><a href="#MyImage-691"><span class="linenos">691</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-692"><a href="#MyImage-692"><span class="linenos">692</span></a><span class="sd">        Show image.</span>
</span><span id="MyImage-693"><a href="#MyImage-693"><span class="linenos">693</span></a>
</span><span id="MyImage-694"><a href="#MyImage-694"><span class="linenos">694</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-695"><a href="#MyImage-695"><span class="linenos">695</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-696"><a href="#MyImage-696"><span class="linenos">696</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="MyImage-697"><a href="#MyImage-697"><span class="linenos">697</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="MyImage-698"><a href="#MyImage-698"><span class="linenos">698</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="MyImage-699"><a href="#MyImage-699"><span class="linenos">699</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="MyImage-700"><a href="#MyImage-700"><span class="linenos">700</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="MyImage-701"><a href="#MyImage-701"><span class="linenos">701</span></a>
</span><span id="MyImage-702"><a href="#MyImage-702"><span class="linenos">702</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-703"><a href="#MyImage-703"><span class="linenos">703</span></a><span class="sd">        -------</span>
</span><span id="MyImage-704"><a href="#MyImage-704"><span class="linenos">704</span></a><span class="sd">        None</span>
</span><span id="MyImage-705"><a href="#MyImage-705"><span class="linenos">705</span></a><span class="sd">            The output is the image shown on the screen.</span>
</span><span id="MyImage-706"><a href="#MyImage-706"><span class="linenos">706</span></a>
</span><span id="MyImage-707"><a href="#MyImage-707"><span class="linenos">707</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-708"><a href="#MyImage-708"><span class="linenos">708</span></a>        <span class="c1"># Grayscale images require special treatment</span>
</span><span id="MyImage-709"><a href="#MyImage-709"><span class="linenos">709</span></a>        <span class="n">grayscale_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span>
</span><span id="MyImage-710"><a href="#MyImage-710"><span class="linenos">710</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span><span class="p">:</span>
</span><span id="MyImage-711"><a href="#MyImage-711"><span class="linenos">711</span></a>            <span class="c1"># If not specified explicitly, cmap should be gray.</span>
</span><span id="MyImage-712"><a href="#MyImage-712"><span class="linenos">712</span></a>            <span class="k">if</span> <span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage-713"><a href="#MyImage-713"><span class="linenos">713</span></a>            <span class="c1"># If not required, grayscale images should not be autoscaled.</span>
</span><span id="MyImage-714"><a href="#MyImage-714"><span class="linenos">714</span></a>            <span class="k">if</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="MyImage-715"><a href="#MyImage-715"><span class="linenos">715</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-8bit</span>
</span><span id="MyImage-716"><a href="#MyImage-716"><span class="linenos">716</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
</span><span id="MyImage-717"><a href="#MyImage-717"><span class="linenos">717</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-16bit</span>
</span><span id="MyImage-718"><a href="#MyImage-718"><span class="linenos">718</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">65535</span><span class="p">)</span>
</span><span id="MyImage-719"><a href="#MyImage-719"><span class="linenos">719</span></a>        <span class="c1"># Do not show axes if axes = False</span>
</span><span id="MyImage-720"><a href="#MyImage-720"><span class="linenos">720</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="MyImage-721"><a href="#MyImage-721"><span class="linenos">721</span></a>        <span class="c1"># Plot the image</span>
</span><span id="MyImage-722"><a href="#MyImage-722"><span class="linenos">722</span></a>        <span class="c1"># ...intensity of grayscale images should not be autoscaled</span>
</span><span id="MyImage-723"><a href="#MyImage-723"><span class="linenos">723</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span> <span class="ow">and</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="MyImage-724"><a href="#MyImage-724"><span class="linenos">724</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">imin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">imax</span><span class="p">)</span>
</span><span id="MyImage-725"><a href="#MyImage-725"><span class="linenos">725</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage-726"><a href="#MyImage-726"><span class="linenos">726</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="MyImage-727"><a href="#MyImage-727"><span class="linenos">727</span></a>        <span class="c1"># Show the plot </span>
</span><span id="MyImage-728"><a href="#MyImage-728"><span class="linenos">728</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="MyImage-729"><a href="#MyImage-729"><span class="linenos">729</span></a>    
</span><span id="MyImage-730"><a href="#MyImage-730"><span class="linenos">730</span></a>    
</span><span id="MyImage-731"><a href="#MyImage-731"><span class="linenos">731</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyImage-732"><a href="#MyImage-732"><span class="linenos">732</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-733"><a href="#MyImage-733"><span class="linenos">733</span></a><span class="sd">        Save image using arbitrary output dir, name and extension.</span>
</span><span id="MyImage-734"><a href="#MyImage-734"><span class="linenos">734</span></a>
</span><span id="MyImage-735"><a href="#MyImage-735"><span class="linenos">735</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-736"><a href="#MyImage-736"><span class="linenos">736</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-737"><a href="#MyImage-737"><span class="linenos">737</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="MyImage-738"><a href="#MyImage-738"><span class="linenos">738</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="MyImage-739"><a href="#MyImage-739"><span class="linenos">739</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="MyImage-740"><a href="#MyImage-740"><span class="linenos">740</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyImage-741"><a href="#MyImage-741"><span class="linenos">741</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="MyImage-742"><a href="#MyImage-742"><span class="linenos">742</span></a>
</span><span id="MyImage-743"><a href="#MyImage-743"><span class="linenos">743</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-744"><a href="#MyImage-744"><span class="linenos">744</span></a><span class="sd">        -------</span>
</span><span id="MyImage-745"><a href="#MyImage-745"><span class="linenos">745</span></a><span class="sd">        None</span>
</span><span id="MyImage-746"><a href="#MyImage-746"><span class="linenos">746</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="MyImage-747"><a href="#MyImage-747"><span class="linenos">747</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-748"><a href="#MyImage-748"><span class="linenos">748</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span><span id="MyImage-749"><a href="#MyImage-749"><span class="linenos">749</span></a>    
</span><span id="MyImage-750"><a href="#MyImage-750"><span class="linenos">750</span></a>    
</span><span id="MyImage-751"><a href="#MyImage-751"><span class="linenos">751</span></a>    <span class="k">def</span> <span class="nf">save_with_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_extension</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyImage-752"><a href="#MyImage-752"><span class="linenos">752</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage-753"><a href="#MyImage-753"><span class="linenos">753</span></a><span class="sd">        Save image in the same dir with slightly modified name and extension.</span>
</span><span id="MyImage-754"><a href="#MyImage-754"><span class="linenos">754</span></a>
</span><span id="MyImage-755"><a href="#MyImage-755"><span class="linenos">755</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage-756"><a href="#MyImage-756"><span class="linenos">756</span></a><span class="sd">        ----------</span>
</span><span id="MyImage-757"><a href="#MyImage-757"><span class="linenos">757</span></a><span class="sd">        my_extension : str</span>
</span><span id="MyImage-758"><a href="#MyImage-758"><span class="linenos">758</span></a><span class="sd">            Specific extension of the output image.</span>
</span><span id="MyImage-759"><a href="#MyImage-759"><span class="linenos">759</span></a><span class="sd">            The argument my_extension can extend image name</span>
</span><span id="MyImage-760"><a href="#MyImage-760"><span class="linenos">760</span></a><span class="sd">            + modify image extension/format;</span>
</span><span id="MyImage-761"><a href="#MyImage-761"><span class="linenos">761</span></a><span class="sd">            see the example below.</span>
</span><span id="MyImage-762"><a href="#MyImage-762"><span class="linenos">762</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyImage-763"><a href="#MyImage-763"><span class="linenos">763</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="MyImage-764"><a href="#MyImage-764"><span class="linenos">764</span></a><span class="sd">            </span>
</span><span id="MyImage-765"><a href="#MyImage-765"><span class="linenos">765</span></a><span class="sd">        Returns</span>
</span><span id="MyImage-766"><a href="#MyImage-766"><span class="linenos">766</span></a><span class="sd">        -------</span>
</span><span id="MyImage-767"><a href="#MyImage-767"><span class="linenos">767</span></a><span class="sd">        None</span>
</span><span id="MyImage-768"><a href="#MyImage-768"><span class="linenos">768</span></a><span class="sd">            The output is the saved output image with *my_extension*.</span>
</span><span id="MyImage-769"><a href="#MyImage-769"><span class="linenos">769</span></a><span class="sd">        </span>
</span><span id="MyImage-770"><a href="#MyImage-770"><span class="linenos">770</span></a><span class="sd">        Example</span>
</span><span id="MyImage-771"><a href="#MyImage-771"><span class="linenos">771</span></a><span class="sd">        -------</span>
</span><span id="MyImage-772"><a href="#MyImage-772"><span class="linenos">772</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="MyImage-773"><a href="#MyImage-773"><span class="linenos">773</span></a><span class="sd">        &gt;&gt;&gt; # Open image</span>
</span><span id="MyImage-774"><a href="#MyImage-774"><span class="linenos">774</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/somefile.bmp&#39;)</span>
</span><span id="MyImage-775"><a href="#MyImage-775"><span class="linenos">775</span></a><span class="sd">        &gt;&gt;&gt; # Cut off lower bar </span>
</span><span id="MyImage-776"><a href="#MyImage-776"><span class="linenos">776</span></a><span class="sd">        &gt;&gt;&gt; img.cut(60)</span>
</span><span id="MyImage-777"><a href="#MyImage-777"><span class="linenos">777</span></a><span class="sd">        &gt;&gt;&gt; # Save the image as: &#39;../IMG/somefile_cut.png&#39;)</span>
</span><span id="MyImage-778"><a href="#MyImage-778"><span class="linenos">778</span></a><span class="sd">        &gt;&gt;&gt; img.save_with_ext(&#39;_cut.png&#39;)</span>
</span><span id="MyImage-779"><a href="#MyImage-779"><span class="linenos">779</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage-780"><a href="#MyImage-780"><span class="linenos">780</span></a>        <span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">ext</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="MyImage-781"><a href="#MyImage-781"><span class="linenos">781</span></a>        <span class="n">output_image</span> <span class="o">=</span> <span class="n">file</span> <span class="o">+</span> <span class="n">my_extension</span>
</span><span id="MyImage-782"><a href="#MyImage-782"><span class="linenos">782</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Class defining MyImage objects.</p>
</div>


                            <div id="MyImage.__init__" class="classattr">
                                        <input id="MyImage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MyImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span></span>)</span>

                <label class="view-source-button" for="MyImage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.__init__-66"><a href="#MyImage.__init__-66"><span class="linenos">66</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="MyImage.__init__-67"><a href="#MyImage.__init__-67"><span class="linenos">67</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.__init__-68"><a href="#MyImage.__init__-68"><span class="linenos">68</span></a><span class="sd">        Initialize MyImage object.</span>
</span><span id="MyImage.__init__-69"><a href="#MyImage.__init__-69"><span class="linenos">69</span></a>
</span><span id="MyImage.__init__-70"><a href="#MyImage.__init__-70"><span class="linenos">70</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.__init__-71"><a href="#MyImage.__init__-71"><span class="linenos">71</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.__init__-72"><a href="#MyImage.__init__-72"><span class="linenos">72</span></a><span class="sd">        filename : str or path-like object</span>
</span><span id="MyImage.__init__-73"><a href="#MyImage.__init__-73"><span class="linenos">73</span></a><span class="sd">            Name of the image file to work with.</span>
</span><span id="MyImage.__init__-74"><a href="#MyImage.__init__-74"><span class="linenos">74</span></a>
</span><span id="MyImage.__init__-75"><a href="#MyImage.__init__-75"><span class="linenos">75</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.__init__-76"><a href="#MyImage.__init__-76"><span class="linenos">76</span></a><span class="sd">        -------</span>
</span><span id="MyImage.__init__-77"><a href="#MyImage.__init__-77"><span class="linenos">77</span></a><span class="sd">        MyImage object</span>
</span><span id="MyImage.__init__-78"><a href="#MyImage.__init__-78"><span class="linenos">78</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.__init__-79"><a href="#MyImage.__init__-79"><span class="linenos">79</span></a>        <span class="c1"># Store image name and open the image</span>
</span><span id="MyImage.__init__-80"><a href="#MyImage.__init__-80"><span class="linenos">80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="MyImage.__init__-81"><a href="#MyImage.__init__-81"><span class="linenos">81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="MyImage.__init__-82"><a href="#MyImage.__init__-82"><span class="linenos">82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span><span id="MyImage.__init__-83"><a href="#MyImage.__init__-83"><span class="linenos">83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_image_type</span><span class="p">()</span>
</span><span id="MyImage.__init__-84"><a href="#MyImage.__init__-84"><span class="linenos">84</span></a>
</span><span id="MyImage.__init__-85"><a href="#MyImage.__init__-85"><span class="linenos">85</span></a>        <span class="c1"># Additional (optional) properties/features/methods/objects</span>
</span><span id="MyImage.__init__-86"><a href="#MyImage.__init__-86"><span class="linenos">86</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iLabels</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyImage.__init__-87"><a href="#MyImage.__init__-87"><span class="linenos">87</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">FFT</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Initialize MyImage object.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filename</strong> (str or path-like object):
Name of the image file to work with.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>MyImage object</strong></li>
</ul>
</div>


                            </div>
                            <div id="MyImage.open_image" class="classattr">
                                        <input id="MyImage.open_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">open_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.open_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.open_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.open_image-90"><a href="#MyImage.open_image-90"><span class="linenos"> 90</span></a>    <span class="nd">@staticmethod</span>
</span><span id="MyImage.open_image-91"><a href="#MyImage.open_image-91"><span class="linenos"> 91</span></a>    <span class="k">def</span> <span class="nf">open_image</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="MyImage.open_image-92"><a href="#MyImage.open_image-92"><span class="linenos"> 92</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.open_image-93"><a href="#MyImage.open_image-93"><span class="linenos"> 93</span></a><span class="sd">        Open image file using PIL.Image taking into account all exceptions.</span>
</span><span id="MyImage.open_image-94"><a href="#MyImage.open_image-94"><span class="linenos"> 94</span></a>
</span><span id="MyImage.open_image-95"><a href="#MyImage.open_image-95"><span class="linenos"> 95</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.open_image-96"><a href="#MyImage.open_image-96"><span class="linenos"> 96</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.open_image-97"><a href="#MyImage.open_image-97"><span class="linenos"> 97</span></a><span class="sd">        filename : str</span>
</span><span id="MyImage.open_image-98"><a href="#MyImage.open_image-98"><span class="linenos"> 98</span></a><span class="sd">            Name of the file to open.</span>
</span><span id="MyImage.open_image-99"><a href="#MyImage.open_image-99"><span class="linenos"> 99</span></a>
</span><span id="MyImage.open_image-100"><a href="#MyImage.open_image-100"><span class="linenos">100</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.open_image-101"><a href="#MyImage.open_image-101"><span class="linenos">101</span></a><span class="sd">        -------</span>
</span><span id="MyImage.open_image-102"><a href="#MyImage.open_image-102"><span class="linenos">102</span></a><span class="sd">        img : PIL image object</span>
</span><span id="MyImage.open_image-103"><a href="#MyImage.open_image-103"><span class="linenos">103</span></a><span class="sd">            The PIL image object is usually saved in MyImage object.</span>
</span><span id="MyImage.open_image-104"><a href="#MyImage.open_image-104"><span class="linenos">104</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.open_image-105"><a href="#MyImage.open_image-105"><span class="linenos">105</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="MyImage.open_image-106"><a href="#MyImage.open_image-106"><span class="linenos">106</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="MyImage.open_image-107"><a href="#MyImage.open_image-107"><span class="linenos">107</span></a>            <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage.open_image-108"><a href="#MyImage.open_image-108"><span class="linenos">108</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="MyImage.open_image-109"><a href="#MyImage.open_image-109"><span class="linenos">109</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File not found: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage.open_image-110"><a href="#MyImage.open_image-110"><span class="linenos">110</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage.open_image-111"><a href="#MyImage.open_image-111"><span class="linenos">111</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="MyImage.open_image-112"><a href="#MyImage.open_image-112"><span class="linenos">112</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error opening image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage.open_image-113"><a href="#MyImage.open_image-113"><span class="linenos">113</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="MyImage.open_image-114"><a href="#MyImage.open_image-114"><span class="linenos">114</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyImage.open_image-115"><a href="#MyImage.open_image-115"><span class="linenos">115</span></a>        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
</span><span id="MyImage.open_image-116"><a href="#MyImage.open_image-116"><span class="linenos">116</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;OS error when opening: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="MyImage.open_image-117"><a href="#MyImage.open_image-117"><span class="linenos">117</span></a>            <span class="nb">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</span><span id="MyImage.open_image-118"><a href="#MyImage.open_image-118"><span class="linenos">118</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Open image file using PIL.Image taking into account all exceptions.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filename</strong> (str):
Name of the file to open.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>img</strong> (PIL image object):
The PIL image object is usually saved in MyImage object.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.get_font_size" class="classattr">
                                        <input id="MyImage.get_font_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_font_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">font_name</span>, </span><span class="param"><span class="n">required_font_size_in_pixels</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.get_font_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.get_font_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.get_font_size-121"><a href="#MyImage.get_font_size-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">get_font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font_name</span><span class="p">,</span> <span class="n">required_font_size_in_pixels</span><span class="p">):</span>
</span><span id="MyImage.get_font_size-122"><a href="#MyImage.get_font_size-122"><span class="linenos">122</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.get_font_size-123"><a href="#MyImage.get_font_size-123"><span class="linenos">123</span></a><span class="sd">        Get font size (in fontsize units)</span>
</span><span id="MyImage.get_font_size-124"><a href="#MyImage.get_font_size-124"><span class="linenos">124</span></a><span class="sd">        corresponding to *required_font_size_in_pixels*.</span>
</span><span id="MyImage.get_font_size-125"><a href="#MyImage.get_font_size-125"><span class="linenos">125</span></a>
</span><span id="MyImage.get_font_size-126"><a href="#MyImage.get_font_size-126"><span class="linenos">126</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.get_font_size-127"><a href="#MyImage.get_font_size-127"><span class="linenos">127</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.get_font_size-128"><a href="#MyImage.get_font_size-128"><span class="linenos">128</span></a><span class="sd">        fontname : str</span>
</span><span id="MyImage.get_font_size-129"><a href="#MyImage.get_font_size-129"><span class="linenos">129</span></a><span class="sd">            Name of the TrueType font to use.</span>
</span><span id="MyImage.get_font_size-130"><a href="#MyImage.get_font_size-130"><span class="linenos">130</span></a><span class="sd">            Example (working in Windows): font_name=&#39;timesbd.ttf&#39;</span>
</span><span id="MyImage.get_font_size-131"><a href="#MyImage.get_font_size-131"><span class="linenos">131</span></a><span class="sd">        required_font_size_in_pixels : float</span>
</span><span id="MyImage.get_font_size-132"><a href="#MyImage.get_font_size-132"><span class="linenos">132</span></a><span class="sd">            Required font size in pixels.</span>
</span><span id="MyImage.get_font_size-133"><a href="#MyImage.get_font_size-133"><span class="linenos">133</span></a>
</span><span id="MyImage.get_font_size-134"><a href="#MyImage.get_font_size-134"><span class="linenos">134</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.get_font_size-135"><a href="#MyImage.get_font_size-135"><span class="linenos">135</span></a><span class="sd">        -------</span>
</span><span id="MyImage.get_font_size-136"><a href="#MyImage.get_font_size-136"><span class="linenos">136</span></a><span class="sd">        font_size : int</span>
</span><span id="MyImage.get_font_size-137"><a href="#MyImage.get_font_size-137"><span class="linenos">137</span></a><span class="sd">            Final font size (in font units).</span>
</span><span id="MyImage.get_font_size-138"><a href="#MyImage.get_font_size-138"><span class="linenos">138</span></a><span class="sd">            If the returned *font_size* (in fontsize units)</span>
</span><span id="MyImage.get_font_size-139"><a href="#MyImage.get_font_size-139"><span class="linenos">139</span></a><span class="sd">            is applied to font with given *fontname*,</span>
</span><span id="MyImage.get_font_size-140"><a href="#MyImage.get_font_size-140"><span class="linenos">140</span></a><span class="sd">            then the height of the font (in pixels units)</span>
</span><span id="MyImage.get_font_size-141"><a href="#MyImage.get_font_size-141"><span class="linenos">141</span></a><span class="sd">            will correspond to *required_font_size_in_pixels* argument.</span>
</span><span id="MyImage.get_font_size-142"><a href="#MyImage.get_font_size-142"><span class="linenos">142</span></a><span class="sd">            </span>
</span><span id="MyImage.get_font_size-143"><a href="#MyImage.get_font_size-143"><span class="linenos">143</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.get_font_size-144"><a href="#MyImage.get_font_size-144"><span class="linenos">144</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.get_font_size-145"><a href="#MyImage.get_font_size-145"><span class="linenos">145</span></a><span class="sd">        * This function is a modified recipe from StackOverflow:</span>
</span><span id="MyImage.get_font_size-146"><a href="#MyImage.get_font_size-146"><span class="linenos">146</span></a><span class="sd">          https://stackoverflow.com/q/4902198</span>
</span><span id="MyImage.get_font_size-147"><a href="#MyImage.get_font_size-147"><span class="linenos">147</span></a><span class="sd">        * My modification may be a bit slower (not too much)</span>
</span><span id="MyImage.get_font_size-148"><a href="#MyImage.get_font_size-148"><span class="linenos">148</span></a><span class="sd">          but it seems to be clear and reliable.</span>
</span><span id="MyImage.get_font_size-149"><a href="#MyImage.get_font_size-149"><span class="linenos">149</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.get_font_size-150"><a href="#MyImage.get_font_size-150"><span class="linenos">150</span></a>        <span class="c1"># (1) Initial fontsize = required_font_size</span>
</span><span id="MyImage.get_font_size-151"><a href="#MyImage.get_font_size-151"><span class="linenos">151</span></a>        <span class="c1"># (Note: fontsize [in fontsize units]</span>
</span><span id="MyImage.get_font_size-152"><a href="#MyImage.get_font_size-152"><span class="linenos">152</span></a>        <span class="c1"># (is just APPROXIMATELY equal to required fontsize [in pixels].</span>
</span><span id="MyImage.get_font_size-153"><a href="#MyImage.get_font_size-153"><span class="linenos">153</span></a>        <span class="n">font_size</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">required_font_size_in_pixels</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-154"><a href="#MyImage.get_font_size-154"><span class="linenos">154</span></a>        
</span><span id="MyImage.get_font_size-155"><a href="#MyImage.get_font_size-155"><span class="linenos">155</span></a>        <span class="c1"># (2) Initialize draw_object + font_object and calculate font height</span>
</span><span id="MyImage.get_font_size-156"><a href="#MyImage.get_font_size-156"><span class="linenos">156</span></a>        <span class="c1"># (Note1: draw_object is needed for the correct font height calculation</span>
</span><span id="MyImage.get_font_size-157"><a href="#MyImage.get_font_size-157"><span class="linenos">157</span></a>        <span class="c1"># (Note2: we calculate the font height for a model text - here: cap &#39;M&#39;</span>
</span><span id="MyImage.get_font_size-158"><a href="#MyImage.get_font_size-158"><span class="linenos">158</span></a>        <span class="n">draw_object</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-159"><a href="#MyImage.get_font_size-159"><span class="linenos">159</span></a>        <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-160"><a href="#MyImage.get_font_size-160"><span class="linenos">160</span></a>        <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span> 
</span><span id="MyImage.get_font_size-161"><a href="#MyImage.get_font_size-161"><span class="linenos">161</span></a>        <span class="c1"># (2a) Current font_height &gt; required_font_size_in_pixels, decrease...</span>
</span><span id="MyImage.get_font_size-162"><a href="#MyImage.get_font_size-162"><span class="linenos">162</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&gt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="MyImage.get_font_size-163"><a href="#MyImage.get_font_size-163"><span class="linenos">163</span></a>            <span class="n">font_size</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="MyImage.get_font_size-164"><a href="#MyImage.get_font_size-164"><span class="linenos">164</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-165"><a href="#MyImage.get_font_size-165"><span class="linenos">165</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-166"><a href="#MyImage.get_font_size-166"><span class="linenos">166</span></a>        <span class="c1"># (2b) Current font_height &gt; required_font_size_in_pixels, increase...</span>
</span><span id="MyImage.get_font_size-167"><a href="#MyImage.get_font_size-167"><span class="linenos">167</span></a>        <span class="k">while</span> <span class="n">font_height</span> <span class="o">&lt;</span> <span class="n">required_font_size_in_pixels</span><span class="p">:</span>
</span><span id="MyImage.get_font_size-168"><a href="#MyImage.get_font_size-168"><span class="linenos">168</span></a>            <span class="n">font_size</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="MyImage.get_font_size-169"><a href="#MyImage.get_font_size-169"><span class="linenos">169</span></a>            <span class="n">font_object</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="n">font_name</span><span class="p">,</span> <span class="n">font_size</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-170"><a href="#MyImage.get_font_size-170"><span class="linenos">170</span></a>            <span class="n">font_height</span> <span class="o">=</span> <span class="n">MyImage</span><span class="o">.</span><span class="n">font_height_pix</span><span class="p">(</span><span class="n">draw_object</span><span class="p">,</span> <span class="n">font_object</span><span class="p">)</span>
</span><span id="MyImage.get_font_size-171"><a href="#MyImage.get_font_size-171"><span class="linenos">171</span></a>        
</span><span id="MyImage.get_font_size-172"><a href="#MyImage.get_font_size-172"><span class="linenos">172</span></a>        <span class="c1"># (3) Return font size (for given font_name, in font_name units)</span>
</span><span id="MyImage.get_font_size-173"><a href="#MyImage.get_font_size-173"><span class="linenos">173</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get font size (in fontsize units)
corresponding to <em>required_font_size_in_pixels</em>.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>fontname</strong> (str):
Name of the TrueType font to use.
Example (working in Windows): font_name='timesbd.ttf'</li>
<li><strong>required_font_size_in_pixels</strong> (float):
Required font size in pixels.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>font_size</strong> (int):
Final font size (in font units).
If the returned <em>font_size</em> (in fontsize units)
is applied to font with given <em>fontname</em>,
then the height of the font (in pixels units)
will correspond to <em>required_font_size_in_pixels</em> argument.</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>This function is a modified recipe from StackOverflow:
<a href="https://stackoverflow.com/q/4902198">https://stackoverflow.com/q/4902198</a></li>
<li>My modification may be a bit slower (not too much)
but it seems to be clear and reliable.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.to_gray" class="classattr">
                                        <input id="MyImage.to_gray-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_gray</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;8bit&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.to_gray-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.to_gray"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.to_gray-220"><a href="#MyImage.to_gray-220"><span class="linenos">220</span></a>    <span class="k">def</span> <span class="nf">to_gray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;8bit&#39;</span><span class="p">):</span>
</span><span id="MyImage.to_gray-221"><a href="#MyImage.to_gray-221"><span class="linenos">221</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.to_gray-222"><a href="#MyImage.to_gray-222"><span class="linenos">222</span></a><span class="sd">        Convert image to grayscale.</span>
</span><span id="MyImage.to_gray-223"><a href="#MyImage.to_gray-223"><span class="linenos">223</span></a>
</span><span id="MyImage.to_gray-224"><a href="#MyImage.to_gray-224"><span class="linenos">224</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.to_gray-225"><a href="#MyImage.to_gray-225"><span class="linenos">225</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.to_gray-226"><a href="#MyImage.to_gray-226"><span class="linenos">226</span></a><span class="sd">        itype : str, optional, default is &#39;8bit&#39;</span>
</span><span id="MyImage.to_gray-227"><a href="#MyImage.to_gray-227"><span class="linenos">227</span></a><span class="sd">            The image is converted to 8bit grayscale.</span>
</span><span id="MyImage.to_gray-228"><a href="#MyImage.to_gray-228"><span class="linenos">228</span></a><span class="sd">            Only the standard 8bit grayscale images are supported now.</span>
</span><span id="MyImage.to_gray-229"><a href="#MyImage.to_gray-229"><span class="linenos">229</span></a>
</span><span id="MyImage.to_gray-230"><a href="#MyImage.to_gray-230"><span class="linenos">230</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.to_gray-231"><a href="#MyImage.to_gray-231"><span class="linenos">231</span></a><span class="sd">        -------</span>
</span><span id="MyImage.to_gray-232"><a href="#MyImage.to_gray-232"><span class="linenos">232</span></a><span class="sd">        None</span>
</span><span id="MyImage.to_gray-233"><a href="#MyImage.to_gray-233"><span class="linenos">233</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="MyImage.to_gray-234"><a href="#MyImage.to_gray-234"><span class="linenos">234</span></a><span class="sd">            </span>
</span><span id="MyImage.to_gray-235"><a href="#MyImage.to_gray-235"><span class="linenos">235</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.to_gray-236"><a href="#MyImage.to_gray-236"><span class="linenos">236</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.to_gray-237"><a href="#MyImage.to_gray-237"><span class="linenos">237</span></a><span class="sd">        * We fully support only 8-bit grayscale images;</span>
</span><span id="MyImage.to_gray-238"><a href="#MyImage.to_gray-238"><span class="linenos">238</span></a><span class="sd">          the same situation is in Pillow (full support only for 8-bit gray).</span>
</span><span id="MyImage.to_gray-239"><a href="#MyImage.to_gray-239"><span class="linenos">239</span></a><span class="sd">        * Working with 16-bit grayscale images is surprisingly tricky.</span>
</span><span id="MyImage.to_gray-240"><a href="#MyImage.to_gray-240"><span class="linenos">240</span></a><span class="sd">          You *can* read and work with 16-bit images,</span>
</span><span id="MyImage.to_gray-241"><a href="#MyImage.to_gray-241"><span class="linenos">241</span></a><span class="sd">          but before using some methods of this package</span>
</span><span id="MyImage.to_gray-242"><a href="#MyImage.to_gray-242"><span class="linenos">242</span></a><span class="sd">          (such as label, scalebar, montage),</span>
</span><span id="MyImage.to_gray-243"><a href="#MyImage.to_gray-243"><span class="linenos">243</span></a><span class="sd">          they *should* be converted to 8-bit grayscale</span>
</span><span id="MyImage.to_gray-244"><a href="#MyImage.to_gray-244"><span class="linenos">244</span></a><span class="sd">          in order to avoid errors or strange results.</span>
</span><span id="MyImage.to_gray-245"><a href="#MyImage.to_gray-245"><span class="linenos">245</span></a><span class="sd">        * This method can convert</span>
</span><span id="MyImage.to_gray-246"><a href="#MyImage.to_gray-246"><span class="linenos">246</span></a><span class="sd">          the standard 16-bit grayscale to the 8-bit grayscale,</span>
</span><span id="MyImage.to_gray-247"><a href="#MyImage.to_gray-247"><span class="linenos">247</span></a><span class="sd">          but it does not support other, less common grayscale formats.</span>
</span><span id="MyImage.to_gray-248"><a href="#MyImage.to_gray-248"><span class="linenos">248</span></a><span class="sd">        * The less common grayscale formats can be normalized and converted</span>
</span><span id="MyImage.to_gray-249"><a href="#MyImage.to_gray-249"><span class="linenos">249</span></a><span class="sd">          to 8-bit grayscale manually, in an analogous way as in this method.</span>
</span><span id="MyImage.to_gray-250"><a href="#MyImage.to_gray-250"><span class="linenos">250</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.to_gray-251"><a href="#MyImage.to_gray-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;8bit&#39;</span><span class="p">:</span>
</span><span id="MyImage.to_gray-252"><a href="#MyImage.to_gray-252"><span class="linenos">252</span></a>            <span class="c1"># Conversion to 8-bit grayscale</span>
</span><span id="MyImage.to_gray-253"><a href="#MyImage.to_gray-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">,</span><span class="s1">&#39;RGBA&#39;</span><span class="p">):</span>
</span><span id="MyImage.to_gray-254"><a href="#MyImage.to_gray-254"><span class="linenos">254</span></a>                <span class="c1"># Conversion of RGB and RGBA images should be fine.</span>
</span><span id="MyImage.to_gray-255"><a href="#MyImage.to_gray-255"><span class="linenos">255</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_gray-256"><a href="#MyImage.to_gray-256"><span class="linenos">256</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage.to_gray-257"><a href="#MyImage.to_gray-257"><span class="linenos">257</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="MyImage.to_gray-258"><a href="#MyImage.to_gray-258"><span class="linenos">258</span></a>                <span class="c1"># The image is 8-bit grayscale - just reset itype=&#39;gray&#39;.</span>
</span><span id="MyImage.to_gray-259"><a href="#MyImage.to_gray-259"><span class="linenos">259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage.to_gray-260"><a href="#MyImage.to_gray-260"><span class="linenos">260</span></a>            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;I;16&#39;</span><span class="p">:</span>
</span><span id="MyImage.to_gray-261"><a href="#MyImage.to_gray-261"><span class="linenos">261</span></a>                <span class="c1"># Conversion of 16-bit grayscale to 8-bit grayscale</span>
</span><span id="MyImage.to_gray-262"><a href="#MyImage.to_gray-262"><span class="linenos">262</span></a>                <span class="c1"># (requires special treatment, not supported by Pillow.</span>
</span><span id="MyImage.to_gray-263"><a href="#MyImage.to_gray-263"><span class="linenos">263</span></a>                <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyImage.to_gray-264"><a href="#MyImage.to_gray-264"><span class="linenos">264</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="p">(</span><span class="n">arr</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">*</span> <span class="mi">255</span>
</span><span id="MyImage.to_gray-265"><a href="#MyImage.to_gray-265"><span class="linenos">265</span></a>                <span class="n">normalized</span> <span class="o">=</span> <span class="n">normalized</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyImage.to_gray-266"><a href="#MyImage.to_gray-266"><span class="linenos">266</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">normalized</span><span class="p">)</span>
</span><span id="MyImage.to_gray-267"><a href="#MyImage.to_gray-267"><span class="linenos">267</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage.to_gray-268"><a href="#MyImage.to_gray-268"><span class="linenos">268</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.to_gray-269"><a href="#MyImage.to_gray-269"><span class="linenos">269</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - unsupported image type!&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_gray-270"><a href="#MyImage.to_gray-270"><span class="linenos">270</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.to_gray-271"><a href="#MyImage.to_gray-271"><span class="linenos">271</span></a>            <span class="c1"># Conversion to non-8bit grayscale formats not supported now.</span>
</span><span id="MyImage.to_gray-272"><a href="#MyImage.to_gray-272"><span class="linenos">272</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Conversion to grayscale - only 8-bit grayscale supported!&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_gray-273"><a href="#MyImage.to_gray-273"><span class="linenos">273</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Convert image to grayscale.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>itype</strong> (str, optional, default is '8bit'):
The image is converted to 8bit grayscale.
Only the standard 8bit grayscale images are supported now.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is saved in self.img.</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>We fully support only 8-bit grayscale images;
the same situation is in Pillow (full support only for 8-bit gray).</li>
<li>Working with 16-bit grayscale images is surprisingly tricky.
You <em>can</em> read and work with 16-bit images,
but before using some methods of this package
(such as label, scalebar, montage),
they <em>should</em> be converted to 8-bit grayscale
in order to avoid errors or strange results.</li>
<li>This method can convert
the standard 16-bit grayscale to the 8-bit grayscale,
but it does not support other, less common grayscale formats.</li>
<li>The less common grayscale formats can be normalized and converted
to 8-bit grayscale manually, in an analogous way as in this method.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.to_rgb" class="classattr">
                                        <input id="MyImage.to_rgb-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_rgb</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;24bit&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.to_rgb-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.to_rgb"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.to_rgb-276"><a href="#MyImage.to_rgb-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">to_rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;24bit&#39;</span><span class="p">):</span>
</span><span id="MyImage.to_rgb-277"><a href="#MyImage.to_rgb-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.to_rgb-278"><a href="#MyImage.to_rgb-278"><span class="linenos">278</span></a><span class="sd">        Convert image to RGB.</span>
</span><span id="MyImage.to_rgb-279"><a href="#MyImage.to_rgb-279"><span class="linenos">279</span></a>
</span><span id="MyImage.to_rgb-280"><a href="#MyImage.to_rgb-280"><span class="linenos">280</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.to_rgb-281"><a href="#MyImage.to_rgb-281"><span class="linenos">281</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.to_rgb-282"><a href="#MyImage.to_rgb-282"><span class="linenos">282</span></a><span class="sd">        itype : str, optional, default is &#39;24bit&#39;</span>
</span><span id="MyImage.to_rgb-283"><a href="#MyImage.to_rgb-283"><span class="linenos">283</span></a><span class="sd">            The image is converted to standard RGB image = 24bit = 3*8bit.</span>
</span><span id="MyImage.to_rgb-284"><a href="#MyImage.to_rgb-284"><span class="linenos">284</span></a><span class="sd">            Only the standard 24bit RGB images are supported at the moment.</span>
</span><span id="MyImage.to_rgb-285"><a href="#MyImage.to_rgb-285"><span class="linenos">285</span></a>
</span><span id="MyImage.to_rgb-286"><a href="#MyImage.to_rgb-286"><span class="linenos">286</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.to_rgb-287"><a href="#MyImage.to_rgb-287"><span class="linenos">287</span></a><span class="sd">        -------</span>
</span><span id="MyImage.to_rgb-288"><a href="#MyImage.to_rgb-288"><span class="linenos">288</span></a><span class="sd">        None</span>
</span><span id="MyImage.to_rgb-289"><a href="#MyImage.to_rgb-289"><span class="linenos">289</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="MyImage.to_rgb-290"><a href="#MyImage.to_rgb-290"><span class="linenos">290</span></a><span class="sd">            </span>
</span><span id="MyImage.to_rgb-291"><a href="#MyImage.to_rgb-291"><span class="linenos">291</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.to_rgb-292"><a href="#MyImage.to_rgb-292"><span class="linenos">292</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.to_rgb-293"><a href="#MyImage.to_rgb-293"><span class="linenos">293</span></a><span class="sd">        * Standard RGB format = 24bit RGB = 8 bits for each of (R,G,B) values.</span>
</span><span id="MyImage.to_rgb-294"><a href="#MyImage.to_rgb-294"><span class="linenos">294</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="MyImage.to_rgb-295"><a href="#MyImage.to_rgb-295"><span class="linenos">295</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="MyImage.to_rgb-296"><a href="#MyImage.to_rgb-296"><span class="linenos">296</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="MyImage.to_rgb-297"><a href="#MyImage.to_rgb-297"><span class="linenos">297</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.to_rgb-298"><a href="#MyImage.to_rgb-298"><span class="linenos">298</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;24bit&#39;</span><span class="p">:</span>
</span><span id="MyImage.to_rgb-299"><a href="#MyImage.to_rgb-299"><span class="linenos">299</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="MyImage.to_rgb-300"><a href="#MyImage.to_rgb-300"><span class="linenos">300</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_rgb-301"><a href="#MyImage.to_rgb-301"><span class="linenos">301</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.to_rgb-302"><a href="#MyImage.to_rgb-302"><span class="linenos">302</span></a>            <span class="c1"># Conversion to non-standard RGB formats not supported.</span>
</span><span id="MyImage.to_rgb-303"><a href="#MyImage.to_rgb-303"><span class="linenos">303</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Only standard 24-bit RGB images are supported.&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_rgb-304"><a href="#MyImage.to_rgb-304"><span class="linenos">304</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Convert image to RGB.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>itype</strong> (str, optional, default is '24bit'):
The image is converted to standard RGB image = 24bit = 3*8bit.
Only the standard 24bit RGB images are supported at the moment.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: Te output is saved in self.img.</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Standard RGB format = 24bit RGB = 8 bits for each of (R,G,B) values.</li>
<li>Other (non-standard) RGB formats are not supported at the moment.</li>
<li>RGB formats: <a href="https://en.wikipedia.org">https://en.wikipedia.org</a> -> RGB color formats</li>
<li>Pillow: <a href="https://pillow.readthedocs.io">https://pillow.readthedocs.io</a> -> Handbook - Concepts - Modes</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.to_rgba" class="classattr">
                                        <input id="MyImage.to_rgba-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_rgba</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">itype</span><span class="o">=</span><span class="s1">&#39;32bit&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.to_rgba-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.to_rgba"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.to_rgba-307"><a href="#MyImage.to_rgba-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">to_rgba</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">itype</span><span class="o">=</span><span class="s1">&#39;32bit&#39;</span><span class="p">):</span>
</span><span id="MyImage.to_rgba-308"><a href="#MyImage.to_rgba-308"><span class="linenos">308</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.to_rgba-309"><a href="#MyImage.to_rgba-309"><span class="linenos">309</span></a><span class="sd">        Convert image to RGBA.</span>
</span><span id="MyImage.to_rgba-310"><a href="#MyImage.to_rgba-310"><span class="linenos">310</span></a>
</span><span id="MyImage.to_rgba-311"><a href="#MyImage.to_rgba-311"><span class="linenos">311</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.to_rgba-312"><a href="#MyImage.to_rgba-312"><span class="linenos">312</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.to_rgba-313"><a href="#MyImage.to_rgba-313"><span class="linenos">313</span></a><span class="sd">        itype : str, optional, default is &#39;32bit&#39;</span>
</span><span id="MyImage.to_rgba-314"><a href="#MyImage.to_rgba-314"><span class="linenos">314</span></a><span class="sd">            The image is converted to standard RGBA image = 32bit = 3*8+8bit.</span>
</span><span id="MyImage.to_rgba-315"><a href="#MyImage.to_rgba-315"><span class="linenos">315</span></a><span class="sd">            Only the standard 32bit RGBA images are supported at the moment.</span>
</span><span id="MyImage.to_rgba-316"><a href="#MyImage.to_rgba-316"><span class="linenos">316</span></a>
</span><span id="MyImage.to_rgba-317"><a href="#MyImage.to_rgba-317"><span class="linenos">317</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.to_rgba-318"><a href="#MyImage.to_rgba-318"><span class="linenos">318</span></a><span class="sd">        -------</span>
</span><span id="MyImage.to_rgba-319"><a href="#MyImage.to_rgba-319"><span class="linenos">319</span></a><span class="sd">        None</span>
</span><span id="MyImage.to_rgba-320"><a href="#MyImage.to_rgba-320"><span class="linenos">320</span></a><span class="sd">            Te output is saved in self.img.</span>
</span><span id="MyImage.to_rgba-321"><a href="#MyImage.to_rgba-321"><span class="linenos">321</span></a><span class="sd">            </span>
</span><span id="MyImage.to_rgba-322"><a href="#MyImage.to_rgba-322"><span class="linenos">322</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.to_rgba-323"><a href="#MyImage.to_rgba-323"><span class="linenos">323</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.to_rgba-324"><a href="#MyImage.to_rgba-324"><span class="linenos">324</span></a><span class="sd">        * Standard RGBA format = 32bit RGBA = 8bits (R,G,B) + 8bit alpha.</span>
</span><span id="MyImage.to_rgba-325"><a href="#MyImage.to_rgba-325"><span class="linenos">325</span></a><span class="sd">        * Other (non-standard) RGB formats are not supported at the moment.</span>
</span><span id="MyImage.to_rgba-326"><a href="#MyImage.to_rgba-326"><span class="linenos">326</span></a><span class="sd">        * RGB formats: https://en.wikipedia.org -&gt; RGB color formats</span>
</span><span id="MyImage.to_rgba-327"><a href="#MyImage.to_rgba-327"><span class="linenos">327</span></a><span class="sd">        * Pillow: https://pillow.readthedocs.io -&gt; Handbook - Concepts - Modes</span>
</span><span id="MyImage.to_rgba-328"><a href="#MyImage.to_rgba-328"><span class="linenos">328</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.to_rgba-329"><a href="#MyImage.to_rgba-329"><span class="linenos">329</span></a>        <span class="k">if</span> <span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;32bit&#39;</span><span class="p">:</span>
</span><span id="MyImage.to_rgba-330"><a href="#MyImage.to_rgba-330"><span class="linenos">330</span></a>            <span class="c1"># Conversion to 24-bit RGB.</span>
</span><span id="MyImage.to_rgba-331"><a href="#MyImage.to_rgba-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_rgba-332"><a href="#MyImage.to_rgba-332"><span class="linenos">332</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.to_rgba-333"><a href="#MyImage.to_rgba-333"><span class="linenos">333</span></a>            <span class="c1"># Conversion to non-standard RGBA formats not supported.</span>
</span><span id="MyImage.to_rgba-334"><a href="#MyImage.to_rgba-334"><span class="linenos">334</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown image type when converting to RGBA!&#39;</span><span class="p">)</span>
</span><span id="MyImage.to_rgba-335"><a href="#MyImage.to_rgba-335"><span class="linenos">335</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original image was not changed.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Convert image to RGBA.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>itype</strong> (str, optional, default is '32bit'):
The image is converted to standard RGBA image = 32bit = 3*8+8bit.
Only the standard 32bit RGBA images are supported at the moment.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: Te output is saved in self.img.</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Standard RGBA format = 32bit RGBA = 8bits (R,G,B) + 8bit alpha.</li>
<li>Other (non-standard) RGB formats are not supported at the moment.</li>
<li>RGB formats: <a href="https://en.wikipedia.org">https://en.wikipedia.org</a> -> RGB color formats</li>
<li>Pillow: <a href="https://pillow.readthedocs.io">https://pillow.readthedocs.io</a> -> Handbook - Concepts - Modes</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.cut" class="classattr">
                                        <input id="MyImage.cut-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cut</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">height_of_bar</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.cut-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.cut"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.cut-338"><a href="#MyImage.cut-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height_of_bar</span><span class="p">):</span>
</span><span id="MyImage.cut-339"><a href="#MyImage.cut-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.cut-340"><a href="#MyImage.cut-340"><span class="linenos">340</span></a><span class="sd">        Cut off lower bar with given height.</span>
</span><span id="MyImage.cut-341"><a href="#MyImage.cut-341"><span class="linenos">341</span></a>
</span><span id="MyImage.cut-342"><a href="#MyImage.cut-342"><span class="linenos">342</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.cut-343"><a href="#MyImage.cut-343"><span class="linenos">343</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.cut-344"><a href="#MyImage.cut-344"><span class="linenos">344</span></a><span class="sd">        height_of_bar : int</span>
</span><span id="MyImage.cut-345"><a href="#MyImage.cut-345"><span class="linenos">345</span></a><span class="sd">            Height of the lower bar to cut.</span>
</span><span id="MyImage.cut-346"><a href="#MyImage.cut-346"><span class="linenos">346</span></a><span class="sd">            Lower bars are typical of many microscopic images.</span>
</span><span id="MyImage.cut-347"><a href="#MyImage.cut-347"><span class="linenos">347</span></a><span class="sd">            A lower bar contains information from given microscope,</span>
</span><span id="MyImage.cut-348"><a href="#MyImage.cut-348"><span class="linenos">348</span></a><span class="sd">            but it is usually removed when preparing the image for publication.</span>
</span><span id="MyImage.cut-349"><a href="#MyImage.cut-349"><span class="linenos">349</span></a>
</span><span id="MyImage.cut-350"><a href="#MyImage.cut-350"><span class="linenos">350</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.cut-351"><a href="#MyImage.cut-351"><span class="linenos">351</span></a><span class="sd">        -------</span>
</span><span id="MyImage.cut-352"><a href="#MyImage.cut-352"><span class="linenos">352</span></a><span class="sd">        None</span>
</span><span id="MyImage.cut-353"><a href="#MyImage.cut-353"><span class="linenos">353</span></a><span class="sd">            The output is saved in self.img.</span>
</span><span id="MyImage.cut-354"><a href="#MyImage.cut-354"><span class="linenos">354</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.cut-355"><a href="#MyImage.cut-355"><span class="linenos">355</span></a>        <span class="c1"># Cut off lower bar</span>
</span><span id="MyImage.cut-356"><a href="#MyImage.cut-356"><span class="linenos">356</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span>
</span><span id="MyImage.cut-357"><a href="#MyImage.cut-357"><span class="linenos">357</span></a>            <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">height_of_bar</span><span class="p">))</span>
</span><span id="MyImage.cut-358"><a href="#MyImage.cut-358"><span class="linenos">358</span></a>        <span class="c1"># Update image size</span>
</span><span id="MyImage.cut-359"><a href="#MyImage.cut-359"><span class="linenos">359</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span></pre></div>


            <div class="docstring"><p>Cut off lower bar with given height.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>height_of_bar</strong> (int):
Height of the lower bar to cut.
Lower bars are typical of many microscopic images.
A lower bar contains information from given microscope,
but it is usually removed when preparing the image for publication.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is saved in self.img.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.crop" class="classattr">
                                        <input id="MyImage.crop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">crop</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">rectangle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.crop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.crop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.crop-362"><a href="#MyImage.crop-362"><span class="linenos">362</span></a>    <span class="k">def</span> <span class="nf">crop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">):</span>
</span><span id="MyImage.crop-363"><a href="#MyImage.crop-363"><span class="linenos">363</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.crop-364"><a href="#MyImage.crop-364"><span class="linenos">364</span></a><span class="sd">        Crop image = keep just selected rectangular area.</span>
</span><span id="MyImage.crop-365"><a href="#MyImage.crop-365"><span class="linenos">365</span></a>
</span><span id="MyImage.crop-366"><a href="#MyImage.crop-366"><span class="linenos">366</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.crop-367"><a href="#MyImage.crop-367"><span class="linenos">367</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.crop-368"><a href="#MyImage.crop-368"><span class="linenos">368</span></a><span class="sd">        rectangle : tuple of four integers</span>
</span><span id="MyImage.crop-369"><a href="#MyImage.crop-369"><span class="linenos">369</span></a><span class="sd">            Tuple (X1,Y1,X2,Y2),</span>
</span><span id="MyImage.crop-370"><a href="#MyImage.crop-370"><span class="linenos">370</span></a><span class="sd">            where X1,Y1 = coordinates of upper left corner</span>
</span><span id="MyImage.crop-371"><a href="#MyImage.crop-371"><span class="linenos">371</span></a><span class="sd">            and X2,Y2 = coordinates of lower right corner.</span>
</span><span id="MyImage.crop-372"><a href="#MyImage.crop-372"><span class="linenos">372</span></a>
</span><span id="MyImage.crop-373"><a href="#MyImage.crop-373"><span class="linenos">373</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.crop-374"><a href="#MyImage.crop-374"><span class="linenos">374</span></a><span class="sd">        -------</span>
</span><span id="MyImage.crop-375"><a href="#MyImage.crop-375"><span class="linenos">375</span></a><span class="sd">        None</span>
</span><span id="MyImage.crop-376"><a href="#MyImage.crop-376"><span class="linenos">376</span></a><span class="sd">            The output is saved in *self.img*.</span>
</span><span id="MyImage.crop-377"><a href="#MyImage.crop-377"><span class="linenos">377</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.crop-378"><a href="#MyImage.crop-378"><span class="linenos">378</span></a>        <span class="c1"># Crop image</span>
</span><span id="MyImage.crop-379"><a href="#MyImage.crop-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">rectangle</span><span class="p">)</span>
</span><span id="MyImage.crop-380"><a href="#MyImage.crop-380"><span class="linenos">380</span></a>        <span class="c1"># Update image size</span>
</span><span id="MyImage.crop-381"><a href="#MyImage.crop-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span>
</span></pre></div>


            <div class="docstring"><p>Crop image = keep just selected rectangular area.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>rectangle</strong> (tuple of four integers):
Tuple (X1,Y1,X2,Y2),
where X1,Y1 = coordinates of upper left corner
and X2,Y2 = coordinates of lower right corner.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is saved in <em>self.img</em>.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.resize" class="classattr">
                                        <input id="MyImage.resize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">width</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">height</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">resample</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.resize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.resize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.resize-384"><a href="#MyImage.resize-384"><span class="linenos">384</span></a>    <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="MyImage.resize-385"><a href="#MyImage.resize-385"><span class="linenos">385</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.resize-386"><a href="#MyImage.resize-386"><span class="linenos">386</span></a><span class="sd">        Resize image to new width or height, keeping the aspect ratio.</span>
</span><span id="MyImage.resize-387"><a href="#MyImage.resize-387"><span class="linenos">387</span></a><span class="sd">    </span>
</span><span id="MyImage.resize-388"><a href="#MyImage.resize-388"><span class="linenos">388</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.resize-389"><a href="#MyImage.resize-389"><span class="linenos">389</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.resize-390"><a href="#MyImage.resize-390"><span class="linenos">390</span></a><span class="sd">        width : int, optional, default is None</span>
</span><span id="MyImage.resize-391"><a href="#MyImage.resize-391"><span class="linenos">391</span></a><span class="sd">            The required width of the resized image.</span>
</span><span id="MyImage.resize-392"><a href="#MyImage.resize-392"><span class="linenos">392</span></a><span class="sd">            The height will be calculated</span>
</span><span id="MyImage.resize-393"><a href="#MyImage.resize-393"><span class="linenos">393</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="MyImage.resize-394"><a href="#MyImage.resize-394"><span class="linenos">394</span></a><span class="sd">        height : int, optional, default is None</span>
</span><span id="MyImage.resize-395"><a href="#MyImage.resize-395"><span class="linenos">395</span></a><span class="sd">            The required height of the resized image.</span>
</span><span id="MyImage.resize-396"><a href="#MyImage.resize-396"><span class="linenos">396</span></a><span class="sd">            The width will be calculated</span>
</span><span id="MyImage.resize-397"><a href="#MyImage.resize-397"><span class="linenos">397</span></a><span class="sd">            so that the aspect ratio was preserved.</span>
</span><span id="MyImage.resize-398"><a href="#MyImage.resize-398"><span class="linenos">398</span></a><span class="sd">        resample : int or None</span>
</span><span id="MyImage.resize-399"><a href="#MyImage.resize-399"><span class="linenos">399</span></a><span class="sd">            If None, default resampling filter is used (usually Ok).</span>
</span><span id="MyImage.resize-400"><a href="#MyImage.resize-400"><span class="linenos">400</span></a><span class="sd">            It is also possible to define a specific resampling filter.</span>
</span><span id="MyImage.resize-401"><a href="#MyImage.resize-401"><span class="linenos">401</span></a><span class="sd">            For sharp images or plots we may prefer no resampling and </span>
</span><span id="MyImage.resize-402"><a href="#MyImage.resize-402"><span class="linenos">402</span></a><span class="sd">            we can use *resampling = 0 = Image.Resampling.NEAREST*.</span>
</span><span id="MyImage.resize-403"><a href="#MyImage.resize-403"><span class="linenos">403</span></a><span class="sd">            More: https://pillow.readthedocs.io -&gt; Reference -&gt; Image -&gt; resize</span>
</span><span id="MyImage.resize-404"><a href="#MyImage.resize-404"><span class="linenos">404</span></a><span class="sd">            </span>
</span><span id="MyImage.resize-405"><a href="#MyImage.resize-405"><span class="linenos">405</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.resize-406"><a href="#MyImage.resize-406"><span class="linenos">406</span></a><span class="sd">        -------</span>
</span><span id="MyImage.resize-407"><a href="#MyImage.resize-407"><span class="linenos">407</span></a><span class="sd">        None</span>
</span><span id="MyImage.resize-408"><a href="#MyImage.resize-408"><span class="linenos">408</span></a><span class="sd">            The output is saved in *self.img*</span>
</span><span id="MyImage.resize-409"><a href="#MyImage.resize-409"><span class="linenos">409</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.resize-410"><a href="#MyImage.resize-410"><span class="linenos">410</span></a>        <span class="c1"># (0) Calculate AR = aspect_ratio</span>
</span><span id="MyImage.resize-411"><a href="#MyImage.resize-411"><span class="linenos">411</span></a>        <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span>
</span><span id="MyImage.resize-412"><a href="#MyImage.resize-412"><span class="linenos">412</span></a>        
</span><span id="MyImage.resize-413"><a href="#MyImage.resize-413"><span class="linenos">413</span></a>        <span class="c1"># (1) Calculate new dimensions while keeping aspect_ratio</span>
</span><span id="MyImage.resize-414"><a href="#MyImage.resize-414"><span class="linenos">414</span></a>        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>     <span class="c1"># New dimensions if the width is given</span>
</span><span id="MyImage.resize-415"><a href="#MyImage.resize-415"><span class="linenos">415</span></a>            <span class="n">new_width</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
</span><span id="MyImage.resize-416"><a href="#MyImage.resize-416"><span class="linenos">416</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="MyImage.resize-417"><a href="#MyImage.resize-417"><span class="linenos">417</span></a>        <span class="k">elif</span> <span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># New dimensions if the height is given</span>
</span><span id="MyImage.resize-418"><a href="#MyImage.resize-418"><span class="linenos">418</span></a>            <span class="n">new_height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
</span><span id="MyImage.resize-419"><a href="#MyImage.resize-419"><span class="linenos">419</span></a>            <span class="n">new_width</span>  <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="mi">1</span><span class="o">/</span><span class="n">aspect_ratio</span><span class="p">)</span>
</span><span id="MyImage.resize-420"><a href="#MyImage.resize-420"><span class="linenos">420</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.resize-421"><a href="#MyImage.resize-421"><span class="linenos">421</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Image resize: width or height was not given - no action!&#39;</span><span class="p">)</span>
</span><span id="MyImage.resize-422"><a href="#MyImage.resize-422"><span class="linenos">422</span></a>            <span class="k">return</span>
</span><span id="MyImage.resize-423"><a href="#MyImage.resize-423"><span class="linenos">423</span></a>        
</span><span id="MyImage.resize-424"><a href="#MyImage.resize-424"><span class="linenos">424</span></a>        <span class="c1"># (2) Update image dimensions</span>
</span><span id="MyImage.resize-425"><a href="#MyImage.resize-425"><span class="linenos">425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="n">new_width</span>
</span><span id="MyImage.resize-426"><a href="#MyImage.resize-426"><span class="linenos">426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">new_height</span> 
</span><span id="MyImage.resize-427"><a href="#MyImage.resize-427"><span class="linenos">427</span></a>        
</span><span id="MyImage.resize-428"><a href="#MyImage.resize-428"><span class="linenos">428</span></a>        <span class="c1"># (2) Resize the image</span>
</span><span id="MyImage.resize-429"><a href="#MyImage.resize-429"><span class="linenos">429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
</span><span id="MyImage.resize-430"><a href="#MyImage.resize-430"><span class="linenos">430</span></a>            <span class="p">(</span><span class="n">new_width</span><span class="p">,</span> <span class="n">new_height</span><span class="p">),</span> <span class="n">resample</span><span class="o">=</span><span class="n">resample</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Resize image to new width or height, keeping the aspect ratio.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>width</strong> (int, optional, default is None):
The required width of the resized image.
The height will be calculated
so that the aspect ratio was preserved.</li>
<li><strong>height</strong> (int, optional, default is None):
The required height of the resized image.
The width will be calculated
so that the aspect ratio was preserved.</li>
<li><strong>resample</strong> (int or None):
If None, default resampling filter is used (usually Ok).
It is also possible to define a specific resampling filter.
For sharp images or plots we may prefer no resampling and 
we can use <em>resampling = 0 = Image.Resampling.NEAREST</em>.
More: <a href="https://pillow.readthedocs.io">https://pillow.readthedocs.io</a> -> Reference -> Image -> resize</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is saved in <em>self.img</em></li>
</ul>
</div>


                            </div>
                            <div id="MyImage.autocontrast" class="classattr">
                                        <input id="MyImage.autocontrast-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">autocontrast</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.autocontrast-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.autocontrast"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.autocontrast-433"><a href="#MyImage.autocontrast-433"><span class="linenos">433</span></a>    <span class="k">def</span> <span class="nf">autocontrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage.autocontrast-434"><a href="#MyImage.autocontrast-434"><span class="linenos">434</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.autocontrast-435"><a href="#MyImage.autocontrast-435"><span class="linenos">435</span></a><span class="sd">        Enhance image contrast (using PIL.ImageOps.autocontrast function).</span>
</span><span id="MyImage.autocontrast-436"><a href="#MyImage.autocontrast-436"><span class="linenos">436</span></a>
</span><span id="MyImage.autocontrast-437"><a href="#MyImage.autocontrast-437"><span class="linenos">437</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.autocontrast-438"><a href="#MyImage.autocontrast-438"><span class="linenos">438</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.autocontrast-439"><a href="#MyImage.autocontrast-439"><span class="linenos">439</span></a><span class="sd">        **kwargs : dict</span>
</span><span id="MyImage.autocontrast-440"><a href="#MyImage.autocontrast-440"><span class="linenos">440</span></a><span class="sd">            Any arguments of PIL.ImageOps.autocontrast function.</span>
</span><span id="MyImage.autocontrast-441"><a href="#MyImage.autocontrast-441"><span class="linenos">441</span></a>
</span><span id="MyImage.autocontrast-442"><a href="#MyImage.autocontrast-442"><span class="linenos">442</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.autocontrast-443"><a href="#MyImage.autocontrast-443"><span class="linenos">443</span></a><span class="sd">        -------</span>
</span><span id="MyImage.autocontrast-444"><a href="#MyImage.autocontrast-444"><span class="linenos">444</span></a><span class="sd">        None</span>
</span><span id="MyImage.autocontrast-445"><a href="#MyImage.autocontrast-445"><span class="linenos">445</span></a><span class="sd">            The modified image is saved in self.img object.</span>
</span><span id="MyImage.autocontrast-446"><a href="#MyImage.autocontrast-446"><span class="linenos">446</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.autocontrast-447"><a href="#MyImage.autocontrast-447"><span class="linenos">447</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">autocontrast</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Enhance image contrast (using PIL.ImageOps.autocontrast function).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>**kwargs</strong> (dict):
Any arguments of PIL.ImageOps.autocontrast function.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The modified image is saved in self.img object.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.label" class="classattr">
                                        <input id="MyImage.label-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">label</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">label</span>, </span><span class="param"><span class="n">F</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.label-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.label"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.label-450"><a href="#MyImage.label-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage.label-451"><a href="#MyImage.label-451"><span class="linenos">451</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.label-452"><a href="#MyImage.label-452"><span class="linenos">452</span></a><span class="sd">        Insert a one-letter label in the upper left corner of an image. </span>
</span><span id="MyImage.label-453"><a href="#MyImage.label-453"><span class="linenos">453</span></a>
</span><span id="MyImage.label-454"><a href="#MyImage.label-454"><span class="linenos">454</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.label-455"><a href="#MyImage.label-455"><span class="linenos">455</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.label-456"><a href="#MyImage.label-456"><span class="linenos">456</span></a><span class="sd">        label : str</span>
</span><span id="MyImage.label-457"><a href="#MyImage.label-457"><span class="linenos">457</span></a><span class="sd">            One letter label that will be inserted in the upper left corner.</span>
</span><span id="MyImage.label-458"><a href="#MyImage.label-458"><span class="linenos">458</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="MyImage.label-459"><a href="#MyImage.label-459"><span class="linenos">459</span></a><span class="sd">            Multiplication coefficient/factor that changes the label size.</span>
</span><span id="MyImage.label-460"><a href="#MyImage.label-460"><span class="linenos">460</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="MyImage.label-461"><a href="#MyImage.label-461"><span class="linenos">461</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage.label-462"><a href="#MyImage.label-462"><span class="linenos">462</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage.label-463"><a href="#MyImage.label-463"><span class="linenos">463</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="MyImage.label-464"><a href="#MyImage.label-464"><span class="linenos">464</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="MyImage.label-465"><a href="#MyImage.label-465"><span class="linenos">465</span></a><span class="sd">            </span>
</span><span id="MyImage.label-466"><a href="#MyImage.label-466"><span class="linenos">466</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.label-467"><a href="#MyImage.label-467"><span class="linenos">467</span></a><span class="sd">        -------</span>
</span><span id="MyImage.label-468"><a href="#MyImage.label-468"><span class="linenos">468</span></a><span class="sd">        None</span>
</span><span id="MyImage.label-469"><a href="#MyImage.label-469"><span class="linenos">469</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="MyImage.label-470"><a href="#MyImage.label-470"><span class="linenos">470</span></a>
</span><span id="MyImage.label-471"><a href="#MyImage.label-471"><span class="linenos">471</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage.label-472"><a href="#MyImage.label-472"><span class="linenos">472</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage.label-473"><a href="#MyImage.label-473"><span class="linenos">473</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage.label-474"><a href="#MyImage.label-474"><span class="linenos">474</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="MyImage.label-475"><a href="#MyImage.label-475"><span class="linenos">475</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage.label-476"><a href="#MyImage.label-476"><span class="linenos">476</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage.label-477"><a href="#MyImage.label-477"><span class="linenos">477</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage.label-478"><a href="#MyImage.label-478"><span class="linenos">478</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="MyImage.label-479"><a href="#MyImage.label-479"><span class="linenos">479</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage.label-480"><a href="#MyImage.label-480"><span class="linenos">480</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage.label-481"><a href="#MyImage.label-481"><span class="linenos">481</span></a>
</span><span id="MyImage.label-482"><a href="#MyImage.label-482"><span class="linenos">482</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.label-483"><a href="#MyImage.label-483"><span class="linenos">483</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.label-484"><a href="#MyImage.label-484"><span class="linenos">484</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage.label-485"><a href="#MyImage.label-485"><span class="linenos">485</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage.label-486"><a href="#MyImage.label-486"><span class="linenos">486</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage.label-487"><a href="#MyImage.label-487"><span class="linenos">487</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage.label-488"><a href="#MyImage.label-488"><span class="linenos">488</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage.label-489"><a href="#MyImage.label-489"><span class="linenos">489</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="MyImage.label-490"><a href="#MyImage.label-490"><span class="linenos">490</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage.label-491"><a href="#MyImage.label-491"><span class="linenos">491</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="MyImage.label-492"><a href="#MyImage.label-492"><span class="linenos">492</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage.label-493"><a href="#MyImage.label-493"><span class="linenos">493</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage.label-494"><a href="#MyImage.label-494"><span class="linenos">494</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage.label-495"><a href="#MyImage.label-495"><span class="linenos">495</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.label-496"><a href="#MyImage.label-496"><span class="linenos">496</span></a>        
</span><span id="MyImage.label-497"><a href="#MyImage.label-497"><span class="linenos">497</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage.label-498"><a href="#MyImage.label-498"><span class="linenos">498</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage.label-499"><a href="#MyImage.label-499"><span class="linenos">499</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage.label-500"><a href="#MyImage.label-500"><span class="linenos">500</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">label</span> <span class="k">as</span> <span class="n">my_label</span>
</span><span id="MyImage.label-501"><a href="#MyImage.label-501"><span class="linenos">501</span></a>        <span class="n">my_label</span><span class="o">.</span><span class="n">insert_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Insert a one-letter label in the upper left corner of an image. </p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>label</strong> (str):
One letter label that will be inserted in the upper left corner.</li>
<li><strong>F</strong> (float, optional, default is None):
Multiplication coefficient/factor that changes the label size.
If F = 1.2, then all label parameters are enlarged 1.2 times.</li>
<li><strong>kwargs</strong> (list of keyword arguments):
Allowed keyword arguments are:
color, bcolor, position, stripes, messages.
See section <em>List of allowed kwargs</em> for detailed descriptions.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The label is drawn directly to <em>self.img</em>.</li>
</ul>

<h6 id="list-of-allowed-kwargs">List of allowed kwargs</h6>

<ul>
<li>color : PIL color specification, default is 'black'.
Text color = color of the label text.
The default is defined in <a href="settings.html#Caption">myimg.settings.Caption</a>
(and that is why it does not have to be re-defined here).</li>
<li>bcolor : PIL color specification, default is 'white'.
Background color = color of the label background/box.
The default is defined in <a href="settings.html#Caption">myimg.settings.Caption</a>
(and that is why it does not have to be re-defined here).</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Transparent background:
To set transparent background,
set optional/keyword argument bcolor='transparent'.
It is not enough to omit bcolor,
because all omitted keyword arguments
are set to their defaults defined in Settings.Label.
In the case of omitted bcolor argument, the default is 'white'. </li>
<li>Color label in grayscale image:
To set color label in grayscale image,
it is necessary to convert image to RGB;
otherwise the colored label would be converted to grayscale.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.caption" class="classattr">
                                        <input id="MyImage.caption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">caption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">F</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.caption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.caption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.caption-504"><a href="#MyImage.caption-504"><span class="linenos">504</span></a>    <span class="k">def</span> <span class="nf">caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage.caption-505"><a href="#MyImage.caption-505"><span class="linenos">505</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.caption-506"><a href="#MyImage.caption-506"><span class="linenos">506</span></a><span class="sd">        Insert a one-line textual description at the bottom of an image. </span>
</span><span id="MyImage.caption-507"><a href="#MyImage.caption-507"><span class="linenos">507</span></a>
</span><span id="MyImage.caption-508"><a href="#MyImage.caption-508"><span class="linenos">508</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.caption-509"><a href="#MyImage.caption-509"><span class="linenos">509</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.caption-510"><a href="#MyImage.caption-510"><span class="linenos">510</span></a><span class="sd">        text : str</span>
</span><span id="MyImage.caption-511"><a href="#MyImage.caption-511"><span class="linenos">511</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="MyImage.caption-512"><a href="#MyImage.caption-512"><span class="linenos">512</span></a><span class="sd">        F : float, optional, default is None</span>
</span><span id="MyImage.caption-513"><a href="#MyImage.caption-513"><span class="linenos">513</span></a><span class="sd">            Multiplication coefficient/factor that changes the text size.</span>
</span><span id="MyImage.caption-514"><a href="#MyImage.caption-514"><span class="linenos">514</span></a><span class="sd">            If F = 1.2, then all label parameters are enlarged 1.2 times.</span>
</span><span id="MyImage.caption-515"><a href="#MyImage.caption-515"><span class="linenos">515</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage.caption-516"><a href="#MyImage.caption-516"><span class="linenos">516</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage.caption-517"><a href="#MyImage.caption-517"><span class="linenos">517</span></a><span class="sd">            color, bcolor, messages.</span>
</span><span id="MyImage.caption-518"><a href="#MyImage.caption-518"><span class="linenos">518</span></a><span class="sd">            See section *List of allowed kwargs* for detailed descriptions.</span>
</span><span id="MyImage.caption-519"><a href="#MyImage.caption-519"><span class="linenos">519</span></a><span class="sd">            </span>
</span><span id="MyImage.caption-520"><a href="#MyImage.caption-520"><span class="linenos">520</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.caption-521"><a href="#MyImage.caption-521"><span class="linenos">521</span></a><span class="sd">        -------</span>
</span><span id="MyImage.caption-522"><a href="#MyImage.caption-522"><span class="linenos">522</span></a><span class="sd">        None</span>
</span><span id="MyImage.caption-523"><a href="#MyImage.caption-523"><span class="linenos">523</span></a><span class="sd">            The label is drawn directly to *self.img*.</span>
</span><span id="MyImage.caption-524"><a href="#MyImage.caption-524"><span class="linenos">524</span></a>
</span><span id="MyImage.caption-525"><a href="#MyImage.caption-525"><span class="linenos">525</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage.caption-526"><a href="#MyImage.caption-526"><span class="linenos">526</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage.caption-527"><a href="#MyImage.caption-527"><span class="linenos">527</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage.caption-528"><a href="#MyImage.caption-528"><span class="linenos">528</span></a><span class="sd">            Text color = color of the label text.</span>
</span><span id="MyImage.caption-529"><a href="#MyImage.caption-529"><span class="linenos">529</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage.caption-530"><a href="#MyImage.caption-530"><span class="linenos">530</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage.caption-531"><a href="#MyImage.caption-531"><span class="linenos">531</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage.caption-532"><a href="#MyImage.caption-532"><span class="linenos">532</span></a><span class="sd">            Background color = color of the label background/box.</span>
</span><span id="MyImage.caption-533"><a href="#MyImage.caption-533"><span class="linenos">533</span></a><span class="sd">            The default is defined in myimg.settings.Caption</span>
</span><span id="MyImage.caption-534"><a href="#MyImage.caption-534"><span class="linenos">534</span></a><span class="sd">            (and that is why it does not have to be re-defined here).</span>
</span><span id="MyImage.caption-535"><a href="#MyImage.caption-535"><span class="linenos">535</span></a><span class="sd">        * align : int or str</span>
</span><span id="MyImage.caption-536"><a href="#MyImage.caption-536"><span class="linenos">536</span></a><span class="sd">            This parameter determines the alignment of the figure caption.</span>
</span><span id="MyImage.caption-537"><a href="#MyImage.caption-537"><span class="linenos">537</span></a><span class="sd">            If align = integer,</span>
</span><span id="MyImage.caption-538"><a href="#MyImage.caption-538"><span class="linenos">538</span></a><span class="sd">            x_position of the caption is {align} pixels from left.</span>
</span><span id="MyImage.caption-539"><a href="#MyImage.caption-539"><span class="linenos">539</span></a><span class="sd">            If align = string,</span>
</span><span id="MyImage.caption-540"><a href="#MyImage.caption-540"><span class="linenos">540</span></a><span class="sd">            it can be either &#39;left&#39; or &#39;Left&#39; or &#39;&#39;</span>
</span><span id="MyImage.caption-541"><a href="#MyImage.caption-541"><span class="linenos">541</span></a>
</span><span id="MyImage.caption-542"><a href="#MyImage.caption-542"><span class="linenos">542</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.caption-543"><a href="#MyImage.caption-543"><span class="linenos">543</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.caption-544"><a href="#MyImage.caption-544"><span class="linenos">544</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage.caption-545"><a href="#MyImage.caption-545"><span class="linenos">545</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage.caption-546"><a href="#MyImage.caption-546"><span class="linenos">546</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage.caption-547"><a href="#MyImage.caption-547"><span class="linenos">547</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage.caption-548"><a href="#MyImage.caption-548"><span class="linenos">548</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage.caption-549"><a href="#MyImage.caption-549"><span class="linenos">549</span></a><span class="sd">          are set to their defaults defined in Settings.Label.</span>
</span><span id="MyImage.caption-550"><a href="#MyImage.caption-550"><span class="linenos">550</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage.caption-551"><a href="#MyImage.caption-551"><span class="linenos">551</span></a><span class="sd">        * Color label in grayscale image:</span>
</span><span id="MyImage.caption-552"><a href="#MyImage.caption-552"><span class="linenos">552</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage.caption-553"><a href="#MyImage.caption-553"><span class="linenos">553</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage.caption-554"><a href="#MyImage.caption-554"><span class="linenos">554</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage.caption-555"><a href="#MyImage.caption-555"><span class="linenos">555</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.caption-556"><a href="#MyImage.caption-556"><span class="linenos">556</span></a>        
</span><span id="MyImage.caption-557"><a href="#MyImage.caption-557"><span class="linenos">557</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage.caption-558"><a href="#MyImage.caption-558"><span class="linenos">558</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage.caption-559"><a href="#MyImage.caption-559"><span class="linenos">559</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage.caption-560"><a href="#MyImage.caption-560"><span class="linenos">560</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">caption</span> <span class="k">as</span> <span class="n">my_caption</span>
</span><span id="MyImage.caption-561"><a href="#MyImage.caption-561"><span class="linenos">561</span></a>        <span class="n">my_caption</span><span class="o">.</span><span class="n">insert_caption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Insert a one-line textual description at the bottom of an image. </p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>text</strong> (str):
A short text that will be inserted at the bottom of an image.</li>
<li><strong>F</strong> (float, optional, default is None):
Multiplication coefficient/factor that changes the text size.
If F = 1.2, then all label parameters are enlarged 1.2 times.</li>
<li><strong>kwargs</strong> (list of keyword arguments):
Allowed keyword arguments are:
color, bcolor, messages.
See section <em>List of allowed kwargs</em> for detailed descriptions.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The label is drawn directly to <em>self.img</em>.</li>
</ul>

<h6 id="list-of-allowed-kwargs">List of allowed kwargs</h6>

<ul>
<li>color : PIL color specification, default is 'black'.
Text color = color of the label text.
The default is defined in <a href="settings.html#Caption">myimg.settings.Caption</a>
(and that is why it does not have to be re-defined here).</li>
<li>bcolor : PIL color specification, default is 'white'.
Background color = color of the label background/box.
The default is defined in <a href="settings.html#Caption">myimg.settings.Caption</a>
(and that is why it does not have to be re-defined here).</li>
<li>align : int or str
This parameter determines the alignment of the figure caption.
If align = integer,
x_position of the caption is {align} pixels from left.
If align = string,
it can be either 'left' or 'Left' or ''</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Transparent background:
To set transparent background,
set optional/keyword argument bcolor='transparent'.
It is not enough to omit bcolor,
because all omitted keyword arguments
are set to their defaults defined in Settings.Label.
In the case of omitted bcolor argument, the default is 'white'. </li>
<li>Color label in grayscale image:
To set color label in grayscale image,
it is necessary to convert image to RGB;
otherwise the colored label would be converted to grayscale.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.border" class="classattr">
                                        <input id="MyImage.border-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">border</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">border</span><span class="o">=</span><span class="mi">1</span>, </span><span class="param"><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.border-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.border"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.border-564"><a href="#MyImage.border-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">border</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
</span><span id="MyImage.border-565"><a href="#MyImage.border-565"><span class="linenos">565</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.border-566"><a href="#MyImage.border-566"><span class="linenos">566</span></a><span class="sd">        Draw a border around an image. </span>
</span><span id="MyImage.border-567"><a href="#MyImage.border-567"><span class="linenos">567</span></a>
</span><span id="MyImage.border-568"><a href="#MyImage.border-568"><span class="linenos">568</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.border-569"><a href="#MyImage.border-569"><span class="linenos">569</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.border-570"><a href="#MyImage.border-570"><span class="linenos">570</span></a><span class="sd">        border : int or tuple, optional, default is 1</span>
</span><span id="MyImage.border-571"><a href="#MyImage.border-571"><span class="linenos">571</span></a><span class="sd">            Int = the same thickness of border around all four edges.</span>
</span><span id="MyImage.border-572"><a href="#MyImage.border-572"><span class="linenos">572</span></a><span class="sd">            Tuple of 2 ints = (left/righ and top/bottom) border sizes.</span>
</span><span id="MyImage.border-573"><a href="#MyImage.border-573"><span class="linenos">573</span></a><span class="sd">            Tuple of 4 ints = (left, top, right, bottom) border sizes. </span>
</span><span id="MyImage.border-574"><a href="#MyImage.border-574"><span class="linenos">574</span></a><span class="sd">        color : PIL color specification, default is &#39;black&#39;</span>
</span><span id="MyImage.border-575"><a href="#MyImage.border-575"><span class="linenos">575</span></a><span class="sd">            A short text that will be inserted at the bottom of an image.</span>
</span><span id="MyImage.border-576"><a href="#MyImage.border-576"><span class="linenos">576</span></a><span class="sd">        &#39;&#39;&#39;</span>        
</span><span id="MyImage.border-577"><a href="#MyImage.border-577"><span class="linenos">577</span></a>        <span class="c1"># (0) In the future, we may add border with shadow</span>
</span><span id="MyImage.border-578"><a href="#MyImage.border-578"><span class="linenos">578</span></a>        <span class="c1"># Now we add just simple border using PIL.ImageOps.expand.</span>
</span><span id="MyImage.border-579"><a href="#MyImage.border-579"><span class="linenos">579</span></a>        
</span><span id="MyImage.border-580"><a href="#MyImage.border-580"><span class="linenos">580</span></a>        <span class="c1"># (1) Add border</span>
</span><span id="MyImage.border-581"><a href="#MyImage.border-581"><span class="linenos">581</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span> <span class="o">=</span> <span class="n">ImageOps</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">border</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="MyImage.border-582"><a href="#MyImage.border-582"><span class="linenos">582</span></a>        
</span><span id="MyImage.border-583"><a href="#MyImage.border-583"><span class="linenos">583</span></a>        <span class="c1"># (2) Update MyImage properties = width and height</span>
</span><span id="MyImage.border-584"><a href="#MyImage.border-584"><span class="linenos">584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="MyImage.border-585"><a href="#MyImage.border-585"><span class="linenos">585</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Draw a border around an image. </p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>border</strong> (int or tuple, optional, default is 1):
Int = the same thickness of border around all four edges.
Tuple of 2 ints = (left/righ and top/bottom) border sizes.
Tuple of 4 ints = (left, top, right, bottom) border sizes.</li>
<li><strong>color</strong> (PIL color specification, default is 'black'):
A short text that will be inserted at the bottom of an image.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.scalebar" class="classattr">
                                        <input id="MyImage.scalebar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">scalebar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pixsize</span>, </span><span class="param"><span class="n">F</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.scalebar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.scalebar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.scalebar-588"><a href="#MyImage.scalebar-588"><span class="linenos">588</span></a>    <span class="k">def</span> <span class="nf">scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="MyImage.scalebar-589"><a href="#MyImage.scalebar-589"><span class="linenos">589</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.scalebar-590"><a href="#MyImage.scalebar-590"><span class="linenos">590</span></a><span class="sd">        Insert a scalebar in the lower right corner of the image.</span>
</span><span id="MyImage.scalebar-591"><a href="#MyImage.scalebar-591"><span class="linenos">591</span></a>
</span><span id="MyImage.scalebar-592"><a href="#MyImage.scalebar-592"><span class="linenos">592</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.scalebar-593"><a href="#MyImage.scalebar-593"><span class="linenos">593</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.scalebar-594"><a href="#MyImage.scalebar-594"><span class="linenos">594</span></a><span class="sd">        pixsize : str</span>
</span><span id="MyImage.scalebar-595"><a href="#MyImage.scalebar-595"><span class="linenos">595</span></a><span class="sd">            Description how to determine pixel size.</span>
</span><span id="MyImage.scalebar-596"><a href="#MyImage.scalebar-596"><span class="linenos">596</span></a><span class="sd">            Pixel size is needed to calculate the scalebar length.</span>
</span><span id="MyImage.scalebar-597"><a href="#MyImage.scalebar-597"><span class="linenos">597</span></a><span class="sd">            See *Example* section below to see available options.</span>
</span><span id="MyImage.scalebar-598"><a href="#MyImage.scalebar-598"><span class="linenos">598</span></a><span class="sd">        F : float, optional, the default is None</span>
</span><span id="MyImage.scalebar-599"><a href="#MyImage.scalebar-599"><span class="linenos">599</span></a><span class="sd">            Multiplication coefficient/factor that changes the scalebar size.</span>
</span><span id="MyImage.scalebar-600"><a href="#MyImage.scalebar-600"><span class="linenos">600</span></a><span class="sd">            If F = 1.2, then all scalebar parameters are enlarged 1.2 times.</span>
</span><span id="MyImage.scalebar-601"><a href="#MyImage.scalebar-601"><span class="linenos">601</span></a><span class="sd">        kwargs : list of keyword arguments</span>
</span><span id="MyImage.scalebar-602"><a href="#MyImage.scalebar-602"><span class="linenos">602</span></a><span class="sd">            Allowed keyword arguments are:</span>
</span><span id="MyImage.scalebar-603"><a href="#MyImage.scalebar-603"><span class="linenos">603</span></a><span class="sd">            color, bcolor, position, stripes, messages.</span>
</span><span id="MyImage.scalebar-604"><a href="#MyImage.scalebar-604"><span class="linenos">604</span></a><span class="sd">            See section *List of allowed kwargs* below for more info. </span>
</span><span id="MyImage.scalebar-605"><a href="#MyImage.scalebar-605"><span class="linenos">605</span></a><span class="sd">            </span>
</span><span id="MyImage.scalebar-606"><a href="#MyImage.scalebar-606"><span class="linenos">606</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.scalebar-607"><a href="#MyImage.scalebar-607"><span class="linenos">607</span></a><span class="sd">        -------</span>
</span><span id="MyImage.scalebar-608"><a href="#MyImage.scalebar-608"><span class="linenos">608</span></a><span class="sd">        None</span>
</span><span id="MyImage.scalebar-609"><a href="#MyImage.scalebar-609"><span class="linenos">609</span></a><span class="sd">            The scalebar is drawn directly to *self.img*.</span>
</span><span id="MyImage.scalebar-610"><a href="#MyImage.scalebar-610"><span class="linenos">610</span></a><span class="sd">            </span>
</span><span id="MyImage.scalebar-611"><a href="#MyImage.scalebar-611"><span class="linenos">611</span></a><span class="sd">        Example</span>
</span><span id="MyImage.scalebar-612"><a href="#MyImage.scalebar-612"><span class="linenos">612</span></a><span class="sd">        -------</span>
</span><span id="MyImage.scalebar-613"><a href="#MyImage.scalebar-613"><span class="linenos">613</span></a><span class="sd">        &gt;&gt;&gt; # Four basic ways how to insert a scalebar in an image</span>
</span><span id="MyImage.scalebar-614"><a href="#MyImage.scalebar-614"><span class="linenos">614</span></a><span class="sd">        &gt;&gt;&gt; # (model example; in real life we use just one of the ways</span>
</span><span id="MyImage.scalebar-615"><a href="#MyImage.scalebar-615"><span class="linenos">615</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage.scalebar-616"><a href="#MyImage.scalebar-616"><span class="linenos">616</span></a><span class="sd">        &gt;&gt;&gt; # (0) Import api + read image</span>
</span><span id="MyImage.scalebar-617"><a href="#MyImage.scalebar-617"><span class="linenos">617</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="MyImage.scalebar-618"><a href="#MyImage.scalebar-618"><span class="linenos">618</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/image123_20kx.bmp&#39;)</span>
</span><span id="MyImage.scalebar-619"><a href="#MyImage.scalebar-619"><span class="linenos">619</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage.scalebar-620"><a href="#MyImage.scalebar-620"><span class="linenos">620</span></a><span class="sd">        &gt;&gt;&gt; # (1) Pixel size from real width of image = 100um</span>
</span><span id="MyImage.scalebar-621"><a href="#MyImage.scalebar-621"><span class="linenos">621</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;rwi,100um&#39;)</span>
</span><span id="MyImage.scalebar-622"><a href="#MyImage.scalebar-622"><span class="linenos">622</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage.scalebar-623"><a href="#MyImage.scalebar-623"><span class="linenos">623</span></a><span class="sd">        &gt;&gt;&gt; # (2) Pixel size from a known length in image =&gt; 50 nm = 202 pixels</span>
</span><span id="MyImage.scalebar-624"><a href="#MyImage.scalebar-624"><span class="linenos">624</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;knl,50nm,202&#39;)</span>
</span><span id="MyImage.scalebar-625"><a href="#MyImage.scalebar-625"><span class="linenos">625</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage.scalebar-626"><a href="#MyImage.scalebar-626"><span class="linenos">626</span></a><span class="sd">        &gt;&gt;&gt; # (3) Pixel size from known magnification</span>
</span><span id="MyImage.scalebar-627"><a href="#MyImage.scalebar-627"><span class="linenos">627</span></a><span class="sd">        &gt;&gt;&gt; # (note: this can be done only for calibrated microscope</span>
</span><span id="MyImage.scalebar-628"><a href="#MyImage.scalebar-628"><span class="linenos">628</span></a><span class="sd">        &gt;&gt;&gt; # (calibrated microscopes =&gt; myimg.settings.MicCalibrations</span>
</span><span id="MyImage.scalebar-629"><a href="#MyImage.scalebar-629"><span class="linenos">629</span></a><span class="sd">        &gt;&gt;&gt; # (3a) magnification deduced from last part of image name</span>
</span><span id="MyImage.scalebar-630"><a href="#MyImage.scalebar-630"><span class="linenos">630</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag = everything between last underscore and suffix</span>
</span><span id="MyImage.scalebar-631"><a href="#MyImage.scalebar-631"><span class="linenos">631</span></a><span class="sd">        &gt;&gt;&gt; # (in this example we have: ../IMG/image123_20kx.bmp =&gt; mag = 20kx</span>
</span><span id="MyImage.scalebar-632"><a href="#MyImage.scalebar-632"><span class="linenos">632</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta&#39;)</span>
</span><span id="MyImage.scalebar-633"><a href="#MyImage.scalebar-633"><span class="linenos">633</span></a><span class="sd">        &gt;&gt;&gt; # (3b) magnification inserted directly</span>
</span><span id="MyImage.scalebar-634"><a href="#MyImage.scalebar-634"><span class="linenos">634</span></a><span class="sd">        &gt;&gt;&gt; # (note: mag can be something like 20kx, 20k, 20000x, 20000</span>
</span><span id="MyImage.scalebar-635"><a href="#MyImage.scalebar-635"><span class="linenos">635</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;mag,TecnaiVeleta,20kx&#39;)</span>
</span><span id="MyImage.scalebar-636"><a href="#MyImage.scalebar-636"><span class="linenos">636</span></a><span class="sd">        &gt;&gt;&gt;</span>
</span><span id="MyImage.scalebar-637"><a href="#MyImage.scalebar-637"><span class="linenos">637</span></a><span class="sd">        &gt;&gt;&gt; # (4) Pixel size from accompanying text file</span>
</span><span id="MyImage.scalebar-638"><a href="#MyImage.scalebar-638"><span class="linenos">638</span></a><span class="sd">        &gt;&gt;&gt; # (note: some microscopes save images + descriptive txt files</span>
</span><span id="MyImage.scalebar-639"><a href="#MyImage.scalebar-639"><span class="linenos">639</span></a><span class="sd">        &gt;&gt;&gt; # (the format of text file must be described somehow</span>
</span><span id="MyImage.scalebar-640"><a href="#MyImage.scalebar-640"><span class="linenos">640</span></a><span class="sd">        &gt;&gt;&gt; # (description of text files =&gt; myimg.settings.MicDescriptionFiles</span>
</span><span id="MyImage.scalebar-641"><a href="#MyImage.scalebar-641"><span class="linenos">641</span></a><span class="sd">        &gt;&gt;&gt; img.scalebar(&#39;txt,MAIA3&#39;)</span>
</span><span id="MyImage.scalebar-642"><a href="#MyImage.scalebar-642"><span class="linenos">642</span></a><span class="sd">        &gt;&gt;&gt; </span>
</span><span id="MyImage.scalebar-643"><a href="#MyImage.scalebar-643"><span class="linenos">643</span></a>
</span><span id="MyImage.scalebar-644"><a href="#MyImage.scalebar-644"><span class="linenos">644</span></a><span class="sd">        List of allowed kwargs</span>
</span><span id="MyImage.scalebar-645"><a href="#MyImage.scalebar-645"><span class="linenos">645</span></a><span class="sd">        ----------------------</span>
</span><span id="MyImage.scalebar-646"><a href="#MyImage.scalebar-646"><span class="linenos">646</span></a><span class="sd">        * color : PIL color specification, default is &#39;black&#39;.</span>
</span><span id="MyImage.scalebar-647"><a href="#MyImage.scalebar-647"><span class="linenos">647</span></a><span class="sd">            Text color = color of the scalebar text and line.</span>
</span><span id="MyImage.scalebar-648"><a href="#MyImage.scalebar-648"><span class="linenos">648</span></a><span class="sd">        * bcolor : PIL color specification, default is &#39;white&#39;.</span>
</span><span id="MyImage.scalebar-649"><a href="#MyImage.scalebar-649"><span class="linenos">649</span></a><span class="sd">            Background color = color of the scalebar background/box.</span>
</span><span id="MyImage.scalebar-650"><a href="#MyImage.scalebar-650"><span class="linenos">650</span></a><span class="sd">        * length : str, default is None.</span>
</span><span id="MyImage.scalebar-651"><a href="#MyImage.scalebar-651"><span class="linenos">651</span></a><span class="sd">            If length is given (using a string such as &#39;100um&#39;,&#39;1.2nm&#39;)</span>
</span><span id="MyImage.scalebar-652"><a href="#MyImage.scalebar-652"><span class="linenos">652</span></a><span class="sd">            then the lenght fixed at given value and not calculated by the</span>
</span><span id="MyImage.scalebar-653"><a href="#MyImage.scalebar-653"><span class="linenos">653</span></a><span class="sd">            program (calculation would yield some reasonable lenght of</span>
</span><span id="MyImage.scalebar-654"><a href="#MyImage.scalebar-654"><span class="linenos">654</span></a><span class="sd">            scalebar around 1/6 of the image width; this default is saved</span>
</span><span id="MyImage.scalebar-655"><a href="#MyImage.scalebar-655"><span class="linenos">655</span></a><span class="sd">            in myimg.settings.Scalebar.length property - which can be changed).</span>
</span><span id="MyImage.scalebar-656"><a href="#MyImage.scalebar-656"><span class="linenos">656</span></a><span class="sd">        * position : list or tuple or None, default is None.</span>
</span><span id="MyImage.scalebar-657"><a href="#MyImage.scalebar-657"><span class="linenos">657</span></a><span class="sd">            If position = None, the scalebar is drawn</span>
</span><span id="MyImage.scalebar-658"><a href="#MyImage.scalebar-658"><span class="linenos">658</span></a><span class="sd">            at the default position in the lower-right corner of the image.</span>
</span><span id="MyImage.scalebar-659"><a href="#MyImage.scalebar-659"><span class="linenos">659</span></a><span class="sd">            If position = (X,Y) = list or tuple of two integers,</span>
</span><span id="MyImage.scalebar-660"><a href="#MyImage.scalebar-660"><span class="linenos">660</span></a><span class="sd">            the scalebar is drawn at position X,Y of the image.</span>
</span><span id="MyImage.scalebar-661"><a href="#MyImage.scalebar-661"><span class="linenos">661</span></a><span class="sd">        * stripes : bool or int, default is False.</span>
</span><span id="MyImage.scalebar-662"><a href="#MyImage.scalebar-662"><span class="linenos">662</span></a><span class="sd">            If stripes = False, draw standard scalebar.</span>
</span><span id="MyImage.scalebar-663"><a href="#MyImage.scalebar-663"><span class="linenos">663</span></a><span class="sd">            If stripes = True or 1, draw scalebar with 5 stripes.</span>
</span><span id="MyImage.scalebar-664"><a href="#MyImage.scalebar-664"><span class="linenos">664</span></a><span class="sd">            If stripes = N, where N&gt;=2, draw striped scalebar with N stripes.</span>
</span><span id="MyImage.scalebar-665"><a href="#MyImage.scalebar-665"><span class="linenos">665</span></a><span class="sd">        * messages : bool, default is False.</span>
</span><span id="MyImage.scalebar-666"><a href="#MyImage.scalebar-666"><span class="linenos">666</span></a><span class="sd">            If messages=True, print info about program run.</span>
</span><span id="MyImage.scalebar-667"><a href="#MyImage.scalebar-667"><span class="linenos">667</span></a><span class="sd">        </span>
</span><span id="MyImage.scalebar-668"><a href="#MyImage.scalebar-668"><span class="linenos">668</span></a><span class="sd">        Technical notes</span>
</span><span id="MyImage.scalebar-669"><a href="#MyImage.scalebar-669"><span class="linenos">669</span></a><span class="sd">        ---------------</span>
</span><span id="MyImage.scalebar-670"><a href="#MyImage.scalebar-670"><span class="linenos">670</span></a><span class="sd">        * Transparent background:</span>
</span><span id="MyImage.scalebar-671"><a href="#MyImage.scalebar-671"><span class="linenos">671</span></a><span class="sd">          To set transparent background,</span>
</span><span id="MyImage.scalebar-672"><a href="#MyImage.scalebar-672"><span class="linenos">672</span></a><span class="sd">          set optional/keyword argument bcolor=&#39;transparent&#39;.</span>
</span><span id="MyImage.scalebar-673"><a href="#MyImage.scalebar-673"><span class="linenos">673</span></a><span class="sd">          It is not enough to omit bcolor,</span>
</span><span id="MyImage.scalebar-674"><a href="#MyImage.scalebar-674"><span class="linenos">674</span></a><span class="sd">          because all omitted keyword arguments</span>
</span><span id="MyImage.scalebar-675"><a href="#MyImage.scalebar-675"><span class="linenos">675</span></a><span class="sd">          are set to their defaults defined in Settings.Scalebar.</span>
</span><span id="MyImage.scalebar-676"><a href="#MyImage.scalebar-676"><span class="linenos">676</span></a><span class="sd">          In the case of omitted bcolor argument, the default is &#39;white&#39;. </span>
</span><span id="MyImage.scalebar-677"><a href="#MyImage.scalebar-677"><span class="linenos">677</span></a><span class="sd">        * Color scalebar in grayscale image:</span>
</span><span id="MyImage.scalebar-678"><a href="#MyImage.scalebar-678"><span class="linenos">678</span></a><span class="sd">          To set color label in grayscale image,</span>
</span><span id="MyImage.scalebar-679"><a href="#MyImage.scalebar-679"><span class="linenos">679</span></a><span class="sd">          it is necessary to convert image to RGB;</span>
</span><span id="MyImage.scalebar-680"><a href="#MyImage.scalebar-680"><span class="linenos">680</span></a><span class="sd">          otherwise the colored label would be converted to grayscale.</span>
</span><span id="MyImage.scalebar-681"><a href="#MyImage.scalebar-681"><span class="linenos">681</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.scalebar-682"><a href="#MyImage.scalebar-682"><span class="linenos">682</span></a>        
</span><span id="MyImage.scalebar-683"><a href="#MyImage.scalebar-683"><span class="linenos">683</span></a>        <span class="c1"># The complete code of this method is long. </span>
</span><span id="MyImage.scalebar-684"><a href="#MyImage.scalebar-684"><span class="linenos">684</span></a>        <span class="c1"># Therefore, the code has been moved to its own module.</span>
</span><span id="MyImage.scalebar-685"><a href="#MyImage.scalebar-685"><span class="linenos">685</span></a>        <span class="c1"># This method is a wrapper calling the function in the external module. </span>
</span><span id="MyImage.scalebar-686"><a href="#MyImage.scalebar-686"><span class="linenos">686</span></a>        <span class="kn">from</span> <span class="nn">myimg.utils</span> <span class="kn">import</span> <span class="n">scalebar</span> <span class="k">as</span> <span class="n">my_scalebar</span>
</span><span id="MyImage.scalebar-687"><a href="#MyImage.scalebar-687"><span class="linenos">687</span></a>        <span class="n">my_scalebar</span><span class="o">.</span><span class="n">insert_scalebar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixsize</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Insert a scalebar in the lower right corner of the image.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>pixsize</strong> (str):
Description how to determine pixel size.
Pixel size is needed to calculate the scalebar length.
See <em>Example</em> section below to see available options.</li>
<li><strong>F</strong> (float, optional, the default is None):
Multiplication coefficient/factor that changes the scalebar size.
If F = 1.2, then all scalebar parameters are enlarged 1.2 times.</li>
<li><strong>kwargs</strong> (list of keyword arguments):
Allowed keyword arguments are:
color, bcolor, position, stripes, messages.
See section <em>List of allowed kwargs</em> below for more info.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The scalebar is drawn directly to <em>self.img</em>.</li>
</ul>

<h6 id="example">Example</h6>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Four basic ways how to insert a scalebar in an image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (model example; in real life we use just one of the ways</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (0) Import api + read image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">myimage.api</span> <span class="k">as</span> <span class="nn">mi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">mi</span><span class="o">.</span><span class="n">MyImage</span><span class="p">(</span><span class="s1">&#39;../IMG/image123_20kx.bmp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (1) Pixel size from real width of image = 100um</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;rwi,100um&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (2) Pixel size from a known length in image =&gt; 50 nm = 202 pixels</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;knl,50nm,202&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (3) Pixel size from known magnification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (note: this can be done only for calibrated microscope</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (calibrated microscopes =&gt; <a href="settings.html#MicCalibrations">myimg.settings.MicCalibrations</a></span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (3a) magnification deduced from last part of image name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (note: mag = everything between last underscore and suffix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (in this example we have: ../IMG/image123_20kx.bmp =&gt; mag = 20kx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;mag,TecnaiVeleta&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (3b) magnification inserted directly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (note: mag can be something like 20kx, 20k, 20000x, 20000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;mag,TecnaiVeleta,20kx&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (4) Pixel size from accompanying text file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (note: some microscopes save images + descriptive txt files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (the format of text file must be described somehow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (description of text files =&gt; <a href="settings.html#MicDescriptionFiles">myimg.settings.MicDescriptionFiles</a></span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">scalebar</span><span class="p">(</span><span class="s1">&#39;txt,MAIA3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
</code></pre>
</div>

<h6 id="list-of-allowed-kwargs">List of allowed kwargs</h6>

<ul>
<li>color : PIL color specification, default is 'black'.
Text color = color of the scalebar text and line.</li>
<li>bcolor : PIL color specification, default is 'white'.
Background color = color of the scalebar background/box.</li>
<li>length : str, default is None.
If length is given (using a string such as '100um','1.2nm')
then the lenght fixed at given value and not calculated by the
program (calculation would yield some reasonable lenght of
scalebar around 1/6 of the image width; this default is saved
in myimg.settings.Scalebar.length property - which can be changed).</li>
<li>position : list or tuple or None, default is None.
If position = None, the scalebar is drawn
at the default position in the lower-right corner of the image.
If position = (X,Y) = list or tuple of two integers,
the scalebar is drawn at position X,Y of the image.</li>
<li>stripes : bool or int, default is False.
If stripes = False, draw standard scalebar.
If stripes = True or 1, draw scalebar with 5 stripes.
If stripes = N, where N>=2, draw striped scalebar with N stripes.</li>
<li>messages : bool, default is False.
If messages=True, print info about program run.</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Transparent background:
To set transparent background,
set optional/keyword argument bcolor='transparent'.
It is not enough to omit bcolor,
because all omitted keyword arguments
are set to their defaults defined in Settings.Scalebar.
In the case of omitted bcolor argument, the default is 'white'. </li>
<li>Color scalebar in grayscale image:
To set color label in grayscale image,
it is necessary to convert image to RGB;
otherwise the colored label would be converted to grayscale.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.show" class="classattr">
                                        <input id="MyImage.show-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">show</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cmap</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">axes</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">iscale</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.show-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.show"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.show-690"><a href="#MyImage.show-690"><span class="linenos">690</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">iscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="MyImage.show-691"><a href="#MyImage.show-691"><span class="linenos">691</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.show-692"><a href="#MyImage.show-692"><span class="linenos">692</span></a><span class="sd">        Show image.</span>
</span><span id="MyImage.show-693"><a href="#MyImage.show-693"><span class="linenos">693</span></a>
</span><span id="MyImage.show-694"><a href="#MyImage.show-694"><span class="linenos">694</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.show-695"><a href="#MyImage.show-695"><span class="linenos">695</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.show-696"><a href="#MyImage.show-696"><span class="linenos">696</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="MyImage.show-697"><a href="#MyImage.show-697"><span class="linenos">697</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="MyImage.show-698"><a href="#MyImage.show-698"><span class="linenos">698</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="MyImage.show-699"><a href="#MyImage.show-699"><span class="linenos">699</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="MyImage.show-700"><a href="#MyImage.show-700"><span class="linenos">700</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="MyImage.show-701"><a href="#MyImage.show-701"><span class="linenos">701</span></a>
</span><span id="MyImage.show-702"><a href="#MyImage.show-702"><span class="linenos">702</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.show-703"><a href="#MyImage.show-703"><span class="linenos">703</span></a><span class="sd">        -------</span>
</span><span id="MyImage.show-704"><a href="#MyImage.show-704"><span class="linenos">704</span></a><span class="sd">        None</span>
</span><span id="MyImage.show-705"><a href="#MyImage.show-705"><span class="linenos">705</span></a><span class="sd">            The output is the image shown on the screen.</span>
</span><span id="MyImage.show-706"><a href="#MyImage.show-706"><span class="linenos">706</span></a>
</span><span id="MyImage.show-707"><a href="#MyImage.show-707"><span class="linenos">707</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.show-708"><a href="#MyImage.show-708"><span class="linenos">708</span></a>        <span class="c1"># Grayscale images require special treatment</span>
</span><span id="MyImage.show-709"><a href="#MyImage.show-709"><span class="linenos">709</span></a>        <span class="n">grayscale_image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span>
</span><span id="MyImage.show-710"><a href="#MyImage.show-710"><span class="linenos">710</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span><span class="p">:</span>
</span><span id="MyImage.show-711"><a href="#MyImage.show-711"><span class="linenos">711</span></a>            <span class="c1"># If not specified explicitly, cmap should be gray.</span>
</span><span id="MyImage.show-712"><a href="#MyImage.show-712"><span class="linenos">712</span></a>            <span class="k">if</span> <span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span>
</span><span id="MyImage.show-713"><a href="#MyImage.show-713"><span class="linenos">713</span></a>            <span class="c1"># If not required, grayscale images should not be autoscaled.</span>
</span><span id="MyImage.show-714"><a href="#MyImage.show-714"><span class="linenos">714</span></a>            <span class="k">if</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="MyImage.show-715"><a href="#MyImage.show-715"><span class="linenos">715</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-8bit</span>
</span><span id="MyImage.show-716"><a href="#MyImage.show-716"><span class="linenos">716</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
</span><span id="MyImage.show-717"><a href="#MyImage.show-717"><span class="linenos">717</span></a>                <span class="c1"># ...limits for non-intensity-autoscaled grayscale-16bit</span>
</span><span id="MyImage.show-718"><a href="#MyImage.show-718"><span class="linenos">718</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray16&#39;</span><span class="p">:</span> <span class="n">imin</span><span class="p">,</span><span class="n">imax</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">65535</span><span class="p">)</span>
</span><span id="MyImage.show-719"><a href="#MyImage.show-719"><span class="linenos">719</span></a>        <span class="c1"># Do not show axes if axes = False</span>
</span><span id="MyImage.show-720"><a href="#MyImage.show-720"><span class="linenos">720</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="MyImage.show-721"><a href="#MyImage.show-721"><span class="linenos">721</span></a>        <span class="c1"># Plot the image</span>
</span><span id="MyImage.show-722"><a href="#MyImage.show-722"><span class="linenos">722</span></a>        <span class="c1"># ...intensity of grayscale images should not be autoscaled</span>
</span><span id="MyImage.show-723"><a href="#MyImage.show-723"><span class="linenos">723</span></a>        <span class="k">if</span> <span class="n">grayscale_image</span> <span class="ow">and</span> <span class="n">iscale</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="MyImage.show-724"><a href="#MyImage.show-724"><span class="linenos">724</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">imin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">imax</span><span class="p">)</span>
</span><span id="MyImage.show-725"><a href="#MyImage.show-725"><span class="linenos">725</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyImage.show-726"><a href="#MyImage.show-726"><span class="linenos">726</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="MyImage.show-727"><a href="#MyImage.show-727"><span class="linenos">727</span></a>        <span class="c1"># Show the plot </span>
</span><span id="MyImage.show-728"><a href="#MyImage.show-728"><span class="linenos">728</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Show image.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cmap</strong> (matplotlib colormap name, optional, default is None):
Matplotlib colormap name.
If omitted and we have grayscale image, then we use cmap=gray.</li>
<li><strong>axes</strong> (bool, optional, default is False):
If axes=False (default), do not show axes around the image.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is the image shown on the screen.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.save" class="classattr">
                                        <input id="MyImage.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">output_image</span>, </span><span class="param"><span class="n">dpi</span><span class="o">=</span><span class="mi">300</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.save-731"><a href="#MyImage.save-731"><span class="linenos">731</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyImage.save-732"><a href="#MyImage.save-732"><span class="linenos">732</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.save-733"><a href="#MyImage.save-733"><span class="linenos">733</span></a><span class="sd">        Save image using arbitrary output dir, name and extension.</span>
</span><span id="MyImage.save-734"><a href="#MyImage.save-734"><span class="linenos">734</span></a>
</span><span id="MyImage.save-735"><a href="#MyImage.save-735"><span class="linenos">735</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.save-736"><a href="#MyImage.save-736"><span class="linenos">736</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.save-737"><a href="#MyImage.save-737"><span class="linenos">737</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="MyImage.save-738"><a href="#MyImage.save-738"><span class="linenos">738</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="MyImage.save-739"><a href="#MyImage.save-739"><span class="linenos">739</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="MyImage.save-740"><a href="#MyImage.save-740"><span class="linenos">740</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyImage.save-741"><a href="#MyImage.save-741"><span class="linenos">741</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="MyImage.save-742"><a href="#MyImage.save-742"><span class="linenos">742</span></a>
</span><span id="MyImage.save-743"><a href="#MyImage.save-743"><span class="linenos">743</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.save-744"><a href="#MyImage.save-744"><span class="linenos">744</span></a><span class="sd">        -------</span>
</span><span id="MyImage.save-745"><a href="#MyImage.save-745"><span class="linenos">745</span></a><span class="sd">        None</span>
</span><span id="MyImage.save-746"><a href="#MyImage.save-746"><span class="linenos">746</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="MyImage.save-747"><a href="#MyImage.save-747"><span class="linenos">747</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.save-748"><a href="#MyImage.save-748"><span class="linenos">748</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Save image using arbitrary output dir, name and extension.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>output_image</strong> (str or path-like object):
Filename of the output image.
The format of saved image is guessed from the extension.</li>
<li><strong>dpi</strong> (int, optional, default is 300):
The dpi of the saved image.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is the saved *output_image*.</li>
</ul>
</div>


                            </div>
                            <div id="MyImage.save_with_extension" class="classattr">
                                        <input id="MyImage.save_with_extension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_with_extension</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">my_extension</span>, </span><span class="param"><span class="n">dpi</span><span class="o">=</span><span class="mi">300</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyImage.save_with_extension-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyImage.save_with_extension"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyImage.save_with_extension-751"><a href="#MyImage.save_with_extension-751"><span class="linenos">751</span></a>    <span class="k">def</span> <span class="nf">save_with_extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_extension</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyImage.save_with_extension-752"><a href="#MyImage.save_with_extension-752"><span class="linenos">752</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyImage.save_with_extension-753"><a href="#MyImage.save_with_extension-753"><span class="linenos">753</span></a><span class="sd">        Save image in the same dir with slightly modified name and extension.</span>
</span><span id="MyImage.save_with_extension-754"><a href="#MyImage.save_with_extension-754"><span class="linenos">754</span></a>
</span><span id="MyImage.save_with_extension-755"><a href="#MyImage.save_with_extension-755"><span class="linenos">755</span></a><span class="sd">        Parameters</span>
</span><span id="MyImage.save_with_extension-756"><a href="#MyImage.save_with_extension-756"><span class="linenos">756</span></a><span class="sd">        ----------</span>
</span><span id="MyImage.save_with_extension-757"><a href="#MyImage.save_with_extension-757"><span class="linenos">757</span></a><span class="sd">        my_extension : str</span>
</span><span id="MyImage.save_with_extension-758"><a href="#MyImage.save_with_extension-758"><span class="linenos">758</span></a><span class="sd">            Specific extension of the output image.</span>
</span><span id="MyImage.save_with_extension-759"><a href="#MyImage.save_with_extension-759"><span class="linenos">759</span></a><span class="sd">            The argument my_extension can extend image name</span>
</span><span id="MyImage.save_with_extension-760"><a href="#MyImage.save_with_extension-760"><span class="linenos">760</span></a><span class="sd">            + modify image extension/format;</span>
</span><span id="MyImage.save_with_extension-761"><a href="#MyImage.save_with_extension-761"><span class="linenos">761</span></a><span class="sd">            see the example below.</span>
</span><span id="MyImage.save_with_extension-762"><a href="#MyImage.save_with_extension-762"><span class="linenos">762</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyImage.save_with_extension-763"><a href="#MyImage.save_with_extension-763"><span class="linenos">763</span></a><span class="sd">            The dpi of the saved image.</span>
</span><span id="MyImage.save_with_extension-764"><a href="#MyImage.save_with_extension-764"><span class="linenos">764</span></a><span class="sd">            </span>
</span><span id="MyImage.save_with_extension-765"><a href="#MyImage.save_with_extension-765"><span class="linenos">765</span></a><span class="sd">        Returns</span>
</span><span id="MyImage.save_with_extension-766"><a href="#MyImage.save_with_extension-766"><span class="linenos">766</span></a><span class="sd">        -------</span>
</span><span id="MyImage.save_with_extension-767"><a href="#MyImage.save_with_extension-767"><span class="linenos">767</span></a><span class="sd">        None</span>
</span><span id="MyImage.save_with_extension-768"><a href="#MyImage.save_with_extension-768"><span class="linenos">768</span></a><span class="sd">            The output is the saved output image with *my_extension*.</span>
</span><span id="MyImage.save_with_extension-769"><a href="#MyImage.save_with_extension-769"><span class="linenos">769</span></a><span class="sd">        </span>
</span><span id="MyImage.save_with_extension-770"><a href="#MyImage.save_with_extension-770"><span class="linenos">770</span></a><span class="sd">        Example</span>
</span><span id="MyImage.save_with_extension-771"><a href="#MyImage.save_with_extension-771"><span class="linenos">771</span></a><span class="sd">        -------</span>
</span><span id="MyImage.save_with_extension-772"><a href="#MyImage.save_with_extension-772"><span class="linenos">772</span></a><span class="sd">        &gt;&gt;&gt; import myimage.api as mi</span>
</span><span id="MyImage.save_with_extension-773"><a href="#MyImage.save_with_extension-773"><span class="linenos">773</span></a><span class="sd">        &gt;&gt;&gt; # Open image</span>
</span><span id="MyImage.save_with_extension-774"><a href="#MyImage.save_with_extension-774"><span class="linenos">774</span></a><span class="sd">        &gt;&gt;&gt; img = mi.MyImage(&#39;../IMG/somefile.bmp&#39;)</span>
</span><span id="MyImage.save_with_extension-775"><a href="#MyImage.save_with_extension-775"><span class="linenos">775</span></a><span class="sd">        &gt;&gt;&gt; # Cut off lower bar </span>
</span><span id="MyImage.save_with_extension-776"><a href="#MyImage.save_with_extension-776"><span class="linenos">776</span></a><span class="sd">        &gt;&gt;&gt; img.cut(60)</span>
</span><span id="MyImage.save_with_extension-777"><a href="#MyImage.save_with_extension-777"><span class="linenos">777</span></a><span class="sd">        &gt;&gt;&gt; # Save the image as: &#39;../IMG/somefile_cut.png&#39;)</span>
</span><span id="MyImage.save_with_extension-778"><a href="#MyImage.save_with_extension-778"><span class="linenos">778</span></a><span class="sd">        &gt;&gt;&gt; img.save_with_ext(&#39;_cut.png&#39;)</span>
</span><span id="MyImage.save_with_extension-779"><a href="#MyImage.save_with_extension-779"><span class="linenos">779</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyImage.save_with_extension-780"><a href="#MyImage.save_with_extension-780"><span class="linenos">780</span></a>        <span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">ext</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="MyImage.save_with_extension-781"><a href="#MyImage.save_with_extension-781"><span class="linenos">781</span></a>        <span class="n">output_image</span> <span class="o">=</span> <span class="n">file</span> <span class="o">+</span> <span class="n">my_extension</span>
</span><span id="MyImage.save_with_extension-782"><a href="#MyImage.save_with_extension-782"><span class="linenos">782</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="p">,</span><span class="n">dpi</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Save image in the same dir with slightly modified name and extension.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>my_extension</strong> (str):
Specific extension of the output image.
The argument my_extension can extend image name
<ul>
<li>modify image extension/format;
see the example below.</li>
</ul></li>
<li><strong>dpi</strong> (int, optional, default is 300):
The dpi of the saved image.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is the saved output image with *my_extension*.</li>
</ul>

<h6 id="example">Example</h6>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">myimage.api</span> <span class="k">as</span> <span class="nn">mi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Open image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">mi</span><span class="o">.</span><span class="n">MyImage</span><span class="p">(</span><span class="s1">&#39;../IMG/somefile.bmp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Cut off lower bar </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Save the image as: &#39;../IMG/somefile_cut.png&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save_with_ext</span><span class="p">(</span><span class="s1">&#39;_cut.png&#39;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                            </div>
                </section>
                <section id="MyReport">
                            <input id="MyReport-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MyReport</span>:

                <label class="view-source-button" for="MyReport-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport-786"><a href="#MyReport-786"><span class="linenos"> 786</span></a><span class="k">class</span> <span class="nc">MyReport</span><span class="p">:</span>
</span><span id="MyReport-787"><a href="#MyReport-787"><span class="linenos"> 787</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-788"><a href="#MyReport-788"><span class="linenos"> 788</span></a><span class="sd">    Class defining MyReport objects.</span>
</span><span id="MyReport-789"><a href="#MyReport-789"><span class="linenos"> 789</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="MyReport-790"><a href="#MyReport-790"><span class="linenos"> 790</span></a>    
</span><span id="MyReport-791"><a href="#MyReport-791"><span class="linenos"> 791</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">itype</span><span class="p">,</span>
</span><span id="MyReport-792"><a href="#MyReport-792"><span class="linenos"> 792</span></a>                 <span class="n">grid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="MyReport-793"><a href="#MyReport-793"><span class="linenos"> 793</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-794"><a href="#MyReport-794"><span class="linenos"> 794</span></a><span class="sd">        Initialize MyReport object.</span>
</span><span id="MyReport-795"><a href="#MyReport-795"><span class="linenos"> 795</span></a>
</span><span id="MyReport-796"><a href="#MyReport-796"><span class="linenos"> 796</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport-797"><a href="#MyReport-797"><span class="linenos"> 797</span></a><span class="sd">        ----------</span>
</span><span id="MyReport-798"><a href="#MyReport-798"><span class="linenos"> 798</span></a><span class="sd">        images : list of images (arrays or str or path-like or MyImage objects)</span>
</span><span id="MyReport-799"><a href="#MyReport-799"><span class="linenos"> 799</span></a><span class="sd">            The list of images from which the MyReport will be created.</span>
</span><span id="MyReport-800"><a href="#MyReport-800"><span class="linenos"> 800</span></a><span class="sd">            If {images} list consists of arrays,</span>
</span><span id="MyReport-801"><a href="#MyReport-801"><span class="linenos"> 801</span></a><span class="sd">            we assume that these arrays are the direct input to</span>
</span><span id="MyReport-802"><a href="#MyReport-802"><span class="linenos"> 802</span></a><span class="sd">            skimage.util.montage method.</span>
</span><span id="MyReport-803"><a href="#MyReport-803"><span class="linenos"> 803</span></a><span class="sd">            If {images} list contains of strings or path-like objects,</span>
</span><span id="MyReport-804"><a href="#MyReport-804"><span class="linenos"> 804</span></a><span class="sd">            we assume that these are filenames of images</span>
</span><span id="MyReport-805"><a href="#MyReport-805"><span class="linenos"> 805</span></a><span class="sd">            that should be read as arrays.</span>
</span><span id="MyReport-806"><a href="#MyReport-806"><span class="linenos"> 806</span></a><span class="sd">            If {images} lists contains MyImage objecs,</span>
</span><span id="MyReport-807"><a href="#MyReport-807"><span class="linenos"> 807</span></a><span class="sd">            we use MyImage objects to create the final MyReport/montage.</span>
</span><span id="MyReport-808"><a href="#MyReport-808"><span class="linenos"> 808</span></a><span class="sd">        itype : type of images/arrays (&#39;gray&#39; or &#39;rgb&#39; or &#39;rgba&#39;)</span>
</span><span id="MyReport-809"><a href="#MyReport-809"><span class="linenos"> 809</span></a><span class="sd">            The type of input/output images/arrays.</span>
</span><span id="MyReport-810"><a href="#MyReport-810"><span class="linenos"> 810</span></a><span class="sd">            If itype=&#39;gray&#39;,</span>
</span><span id="MyReport-811"><a href="#MyReport-811"><span class="linenos"> 811</span></a><span class="sd">            then the input/output are converted to grayscale.</span>
</span><span id="MyReport-812"><a href="#MyReport-812"><span class="linenos"> 812</span></a><span class="sd">            If itype=&#39;rgb&#39; or &#39;rgba&#39;</span>
</span><span id="MyReport-813"><a href="#MyReport-813"><span class="linenos"> 813</span></a><span class="sd">            then the input/output are treated as RGB or RGBA images/arrays.</span>
</span><span id="MyReport-814"><a href="#MyReport-814"><span class="linenos"> 814</span></a><span class="sd">        grid : tuple of two integers (number-of-rows, number-of-cols)</span>
</span><span id="MyReport-815"><a href="#MyReport-815"><span class="linenos"> 815</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="MyReport-816"><a href="#MyReport-816"><span class="linenos"> 816</span></a><span class="sd">            *grid_shape* argument in skimage.util.montage function.</span>
</span><span id="MyReport-817"><a href="#MyReport-817"><span class="linenos"> 817</span></a><span class="sd">            It defines the number-of-rows and number-of-cols of the montage.</span>
</span><span id="MyReport-818"><a href="#MyReport-818"><span class="linenos"> 818</span></a><span class="sd">            Note: If grid is None, it defaults to a suitable square grid.</span>
</span><span id="MyReport-819"><a href="#MyReport-819"><span class="linenos"> 819</span></a><span class="sd">        padding : int; the default is 0</span>
</span><span id="MyReport-820"><a href="#MyReport-820"><span class="linenos"> 820</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="MyReport-821"><a href="#MyReport-821"><span class="linenos"> 821</span></a><span class="sd">            *padding_width* argument in skimage.util.montage function.</span>
</span><span id="MyReport-822"><a href="#MyReport-822"><span class="linenos"> 822</span></a><span class="sd">            It defines the distance between the images/arrays of the montage.</span>
</span><span id="MyReport-823"><a href="#MyReport-823"><span class="linenos"> 823</span></a><span class="sd">        fill : str or int or tuple/list/array; the default is &#39;white&#39;</span>
</span><span id="MyReport-824"><a href="#MyReport-824"><span class="linenos"> 824</span></a><span class="sd">            This argument is a (slightly extended) equivalent of </span>
</span><span id="MyReport-825"><a href="#MyReport-825"><span class="linenos"> 825</span></a><span class="sd">            *fill* argument in skimage.util.montage function.</span>
</span><span id="MyReport-826"><a href="#MyReport-826"><span class="linenos"> 826</span></a><span class="sd">            It defines the color between the images/arrays.</span>
</span><span id="MyReport-827"><a href="#MyReport-827"><span class="linenos"> 827</span></a><span class="sd">            If fill=&#39;white&#39; or fill=&#39;black&#39;,</span>
</span><span id="MyReport-828"><a href="#MyReport-828"><span class="linenos"> 828</span></a><span class="sd">            the color among the images/arrays is white or black.</span>
</span><span id="MyReport-829"><a href="#MyReport-829"><span class="linenos"> 829</span></a><span class="sd">            It can also be an integer value (for grayscale images)</span>
</span><span id="MyReport-830"><a href="#MyReport-830"><span class="linenos"> 830</span></a><span class="sd">            or a three-value tuple/list/array (for RGB images);</span>
</span><span id="MyReport-831"><a href="#MyReport-831"><span class="linenos"> 831</span></a><span class="sd">            in such a case, it defines the exact R,G,B color among the images.</span>
</span><span id="MyReport-832"><a href="#MyReport-832"><span class="linenos"> 832</span></a><span class="sd">        crop : bool; the default is True</span>
</span><span id="MyReport-833"><a href="#MyReport-833"><span class="linenos"> 833</span></a><span class="sd">            If crop=True, the outer padding is decreased to 1/2*padding.</span>
</span><span id="MyReport-834"><a href="#MyReport-834"><span class="linenos"> 834</span></a><span class="sd">            This makes the montages nicer (like the outputs from ImageMagick).</span>
</span><span id="MyReport-835"><a href="#MyReport-835"><span class="linenos"> 835</span></a><span class="sd">        rescale : float; the default is None</span>
</span><span id="MyReport-836"><a href="#MyReport-836"><span class="linenos"> 836</span></a><span class="sd">            If *rescale* is not None, then the original size</span>
</span><span id="MyReport-837"><a href="#MyReport-837"><span class="linenos"> 837</span></a><span class="sd">            of all input images/arrays is multiplied by *rescale*.</span>
</span><span id="MyReport-838"><a href="#MyReport-838"><span class="linenos"> 838</span></a><span class="sd">            Example: If *rescale* = 1/2, then the original size</span>
</span><span id="MyReport-839"><a href="#MyReport-839"><span class="linenos"> 839</span></a><span class="sd">            of all input images/arrays is halved (reduced by 50%).</span>
</span><span id="MyReport-840"><a href="#MyReport-840"><span class="linenos"> 840</span></a><span class="sd">            </span>
</span><span id="MyReport-841"><a href="#MyReport-841"><span class="linenos"> 841</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-842"><a href="#MyReport-842"><span class="linenos"> 842</span></a><span class="sd">        -------</span>
</span><span id="MyReport-843"><a href="#MyReport-843"><span class="linenos"> 843</span></a><span class="sd">        MyReport object</span>
</span><span id="MyReport-844"><a href="#MyReport-844"><span class="linenos"> 844</span></a><span class="sd">            Multi-image = tiled image composed of *images*.</span>
</span><span id="MyReport-845"><a href="#MyReport-845"><span class="linenos"> 845</span></a><span class="sd">            The MyReport object can be shown (MyReport.show)</span>
</span><span id="MyReport-846"><a href="#MyReport-846"><span class="linenos"> 846</span></a><span class="sd">            or saved (MyReport.save).</span>
</span><span id="MyReport-847"><a href="#MyReport-847"><span class="linenos"> 847</span></a><span class="sd">        </span>
</span><span id="MyReport-848"><a href="#MyReport-848"><span class="linenos"> 848</span></a><span class="sd">        Technical notes</span>
</span><span id="MyReport-849"><a href="#MyReport-849"><span class="linenos"> 849</span></a><span class="sd">        ---------------</span>
</span><span id="MyReport-850"><a href="#MyReport-850"><span class="linenos"> 850</span></a><span class="sd">        * Only &#39;gray&#39;, &#39;rgb&#39;, and &#39;rgba&#39; standard formats are supported.</span>
</span><span id="MyReport-851"><a href="#MyReport-851"><span class="linenos"> 851</span></a><span class="sd">          If an image has some non-standard format,</span>
</span><span id="MyReport-852"><a href="#MyReport-852"><span class="linenos"> 852</span></a><span class="sd">          it can be read and converted using a sister MyImage class</span>
</span><span id="MyReport-853"><a href="#MyReport-853"><span class="linenos"> 853</span></a><span class="sd">          (methods MyImage.to_gray, MyImage.to_rgb, MyImage.to_rgba).</span>
</span><span id="MyReport-854"><a href="#MyReport-854"><span class="linenos"> 854</span></a><span class="sd">        * The user does not have to differentiate &#39;rgb&#39; and &#39;rgba&#39; images.</span>
</span><span id="MyReport-855"><a href="#MyReport-855"><span class="linenos"> 855</span></a><span class="sd">          It is enough to specify &#39;rgb&#39; for color images</span>
</span><span id="MyReport-856"><a href="#MyReport-856"><span class="linenos"> 856</span></a><span class="sd">          and if the images are &#39;rgba&#39;, the program can work with them.</span>
</span><span id="MyReport-857"><a href="#MyReport-857"><span class="linenos"> 857</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-858"><a href="#MyReport-858"><span class="linenos"> 858</span></a>        
</span><span id="MyReport-859"><a href="#MyReport-859"><span class="linenos"> 859</span></a>        <span class="c1"># Get basic arguments/properties</span>
</span><span id="MyReport-860"><a href="#MyReport-860"><span class="linenos"> 860</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">images</span>  <span class="o">=</span> <span class="n">images</span>
</span><span id="MyReport-861"><a href="#MyReport-861"><span class="linenos"> 861</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span>   <span class="o">=</span> <span class="n">itype</span>
</span><span id="MyReport-862"><a href="#MyReport-862"><span class="linenos"> 862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span>    <span class="o">=</span> <span class="n">grid</span>
</span><span id="MyReport-863"><a href="#MyReport-863"><span class="linenos"> 863</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
</span><span id="MyReport-864"><a href="#MyReport-864"><span class="linenos"> 864</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span>    <span class="o">=</span> <span class="n">fill</span>
</span><span id="MyReport-865"><a href="#MyReport-865"><span class="linenos"> 865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crop</span>    <span class="o">=</span> <span class="n">crop</span>
</span><span id="MyReport-866"><a href="#MyReport-866"><span class="linenos"> 866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="o">=</span> <span class="n">rescale</span>
</span><span id="MyReport-867"><a href="#MyReport-867"><span class="linenos"> 867</span></a>        
</span><span id="MyReport-868"><a href="#MyReport-868"><span class="linenos"> 868</span></a>        <span class="c1"># Process self.images</span>
</span><span id="MyReport-869"><a href="#MyReport-869"><span class="linenos"> 869</span></a>        <span class="c1"># 1) Convert all images to np.arrays.</span>
</span><span id="MyReport-870"><a href="#MyReport-870"><span class="linenos"> 870</span></a>        <span class="c1"># 2) Check if the np.arrays have the same size,</span>
</span><span id="MyReport-871"><a href="#MyReport-871"><span class="linenos"> 871</span></a>        <span class="c1">#    i.e. the same dimensions, including the number of channels.</span>
</span><span id="MyReport-872"><a href="#MyReport-872"><span class="linenos"> 872</span></a>        <span class="c1">#    (channels ~ colors + transparency; usually the last dim/axis</span>
</span><span id="MyReport-873"><a href="#MyReport-873"><span class="linenos"> 873</span></a>        <span class="c1"># 3) Rescale images/arrays if requested.</span>
</span><span id="MyReport-874"><a href="#MyReport-874"><span class="linenos"> 874</span></a>        <span class="c1">#    (the images/arrays are rescaled if self.rescale != None</span>
</span><span id="MyReport-875"><a href="#MyReport-875"><span class="linenos"> 875</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_images</span><span class="p">()</span>
</span><span id="MyReport-876"><a href="#MyReport-876"><span class="linenos"> 876</span></a>        
</span><span id="MyReport-877"><a href="#MyReport-877"><span class="linenos"> 877</span></a>        <span class="c1"># Process self.itypes</span>
</span><span id="MyReport-878"><a href="#MyReport-878"><span class="linenos"> 878</span></a>        <span class="c1"># 1) Check image tepes</span>
</span><span id="MyReport-879"><a href="#MyReport-879"><span class="linenos"> 879</span></a>        <span class="c1">#    (the only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="MyReport-880"><a href="#MyReport-880"><span class="linenos"> 880</span></a>        <span class="c1"># 2) Define additional parameters for montage:</span>
</span><span id="MyReport-881"><a href="#MyReport-881"><span class="linenos"> 881</span></a>        <span class="c1">#    (the additional parameters will be saved within the self object</span>
</span><span id="MyReport-882"><a href="#MyReport-882"><span class="linenos"> 882</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_image_types</span><span class="p">()</span>
</span><span id="MyReport-883"><a href="#MyReport-883"><span class="linenos"> 883</span></a>        
</span><span id="MyReport-884"><a href="#MyReport-884"><span class="linenos"> 884</span></a>        <span class="c1"># Rescale images if requested</span>
</span><span id="MyReport-885"><a href="#MyReport-885"><span class="linenos"> 885</span></a>        <span class="c1"># (rescaleing can be performed AFTER...</span>
</span><span id="MyReport-886"><a href="#MyReport-886"><span class="linenos"> 886</span></a>        <span class="c1"># (...self.process_images =&gt; because images are converted to arrays</span>
</span><span id="MyReport-887"><a href="#MyReport-887"><span class="linenos"> 887</span></a>        <span class="c1"># (...self.check_image_types =&gt; because this sets additional params:</span>
</span><span id="MyReport-888"><a href="#MyReport-888"><span class="linenos"> 888</span></a>        <span class="c1"># (   self.montage_channel_axis</span>
</span><span id="MyReport-889"><a href="#MyReport-889"><span class="linenos"> 889</span></a>        <span class="c1"># (   self.montage_number_of_channels</span>
</span><span id="MyReport-890"><a href="#MyReport-890"><span class="linenos"> 890</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale_images</span><span class="p">()</span>
</span><span id="MyReport-891"><a href="#MyReport-891"><span class="linenos"> 891</span></a>        
</span><span id="MyReport-892"><a href="#MyReport-892"><span class="linenos"> 892</span></a>        <span class="c1"># Adjust white/black colors according to image type and no-of-channels</span>
</span><span id="MyReport-893"><a href="#MyReport-893"><span class="linenos"> 893</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span> 
</span><span id="MyReport-894"><a href="#MyReport-894"><span class="linenos"> 894</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>   <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span>
</span><span id="MyReport-895"><a href="#MyReport-895"><span class="linenos"> 895</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> 
</span><span id="MyReport-896"><a href="#MyReport-896"><span class="linenos"> 896</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport-897"><a href="#MyReport-897"><span class="linenos"> 897</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MyReport-898"><a href="#MyReport-898"><span class="linenos"> 898</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="mi">255</span>
</span><span id="MyReport-899"><a href="#MyReport-899"><span class="linenos"> 899</span></a>                
</span><span id="MyReport-900"><a href="#MyReport-900"><span class="linenos"> 900</span></a>        <span class="c1"># Analyze fill = fill_color and adjust acc.to image_type</span>
</span><span id="MyReport-901"><a href="#MyReport-901"><span class="linenos"> 901</span></a>        <span class="k">match</span> <span class="n">fill</span><span class="p">:</span>
</span><span id="MyReport-902"><a href="#MyReport-902"><span class="linenos"> 902</span></a>            <span class="k">case</span> <span class="s1">&#39;white&#39;</span><span class="p">:</span>
</span><span id="MyReport-903"><a href="#MyReport-903"><span class="linenos"> 903</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_white</span>
</span><span id="MyReport-904"><a href="#MyReport-904"><span class="linenos"> 904</span></a>            <span class="k">case</span> <span class="s1">&#39;black&#39;</span><span class="p">:</span>
</span><span id="MyReport-905"><a href="#MyReport-905"><span class="linenos"> 905</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_black</span>
</span><span id="MyReport-906"><a href="#MyReport-906"><span class="linenos"> 906</span></a>    
</span><span id="MyReport-907"><a href="#MyReport-907"><span class="linenos"> 907</span></a>        <span class="c1"># Create final montage</span>
</span><span id="MyReport-908"><a href="#MyReport-908"><span class="linenos"> 908</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">montage</span><span class="p">(</span>
</span><span id="MyReport-909"><a href="#MyReport-909"><span class="linenos"> 909</span></a>            <span class="n">arr_in</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">,</span>
</span><span id="MyReport-910"><a href="#MyReport-910"><span class="linenos"> 910</span></a>            <span class="n">grid_shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
</span><span id="MyReport-911"><a href="#MyReport-911"><span class="linenos"> 911</span></a>            <span class="n">padding_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span><span class="p">)</span>
</span><span id="MyReport-912"><a href="#MyReport-912"><span class="linenos"> 912</span></a>        
</span><span id="MyReport-913"><a href="#MyReport-913"><span class="linenos"> 913</span></a>        <span class="c1"># Crop the montage (= reduce the outer padding size to 1/2*padding)</span>
</span><span id="MyReport-914"><a href="#MyReport-914"><span class="linenos"> 914</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">:</span>
</span><span id="MyReport-915"><a href="#MyReport-915"><span class="linenos"> 915</span></a>            <span class="n">my_crop</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="MyReport-916"><a href="#MyReport-916"><span class="linenos"> 916</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">[</span><span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">,</span> <span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">]</span>
</span><span id="MyReport-917"><a href="#MyReport-917"><span class="linenos"> 917</span></a>
</span><span id="MyReport-918"><a href="#MyReport-918"><span class="linenos"> 918</span></a>    
</span><span id="MyReport-919"><a href="#MyReport-919"><span class="linenos"> 919</span></a>    <span class="k">def</span> <span class="nf">process_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport-920"><a href="#MyReport-920"><span class="linenos"> 920</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-921"><a href="#MyReport-921"><span class="linenos"> 921</span></a><span class="sd">        Check and prepare images before creating MyReport/montage.</span>
</span><span id="MyReport-922"><a href="#MyReport-922"><span class="linenos"> 922</span></a><span class="sd">        </span>
</span><span id="MyReport-923"><a href="#MyReport-923"><span class="linenos"> 923</span></a><span class="sd">       * The images used for MyReport/montage</span>
</span><span id="MyReport-924"><a href="#MyReport-924"><span class="linenos"> 924</span></a><span class="sd">         should be convertible to arrays with the same type and size.</span>
</span><span id="MyReport-925"><a href="#MyReport-925"><span class="linenos"> 925</span></a><span class="sd">       * This method goes through all images in self.images</span>
</span><span id="MyReport-926"><a href="#MyReport-926"><span class="linenos"> 926</span></a><span class="sd">         and converts them to arrays.</span>
</span><span id="MyReport-927"><a href="#MyReport-927"><span class="linenos"> 927</span></a><span class="sd">       * If the converted images/arrays have the same dimensions(=type),</span>
</span><span id="MyReport-928"><a href="#MyReport-928"><span class="linenos"> 928</span></a><span class="sd">         then everything is Ok</span>
</span><span id="MyReport-929"><a href="#MyReport-929"><span class="linenos"> 929</span></a><span class="sd">         and we cen proceed.</span>
</span><span id="MyReport-930"><a href="#MyReport-930"><span class="linenos"> 930</span></a><span class="sd">       * If the conerted images/arrays do not have the same dimension(=type),</span>
</span><span id="MyReport-931"><a href="#MyReport-931"><span class="linenos"> 931</span></a><span class="sd">         then this methods ends with an error</span>
</span><span id="MyReport-932"><a href="#MyReport-932"><span class="linenos"> 932</span></a><span class="sd">         and the user has to adjust images BEFORE calling the montage method.</span>
</span><span id="MyReport-933"><a href="#MyReport-933"><span class="linenos"> 933</span></a><span class="sd">       </span>
</span><span id="MyReport-934"><a href="#MyReport-934"><span class="linenos"> 934</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-935"><a href="#MyReport-935"><span class="linenos"> 935</span></a><span class="sd">        -------</span>
</span><span id="MyReport-936"><a href="#MyReport-936"><span class="linenos"> 936</span></a><span class="sd">        None</span>
</span><span id="MyReport-937"><a href="#MyReport-937"><span class="linenos"> 937</span></a><span class="sd">            If everything is Ok,</span>
</span><span id="MyReport-938"><a href="#MyReport-938"><span class="linenos"> 938</span></a><span class="sd">            the checked images are read and saved as arrays in the self.images.</span>
</span><span id="MyReport-939"><a href="#MyReport-939"><span class="linenos"> 939</span></a><span class="sd">            If the images are not of the same type</span>
</span><span id="MyReport-940"><a href="#MyReport-940"><span class="linenos"> 940</span></a><span class="sd">            this method prints an error and the program quits.</span>
</span><span id="MyReport-941"><a href="#MyReport-941"><span class="linenos"> 941</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-942"><a href="#MyReport-942"><span class="linenos"> 942</span></a>        
</span><span id="MyReport-943"><a href="#MyReport-943"><span class="linenos"> 943</span></a>        <span class="c1"># (0) Prepare variables</span>
</span><span id="MyReport-944"><a href="#MyReport-944"><span class="linenos"> 944</span></a>        <span class="n">img_sizes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MyReport-945"><a href="#MyReport-945"><span class="linenos"> 945</span></a>        
</span><span id="MyReport-946"><a href="#MyReport-946"><span class="linenos"> 946</span></a>        <span class="c1"># (1) Go through the images (self.images) to create montage array.</span>
</span><span id="MyReport-947"><a href="#MyReport-947"><span class="linenos"> 947</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport-948"><a href="#MyReport-948"><span class="linenos"> 948</span></a>            <span class="c1"># Case 1: NumPy array =&gt; just </span>
</span><span id="MyReport-949"><a href="#MyReport-949"><span class="linenos"> 949</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="MyReport-950"><a href="#MyReport-950"><span class="linenos"> 950</span></a>                <span class="c1"># self.images is not changed = we already have an array</span>
</span><span id="MyReport-951"><a href="#MyReport-951"><span class="linenos"> 951</span></a>                <span class="c1"># just save image size</span>
</span><span id="MyReport-952"><a href="#MyReport-952"><span class="linenos"> 952</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport-953"><a href="#MyReport-953"><span class="linenos"> 953</span></a>            <span class="c1"># Case 2: MyImage object =&gt; convert to array and append </span>
</span><span id="MyReport-954"><a href="#MyReport-954"><span class="linenos"> 954</span></a>            <span class="k">elif</span> <span class="s1">&#39;MyImage&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
</span><span id="MyReport-955"><a href="#MyReport-955"><span class="linenos"> 955</span></a>                <span class="c1"># self.images[i] is changed =&gt; np.array instead of MyImg object</span>
</span><span id="MyReport-956"><a href="#MyReport-956"><span class="linenos"> 956</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyReport-957"><a href="#MyReport-957"><span class="linenos"> 957</span></a>                <span class="c1"># save image size</span>
</span><span id="MyReport-958"><a href="#MyReport-958"><span class="linenos"> 958</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport-959"><a href="#MyReport-959"><span class="linenos"> 959</span></a>            <span class="c1"># Case 3: None object =&gt; append None</span>
</span><span id="MyReport-960"><a href="#MyReport-960"><span class="linenos"> 960</span></a>            <span class="c1"># TODO: Later, None should be exchanged for suitable empty array.</span>
</span><span id="MyReport-961"><a href="#MyReport-961"><span class="linenos"> 961</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport-962"><a href="#MyReport-962"><span class="linenos"> 962</span></a>                <span class="k">pass</span>
</span><span id="MyReport-963"><a href="#MyReport-963"><span class="linenos"> 963</span></a>            <span class="c1"># Case 4: Nothing of the above =&gt; we suppose it is a filename.</span>
</span><span id="MyReport-964"><a href="#MyReport-964"><span class="linenos"> 964</span></a>            <span class="c1"># TODO: Consider exceptions etc...</span>
</span><span id="MyReport-965"><a href="#MyReport-965"><span class="linenos"> 965</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport-966"><a href="#MyReport-966"><span class="linenos"> 966</span></a>                <span class="c1"># self.images[i] is changed =&gt; we read a file to an array</span>
</span><span id="MyReport-967"><a href="#MyReport-967"><span class="linenos"> 967</span></a>                <span class="k">if</span> <span class="s1">&#39;rgb&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport-968"><a href="#MyReport-968"><span class="linenos"> 968</span></a>                    <span class="c1"># Read image in the default way (as_gray=False)</span>
</span><span id="MyReport-969"><a href="#MyReport-969"><span class="linenos"> 969</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="MyReport-970"><a href="#MyReport-970"><span class="linenos"> 970</span></a>                <span class="k">elif</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport-971"><a href="#MyReport-971"><span class="linenos"> 971</span></a>                    <span class="c1"># Read image as grayscale (as_grayscale=True)</span>
</span><span id="MyReport-972"><a href="#MyReport-972"><span class="linenos"> 972</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="MyReport-973"><a href="#MyReport-973"><span class="linenos"> 973</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport-974"><a href="#MyReport-974"><span class="linenos"> 974</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in: myimg.Montage.process_images&#39;</span><span class="p">)</span>
</span><span id="MyReport-975"><a href="#MyReport-975"><span class="linenos"> 975</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown input image type!&#39;</span><span class="p">)</span>
</span><span id="MyReport-976"><a href="#MyReport-976"><span class="linenos"> 976</span></a>                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyReport-977"><a href="#MyReport-977"><span class="linenos"> 977</span></a>                <span class="c1"># Save image size</span>
</span><span id="MyReport-978"><a href="#MyReport-978"><span class="linenos"> 978</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport-979"><a href="#MyReport-979"><span class="linenos"> 979</span></a>                
</span><span id="MyReport-980"><a href="#MyReport-980"><span class="linenos"> 980</span></a>        <span class="c1"># (2) Additional adjustment for all grayscale images</span>
</span><span id="MyReport-981"><a href="#MyReport-981"><span class="linenos"> 981</span></a>        <span class="c1"># =&gt; if itype = &#39;gray&#39;, then normalize image to 8bit grayscale.</span>
</span><span id="MyReport-982"><a href="#MyReport-982"><span class="linenos"> 982</span></a>        <span class="c1"># (3-value gray-imgs normalized to 1, 8bit to 255, 16bit to 65535</span>
</span><span id="MyReport-983"><a href="#MyReport-983"><span class="linenos"> 983</span></a>        <span class="c1"># (moreover, we can have a combination of various grayscales</span>
</span><span id="MyReport-984"><a href="#MyReport-984"><span class="linenos"> 984</span></a>        <span class="c1"># (to get reproducible results, we ALWA&amp;S normalize to 8-bit gray</span>
</span><span id="MyReport-985"><a href="#MyReport-985"><span class="linenos"> 985</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport-986"><a href="#MyReport-986"><span class="linenos"> 986</span></a>            <span class="k">if</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport-987"><a href="#MyReport-987"><span class="linenos"> 987</span></a>                <span class="n">arr_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="MyReport-988"><a href="#MyReport-988"><span class="linenos"> 988</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="MyReport-989"><a href="#MyReport-989"><span class="linenos"> 989</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">arr_max</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyReport-990"><a href="#MyReport-990"><span class="linenos"> 990</span></a>        
</span><span id="MyReport-991"><a href="#MyReport-991"><span class="linenos"> 991</span></a>        <span class="c1"># (3) Final check if all images are of the same size</span>
</span><span id="MyReport-992"><a href="#MyReport-992"><span class="linenos"> 992</span></a>        <span class="c1"># Trick: All-list-elements-are-the-same</span>
</span><span id="MyReport-993"><a href="#MyReport-993"><span class="linenos"> 993</span></a>        <span class="c1"># if the number of the occurrences of the first elements</span>
</span><span id="MyReport-994"><a href="#MyReport-994"><span class="linenos"> 994</span></a>        <span class="c1"># equals to the total number of elements in the list.</span>
</span><span id="MyReport-995"><a href="#MyReport-995"><span class="linenos"> 995</span></a>        <span class="n">all_the_same</span> <span class="o">=</span> <span class="n">img_sizes</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">)</span>
</span><span id="MyReport-996"><a href="#MyReport-996"><span class="linenos"> 996</span></a>        <span class="c1"># Now the final check</span>
</span><span id="MyReport-997"><a href="#MyReport-997"><span class="linenos"> 997</span></a>        <span class="k">if</span> <span class="n">all_the_same</span><span class="p">:</span>
</span><span id="MyReport-998"><a href="#MyReport-998"><span class="linenos"> 998</span></a>            <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
</span><span id="MyReport-999"><a href="#MyReport-999"><span class="linenos"> 999</span></a>        
</span><span id="MyReport-1000"><a href="#MyReport-1000"><span class="linenos">1000</span></a>    
</span><span id="MyReport-1001"><a href="#MyReport-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">check_image_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport-1002"><a href="#MyReport-1002"><span class="linenos">1002</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-1003"><a href="#MyReport-1003"><span class="linenos">1003</span></a><span class="sd">        Check image/array types and prepare additional parametrs for montage.</span>
</span><span id="MyReport-1004"><a href="#MyReport-1004"><span class="linenos">1004</span></a><span class="sd">        </span>
</span><span id="MyReport-1005"><a href="#MyReport-1005"><span class="linenos">1005</span></a><span class="sd">        * The only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="MyReport-1006"><a href="#MyReport-1006"><span class="linenos">1006</span></a><span class="sd">        * Other image types =&gt; print error message and exit program.</span>
</span><span id="MyReport-1007"><a href="#MyReport-1007"><span class="linenos">1007</span></a><span class="sd">        * For each image type we have to set two additional montage params:</span>
</span><span id="MyReport-1008"><a href="#MyReport-1008"><span class="linenos">1008</span></a><span class="sd">            - self.montage_channel_axis =&gt; the last axis of the array</span>
</span><span id="MyReport-1009"><a href="#MyReport-1009"><span class="linenos">1009</span></a><span class="sd">            - self.montage_number_of_channels =&gt; gray ~ 1, rgb ~ 3, rgba ~ 4</span>
</span><span id="MyReport-1010"><a href="#MyReport-1010"><span class="linenos">1010</span></a><span class="sd">        </span>
</span><span id="MyReport-1011"><a href="#MyReport-1011"><span class="linenos">1011</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-1012"><a href="#MyReport-1012"><span class="linenos">1012</span></a><span class="sd">        -------</span>
</span><span id="MyReport-1013"><a href="#MyReport-1013"><span class="linenos">1013</span></a><span class="sd">        None</span>
</span><span id="MyReport-1014"><a href="#MyReport-1014"><span class="linenos">1014</span></a><span class="sd">            The additional montage parameters are are saved in</span>
</span><span id="MyReport-1015"><a href="#MyReport-1015"><span class="linenos">1015</span></a><span class="sd">            self.montage_channel_axes and self.montage_number_of_channels.</span>
</span><span id="MyReport-1016"><a href="#MyReport-1016"><span class="linenos">1016</span></a><span class="sd">            These parameters are needed</span>
</span><span id="MyReport-1017"><a href="#MyReport-1017"><span class="linenos">1017</span></a><span class="sd">            for correct treatement of rgb/gray images/arrays.</span>
</span><span id="MyReport-1018"><a href="#MyReport-1018"><span class="linenos">1018</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-1019"><a href="#MyReport-1019"><span class="linenos">1019</span></a>        
</span><span id="MyReport-1020"><a href="#MyReport-1020"><span class="linenos">1020</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span>
</span><span id="MyReport-1021"><a href="#MyReport-1021"><span class="linenos">1021</span></a>            <span class="c1"># RGB and RGBA images = 3D-arrays</span>
</span><span id="MyReport-1022"><a href="#MyReport-1022"><span class="linenos">1022</span></a>            <span class="c1"># the last axis = channel axis = color channels = axis 4 =&gt; index 3</span>
</span><span id="MyReport-1023"><a href="#MyReport-1023"><span class="linenos">1023</span></a>            <span class="c1"># the number of channels = either 3 (RGB) or 4 (RGBA)</span>
</span><span id="MyReport-1024"><a href="#MyReport-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="MyReport-1025"><a href="#MyReport-1025"><span class="linenos">1025</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MyReport-1026"><a href="#MyReport-1026"><span class="linenos">1026</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport-1027"><a href="#MyReport-1027"><span class="linenos">1027</span></a>            <span class="c1"># Grayscale images = 2D-arrays</span>
</span><span id="MyReport-1028"><a href="#MyReport-1028"><span class="linenos">1028</span></a>            <span class="c1"># (no channel axis = just one channel, grayscale value</span>
</span><span id="MyReport-1029"><a href="#MyReport-1029"><span class="linenos">1029</span></a>            <span class="c1"># (all grayscale images are read by ski.io.imread as 1-value gray</span>
</span><span id="MyReport-1030"><a href="#MyReport-1030"><span class="linenos">1030</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyReport-1031"><a href="#MyReport-1031"><span class="linenos">1031</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="MyReport-1032"><a href="#MyReport-1032"><span class="linenos">1032</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport-1033"><a href="#MyReport-1033"><span class="linenos">1033</span></a>            <span class="c1"># Other image formats are not supported at the moment.</span>
</span><span id="MyReport-1034"><a href="#MyReport-1034"><span class="linenos">1034</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown image type: [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="si">}</span><span class="s1">]!&#39;</span><span class="p">)</span>
</span><span id="MyReport-1035"><a href="#MyReport-1035"><span class="linenos">1035</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Allowed image types are &#39;gray&#39;, &#39;rgb&#39; or &#39;rgba&#39;.&quot;</span><span class="p">)</span>
</span><span id="MyReport-1036"><a href="#MyReport-1036"><span class="linenos">1036</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyReport-1037"><a href="#MyReport-1037"><span class="linenos">1037</span></a>            
</span><span id="MyReport-1038"><a href="#MyReport-1038"><span class="linenos">1038</span></a>    
</span><span id="MyReport-1039"><a href="#MyReport-1039"><span class="linenos">1039</span></a>    <span class="k">def</span> <span class="nf">rescale_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport-1040"><a href="#MyReport-1040"><span class="linenos">1040</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-1041"><a href="#MyReport-1041"><span class="linenos">1041</span></a><span class="sd">        Rescale input images/arrays if requested.</span>
</span><span id="MyReport-1042"><a href="#MyReport-1042"><span class="linenos">1042</span></a><span class="sd">        </span>
</span><span id="MyReport-1043"><a href="#MyReport-1043"><span class="linenos">1043</span></a><span class="sd">        * The images are rescaled if self.rescale != None.</span>
</span><span id="MyReport-1044"><a href="#MyReport-1044"><span class="linenos">1044</span></a><span class="sd">        * This rescaling should be applied to each of self.images</span>
</span><span id="MyReport-1045"><a href="#MyReport-1045"><span class="linenos">1045</span></a><span class="sd">          AFTER the images have been checked and converted to arrays.</span>
</span><span id="MyReport-1046"><a href="#MyReport-1046"><span class="linenos">1046</span></a><span class="sd">       </span>
</span><span id="MyReport-1047"><a href="#MyReport-1047"><span class="linenos">1047</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-1048"><a href="#MyReport-1048"><span class="linenos">1048</span></a><span class="sd">        -------</span>
</span><span id="MyReport-1049"><a href="#MyReport-1049"><span class="linenos">1049</span></a><span class="sd">        None</span>
</span><span id="MyReport-1050"><a href="#MyReport-1050"><span class="linenos">1050</span></a><span class="sd">            The rescaled images/arrays are saved in self.images.</span>
</span><span id="MyReport-1051"><a href="#MyReport-1051"><span class="linenos">1051</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-1052"><a href="#MyReport-1052"><span class="linenos">1052</span></a>        
</span><span id="MyReport-1053"><a href="#MyReport-1053"><span class="linenos">1053</span></a>        <span class="c1"># Rescale all input images/arrays if requested.</span>
</span><span id="MyReport-1054"><a href="#MyReport-1054"><span class="linenos">1054</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport-1055"><a href="#MyReport-1055"><span class="linenos">1055</span></a>            <span class="c1"># Go through the images/arrays in arr_in</span>
</span><span id="MyReport-1056"><a href="#MyReport-1056"><span class="linenos">1056</span></a>            <span class="c1"># and rescale them one-by-one,</span>
</span><span id="MyReport-1057"><a href="#MyReport-1057"><span class="linenos">1057</span></a>            <span class="c1"># preserving the range and data type.</span>
</span><span id="MyReport-1058"><a href="#MyReport-1058"><span class="linenos">1058</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport-1059"><a href="#MyReport-1059"><span class="linenos">1059</span></a>                <span class="c1"># Save the original data type.</span>
</span><span id="MyReport-1060"><a href="#MyReport-1060"><span class="linenos">1060</span></a>                <span class="n">original_data_type</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">dtype</span>
</span><span id="MyReport-1061"><a href="#MyReport-1061"><span class="linenos">1061</span></a>                <span class="c1"># Prepare channel axis</span>
</span><span id="MyReport-1062"><a href="#MyReport-1062"><span class="linenos">1062</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport-1063"><a href="#MyReport-1063"><span class="linenos">1063</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="MyReport-1064"><a href="#MyReport-1064"><span class="linenos">1064</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport-1065"><a href="#MyReport-1065"><span class="linenos">1065</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyReport-1066"><a href="#MyReport-1066"><span class="linenos">1066</span></a>                <span class="c1"># Rescale the array, preserving the range and data type.</span>
</span><span id="MyReport-1067"><a href="#MyReport-1067"><span class="linenos">1067</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rescale</span><span class="p">(</span>
</span><span id="MyReport-1068"><a href="#MyReport-1068"><span class="linenos">1068</span></a>                    <span class="n">image</span><span class="p">,</span>                        <span class="c1"># input montage array</span>
</span><span id="MyReport-1069"><a href="#MyReport-1069"><span class="linenos">1069</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span><span class="p">,</span>                 <span class="c1"># rescaling coefficient</span>
</span><span id="MyReport-1070"><a href="#MyReport-1070"><span class="linenos">1070</span></a>                    <span class="n">anti_aliasing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>           <span class="c1"># anti-aliasing</span>
</span><span id="MyReport-1071"><a href="#MyReport-1071"><span class="linenos">1071</span></a>                    <span class="n">preserve_range</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>          <span class="c1"># preserve intensities</span>
</span><span id="MyReport-1072"><a href="#MyReport-1072"><span class="linenos">1072</span></a>                    <span class="n">channel_axis</span><span class="o">=</span><span class="n">channel_axis</span>     <span class="c1"># channel axis for RGB images</span>
</span><span id="MyReport-1073"><a href="#MyReport-1073"><span class="linenos">1073</span></a>                    <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">original_data_type</span><span class="p">)</span>  <span class="c1"># preserve original data type</span>
</span><span id="MyReport-1074"><a href="#MyReport-1074"><span class="linenos">1074</span></a>
</span><span id="MyReport-1075"><a href="#MyReport-1075"><span class="linenos">1075</span></a>
</span><span id="MyReport-1076"><a href="#MyReport-1076"><span class="linenos">1076</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="MyReport-1077"><a href="#MyReport-1077"><span class="linenos">1077</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-1078"><a href="#MyReport-1078"><span class="linenos">1078</span></a><span class="sd">        Show MyReport = rectangular montage of images.</span>
</span><span id="MyReport-1079"><a href="#MyReport-1079"><span class="linenos">1079</span></a>
</span><span id="MyReport-1080"><a href="#MyReport-1080"><span class="linenos">1080</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport-1081"><a href="#MyReport-1081"><span class="linenos">1081</span></a><span class="sd">        ----------</span>
</span><span id="MyReport-1082"><a href="#MyReport-1082"><span class="linenos">1082</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="MyReport-1083"><a href="#MyReport-1083"><span class="linenos">1083</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="MyReport-1084"><a href="#MyReport-1084"><span class="linenos">1084</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="MyReport-1085"><a href="#MyReport-1085"><span class="linenos">1085</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="MyReport-1086"><a href="#MyReport-1086"><span class="linenos">1086</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="MyReport-1087"><a href="#MyReport-1087"><span class="linenos">1087</span></a>
</span><span id="MyReport-1088"><a href="#MyReport-1088"><span class="linenos">1088</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-1089"><a href="#MyReport-1089"><span class="linenos">1089</span></a><span class="sd">        -------</span>
</span><span id="MyReport-1090"><a href="#MyReport-1090"><span class="linenos">1090</span></a><span class="sd">        None</span>
</span><span id="MyReport-1091"><a href="#MyReport-1091"><span class="linenos">1091</span></a><span class="sd">            The output is the MyReport (image montage) shown on the screen.</span>
</span><span id="MyReport-1092"><a href="#MyReport-1092"><span class="linenos">1092</span></a>
</span><span id="MyReport-1093"><a href="#MyReport-1093"><span class="linenos">1093</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-1094"><a href="#MyReport-1094"><span class="linenos">1094</span></a>        <span class="c1"># Check/adjust the colormap</span>
</span><span id="MyReport-1095"><a href="#MyReport-1095"><span class="linenos">1095</span></a>        <span class="c1"># (if we have grayscale image and no colormap, we want cmap=&#39;gray&#39;</span>
</span><span id="MyReport-1096"><a href="#MyReport-1096"><span class="linenos">1096</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">):</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyReport-1097"><a href="#MyReport-1097"><span class="linenos">1097</span></a>        <span class="c1"># Prepare the plot</span>
</span><span id="MyReport-1098"><a href="#MyReport-1098"><span class="linenos">1098</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="MyReport-1099"><a href="#MyReport-1099"><span class="linenos">1099</span></a>        <span class="c1"># Switch off the axes, if not requested otherwise</span>
</span><span id="MyReport-1100"><a href="#MyReport-1100"><span class="linenos">1100</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="MyReport-1101"><a href="#MyReport-1101"><span class="linenos">1101</span></a>        <span class="c1"># Show the plot</span>
</span><span id="MyReport-1102"><a href="#MyReport-1102"><span class="linenos">1102</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="MyReport-1103"><a href="#MyReport-1103"><span class="linenos">1103</span></a>    
</span><span id="MyReport-1104"><a href="#MyReport-1104"><span class="linenos">1104</span></a>    
</span><span id="MyReport-1105"><a href="#MyReport-1105"><span class="linenos">1105</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyReport-1106"><a href="#MyReport-1106"><span class="linenos">1106</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport-1107"><a href="#MyReport-1107"><span class="linenos">1107</span></a><span class="sd">        Save MyReport (using an arbitrary path, name and extension).</span>
</span><span id="MyReport-1108"><a href="#MyReport-1108"><span class="linenos">1108</span></a>
</span><span id="MyReport-1109"><a href="#MyReport-1109"><span class="linenos">1109</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport-1110"><a href="#MyReport-1110"><span class="linenos">1110</span></a><span class="sd">        ----------</span>
</span><span id="MyReport-1111"><a href="#MyReport-1111"><span class="linenos">1111</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="MyReport-1112"><a href="#MyReport-1112"><span class="linenos">1112</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="MyReport-1113"><a href="#MyReport-1113"><span class="linenos">1113</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="MyReport-1114"><a href="#MyReport-1114"><span class="linenos">1114</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyReport-1115"><a href="#MyReport-1115"><span class="linenos">1115</span></a><span class="sd">            The dpi of the saved image/montage.</span>
</span><span id="MyReport-1116"><a href="#MyReport-1116"><span class="linenos">1116</span></a>
</span><span id="MyReport-1117"><a href="#MyReport-1117"><span class="linenos">1117</span></a><span class="sd">        Returns</span>
</span><span id="MyReport-1118"><a href="#MyReport-1118"><span class="linenos">1118</span></a><span class="sd">        -------</span>
</span><span id="MyReport-1119"><a href="#MyReport-1119"><span class="linenos">1119</span></a><span class="sd">        None</span>
</span><span id="MyReport-1120"><a href="#MyReport-1120"><span class="linenos">1120</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="MyReport-1121"><a href="#MyReport-1121"><span class="linenos">1121</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport-1122"><a href="#MyReport-1122"><span class="linenos">1122</span></a>        <span class="c1"># Convert to grayscale, if required.</span>
</span><span id="MyReport-1123"><a href="#MyReport-1123"><span class="linenos">1123</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport-1124"><a href="#MyReport-1124"><span class="linenos">1124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MyReport-1125"><a href="#MyReport-1125"><span class="linenos">1125</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyReport-1126"><a href="#MyReport-1126"><span class="linenos">1126</span></a>        <span class="c1"># Save the output image montage.</span>
</span><span id="MyReport-1127"><a href="#MyReport-1127"><span class="linenos">1127</span></a>        <span class="c1"># (ski.io.imsave does not support saving with defined DPI</span>
</span><span id="MyReport-1128"><a href="#MyReport-1128"><span class="linenos">1128</span></a>        <span class="c1"># (plt.imsave supports DPI, but grayscale images require cmap=&#39;gray&#39;</span>
</span><span id="MyReport-1129"><a href="#MyReport-1129"><span class="linenos">1129</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport-1130"><a href="#MyReport-1130"><span class="linenos">1130</span></a>            <span class="c1"># Grayscale images are saved with colormap = &#39;gray&#39;</span>
</span><span id="MyReport-1131"><a href="#MyReport-1131"><span class="linenos">1131</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</span><span id="MyReport-1132"><a href="#MyReport-1132"><span class="linenos">1132</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport-1133"><a href="#MyReport-1133"><span class="linenos">1133</span></a>            <span class="c1"># RGB (and RGBA) images are saved without cmap to keep the colors</span>
</span><span id="MyReport-1134"><a href="#MyReport-1134"><span class="linenos">1134</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Class defining MyReport objects.</p>
</div>


                            <div id="MyReport.__init__" class="classattr">
                                        <input id="MyReport.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MyReport</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">images</span>,</span><span class="param">	<span class="n">itype</span>,</span><span class="param">	<span class="n">grid</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">padding</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span>,</span><span class="param">	<span class="n">crop</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">rescale</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="MyReport.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.__init__-791"><a href="#MyReport.__init__-791"><span class="linenos">791</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">,</span> <span class="n">itype</span><span class="p">,</span>
</span><span id="MyReport.__init__-792"><a href="#MyReport.__init__-792"><span class="linenos">792</span></a>                 <span class="n">grid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rescale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="MyReport.__init__-793"><a href="#MyReport.__init__-793"><span class="linenos">793</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.__init__-794"><a href="#MyReport.__init__-794"><span class="linenos">794</span></a><span class="sd">        Initialize MyReport object.</span>
</span><span id="MyReport.__init__-795"><a href="#MyReport.__init__-795"><span class="linenos">795</span></a>
</span><span id="MyReport.__init__-796"><a href="#MyReport.__init__-796"><span class="linenos">796</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport.__init__-797"><a href="#MyReport.__init__-797"><span class="linenos">797</span></a><span class="sd">        ----------</span>
</span><span id="MyReport.__init__-798"><a href="#MyReport.__init__-798"><span class="linenos">798</span></a><span class="sd">        images : list of images (arrays or str or path-like or MyImage objects)</span>
</span><span id="MyReport.__init__-799"><a href="#MyReport.__init__-799"><span class="linenos">799</span></a><span class="sd">            The list of images from which the MyReport will be created.</span>
</span><span id="MyReport.__init__-800"><a href="#MyReport.__init__-800"><span class="linenos">800</span></a><span class="sd">            If {images} list consists of arrays,</span>
</span><span id="MyReport.__init__-801"><a href="#MyReport.__init__-801"><span class="linenos">801</span></a><span class="sd">            we assume that these arrays are the direct input to</span>
</span><span id="MyReport.__init__-802"><a href="#MyReport.__init__-802"><span class="linenos">802</span></a><span class="sd">            skimage.util.montage method.</span>
</span><span id="MyReport.__init__-803"><a href="#MyReport.__init__-803"><span class="linenos">803</span></a><span class="sd">            If {images} list contains of strings or path-like objects,</span>
</span><span id="MyReport.__init__-804"><a href="#MyReport.__init__-804"><span class="linenos">804</span></a><span class="sd">            we assume that these are filenames of images</span>
</span><span id="MyReport.__init__-805"><a href="#MyReport.__init__-805"><span class="linenos">805</span></a><span class="sd">            that should be read as arrays.</span>
</span><span id="MyReport.__init__-806"><a href="#MyReport.__init__-806"><span class="linenos">806</span></a><span class="sd">            If {images} lists contains MyImage objecs,</span>
</span><span id="MyReport.__init__-807"><a href="#MyReport.__init__-807"><span class="linenos">807</span></a><span class="sd">            we use MyImage objects to create the final MyReport/montage.</span>
</span><span id="MyReport.__init__-808"><a href="#MyReport.__init__-808"><span class="linenos">808</span></a><span class="sd">        itype : type of images/arrays (&#39;gray&#39; or &#39;rgb&#39; or &#39;rgba&#39;)</span>
</span><span id="MyReport.__init__-809"><a href="#MyReport.__init__-809"><span class="linenos">809</span></a><span class="sd">            The type of input/output images/arrays.</span>
</span><span id="MyReport.__init__-810"><a href="#MyReport.__init__-810"><span class="linenos">810</span></a><span class="sd">            If itype=&#39;gray&#39;,</span>
</span><span id="MyReport.__init__-811"><a href="#MyReport.__init__-811"><span class="linenos">811</span></a><span class="sd">            then the input/output are converted to grayscale.</span>
</span><span id="MyReport.__init__-812"><a href="#MyReport.__init__-812"><span class="linenos">812</span></a><span class="sd">            If itype=&#39;rgb&#39; or &#39;rgba&#39;</span>
</span><span id="MyReport.__init__-813"><a href="#MyReport.__init__-813"><span class="linenos">813</span></a><span class="sd">            then the input/output are treated as RGB or RGBA images/arrays.</span>
</span><span id="MyReport.__init__-814"><a href="#MyReport.__init__-814"><span class="linenos">814</span></a><span class="sd">        grid : tuple of two integers (number-of-rows, number-of-cols)</span>
</span><span id="MyReport.__init__-815"><a href="#MyReport.__init__-815"><span class="linenos">815</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="MyReport.__init__-816"><a href="#MyReport.__init__-816"><span class="linenos">816</span></a><span class="sd">            *grid_shape* argument in skimage.util.montage function.</span>
</span><span id="MyReport.__init__-817"><a href="#MyReport.__init__-817"><span class="linenos">817</span></a><span class="sd">            It defines the number-of-rows and number-of-cols of the montage.</span>
</span><span id="MyReport.__init__-818"><a href="#MyReport.__init__-818"><span class="linenos">818</span></a><span class="sd">            Note: If grid is None, it defaults to a suitable square grid.</span>
</span><span id="MyReport.__init__-819"><a href="#MyReport.__init__-819"><span class="linenos">819</span></a><span class="sd">        padding : int; the default is 0</span>
</span><span id="MyReport.__init__-820"><a href="#MyReport.__init__-820"><span class="linenos">820</span></a><span class="sd">            This argument is an equivalent of</span>
</span><span id="MyReport.__init__-821"><a href="#MyReport.__init__-821"><span class="linenos">821</span></a><span class="sd">            *padding_width* argument in skimage.util.montage function.</span>
</span><span id="MyReport.__init__-822"><a href="#MyReport.__init__-822"><span class="linenos">822</span></a><span class="sd">            It defines the distance between the images/arrays of the montage.</span>
</span><span id="MyReport.__init__-823"><a href="#MyReport.__init__-823"><span class="linenos">823</span></a><span class="sd">        fill : str or int or tuple/list/array; the default is &#39;white&#39;</span>
</span><span id="MyReport.__init__-824"><a href="#MyReport.__init__-824"><span class="linenos">824</span></a><span class="sd">            This argument is a (slightly extended) equivalent of </span>
</span><span id="MyReport.__init__-825"><a href="#MyReport.__init__-825"><span class="linenos">825</span></a><span class="sd">            *fill* argument in skimage.util.montage function.</span>
</span><span id="MyReport.__init__-826"><a href="#MyReport.__init__-826"><span class="linenos">826</span></a><span class="sd">            It defines the color between the images/arrays.</span>
</span><span id="MyReport.__init__-827"><a href="#MyReport.__init__-827"><span class="linenos">827</span></a><span class="sd">            If fill=&#39;white&#39; or fill=&#39;black&#39;,</span>
</span><span id="MyReport.__init__-828"><a href="#MyReport.__init__-828"><span class="linenos">828</span></a><span class="sd">            the color among the images/arrays is white or black.</span>
</span><span id="MyReport.__init__-829"><a href="#MyReport.__init__-829"><span class="linenos">829</span></a><span class="sd">            It can also be an integer value (for grayscale images)</span>
</span><span id="MyReport.__init__-830"><a href="#MyReport.__init__-830"><span class="linenos">830</span></a><span class="sd">            or a three-value tuple/list/array (for RGB images);</span>
</span><span id="MyReport.__init__-831"><a href="#MyReport.__init__-831"><span class="linenos">831</span></a><span class="sd">            in such a case, it defines the exact R,G,B color among the images.</span>
</span><span id="MyReport.__init__-832"><a href="#MyReport.__init__-832"><span class="linenos">832</span></a><span class="sd">        crop : bool; the default is True</span>
</span><span id="MyReport.__init__-833"><a href="#MyReport.__init__-833"><span class="linenos">833</span></a><span class="sd">            If crop=True, the outer padding is decreased to 1/2*padding.</span>
</span><span id="MyReport.__init__-834"><a href="#MyReport.__init__-834"><span class="linenos">834</span></a><span class="sd">            This makes the montages nicer (like the outputs from ImageMagick).</span>
</span><span id="MyReport.__init__-835"><a href="#MyReport.__init__-835"><span class="linenos">835</span></a><span class="sd">        rescale : float; the default is None</span>
</span><span id="MyReport.__init__-836"><a href="#MyReport.__init__-836"><span class="linenos">836</span></a><span class="sd">            If *rescale* is not None, then the original size</span>
</span><span id="MyReport.__init__-837"><a href="#MyReport.__init__-837"><span class="linenos">837</span></a><span class="sd">            of all input images/arrays is multiplied by *rescale*.</span>
</span><span id="MyReport.__init__-838"><a href="#MyReport.__init__-838"><span class="linenos">838</span></a><span class="sd">            Example: If *rescale* = 1/2, then the original size</span>
</span><span id="MyReport.__init__-839"><a href="#MyReport.__init__-839"><span class="linenos">839</span></a><span class="sd">            of all input images/arrays is halved (reduced by 50%).</span>
</span><span id="MyReport.__init__-840"><a href="#MyReport.__init__-840"><span class="linenos">840</span></a><span class="sd">            </span>
</span><span id="MyReport.__init__-841"><a href="#MyReport.__init__-841"><span class="linenos">841</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.__init__-842"><a href="#MyReport.__init__-842"><span class="linenos">842</span></a><span class="sd">        -------</span>
</span><span id="MyReport.__init__-843"><a href="#MyReport.__init__-843"><span class="linenos">843</span></a><span class="sd">        MyReport object</span>
</span><span id="MyReport.__init__-844"><a href="#MyReport.__init__-844"><span class="linenos">844</span></a><span class="sd">            Multi-image = tiled image composed of *images*.</span>
</span><span id="MyReport.__init__-845"><a href="#MyReport.__init__-845"><span class="linenos">845</span></a><span class="sd">            The MyReport object can be shown (MyReport.show)</span>
</span><span id="MyReport.__init__-846"><a href="#MyReport.__init__-846"><span class="linenos">846</span></a><span class="sd">            or saved (MyReport.save).</span>
</span><span id="MyReport.__init__-847"><a href="#MyReport.__init__-847"><span class="linenos">847</span></a><span class="sd">        </span>
</span><span id="MyReport.__init__-848"><a href="#MyReport.__init__-848"><span class="linenos">848</span></a><span class="sd">        Technical notes</span>
</span><span id="MyReport.__init__-849"><a href="#MyReport.__init__-849"><span class="linenos">849</span></a><span class="sd">        ---------------</span>
</span><span id="MyReport.__init__-850"><a href="#MyReport.__init__-850"><span class="linenos">850</span></a><span class="sd">        * Only &#39;gray&#39;, &#39;rgb&#39;, and &#39;rgba&#39; standard formats are supported.</span>
</span><span id="MyReport.__init__-851"><a href="#MyReport.__init__-851"><span class="linenos">851</span></a><span class="sd">          If an image has some non-standard format,</span>
</span><span id="MyReport.__init__-852"><a href="#MyReport.__init__-852"><span class="linenos">852</span></a><span class="sd">          it can be read and converted using a sister MyImage class</span>
</span><span id="MyReport.__init__-853"><a href="#MyReport.__init__-853"><span class="linenos">853</span></a><span class="sd">          (methods MyImage.to_gray, MyImage.to_rgb, MyImage.to_rgba).</span>
</span><span id="MyReport.__init__-854"><a href="#MyReport.__init__-854"><span class="linenos">854</span></a><span class="sd">        * The user does not have to differentiate &#39;rgb&#39; and &#39;rgba&#39; images.</span>
</span><span id="MyReport.__init__-855"><a href="#MyReport.__init__-855"><span class="linenos">855</span></a><span class="sd">          It is enough to specify &#39;rgb&#39; for color images</span>
</span><span id="MyReport.__init__-856"><a href="#MyReport.__init__-856"><span class="linenos">856</span></a><span class="sd">          and if the images are &#39;rgba&#39;, the program can work with them.</span>
</span><span id="MyReport.__init__-857"><a href="#MyReport.__init__-857"><span class="linenos">857</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.__init__-858"><a href="#MyReport.__init__-858"><span class="linenos">858</span></a>        
</span><span id="MyReport.__init__-859"><a href="#MyReport.__init__-859"><span class="linenos">859</span></a>        <span class="c1"># Get basic arguments/properties</span>
</span><span id="MyReport.__init__-860"><a href="#MyReport.__init__-860"><span class="linenos">860</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">images</span>  <span class="o">=</span> <span class="n">images</span>
</span><span id="MyReport.__init__-861"><a href="#MyReport.__init__-861"><span class="linenos">861</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">itype</span>   <span class="o">=</span> <span class="n">itype</span>
</span><span id="MyReport.__init__-862"><a href="#MyReport.__init__-862"><span class="linenos">862</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span>    <span class="o">=</span> <span class="n">grid</span>
</span><span id="MyReport.__init__-863"><a href="#MyReport.__init__-863"><span class="linenos">863</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
</span><span id="MyReport.__init__-864"><a href="#MyReport.__init__-864"><span class="linenos">864</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span>    <span class="o">=</span> <span class="n">fill</span>
</span><span id="MyReport.__init__-865"><a href="#MyReport.__init__-865"><span class="linenos">865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crop</span>    <span class="o">=</span> <span class="n">crop</span>
</span><span id="MyReport.__init__-866"><a href="#MyReport.__init__-866"><span class="linenos">866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="o">=</span> <span class="n">rescale</span>
</span><span id="MyReport.__init__-867"><a href="#MyReport.__init__-867"><span class="linenos">867</span></a>        
</span><span id="MyReport.__init__-868"><a href="#MyReport.__init__-868"><span class="linenos">868</span></a>        <span class="c1"># Process self.images</span>
</span><span id="MyReport.__init__-869"><a href="#MyReport.__init__-869"><span class="linenos">869</span></a>        <span class="c1"># 1) Convert all images to np.arrays.</span>
</span><span id="MyReport.__init__-870"><a href="#MyReport.__init__-870"><span class="linenos">870</span></a>        <span class="c1"># 2) Check if the np.arrays have the same size,</span>
</span><span id="MyReport.__init__-871"><a href="#MyReport.__init__-871"><span class="linenos">871</span></a>        <span class="c1">#    i.e. the same dimensions, including the number of channels.</span>
</span><span id="MyReport.__init__-872"><a href="#MyReport.__init__-872"><span class="linenos">872</span></a>        <span class="c1">#    (channels ~ colors + transparency; usually the last dim/axis</span>
</span><span id="MyReport.__init__-873"><a href="#MyReport.__init__-873"><span class="linenos">873</span></a>        <span class="c1"># 3) Rescale images/arrays if requested.</span>
</span><span id="MyReport.__init__-874"><a href="#MyReport.__init__-874"><span class="linenos">874</span></a>        <span class="c1">#    (the images/arrays are rescaled if self.rescale != None</span>
</span><span id="MyReport.__init__-875"><a href="#MyReport.__init__-875"><span class="linenos">875</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">process_images</span><span class="p">()</span>
</span><span id="MyReport.__init__-876"><a href="#MyReport.__init__-876"><span class="linenos">876</span></a>        
</span><span id="MyReport.__init__-877"><a href="#MyReport.__init__-877"><span class="linenos">877</span></a>        <span class="c1"># Process self.itypes</span>
</span><span id="MyReport.__init__-878"><a href="#MyReport.__init__-878"><span class="linenos">878</span></a>        <span class="c1"># 1) Check image tepes</span>
</span><span id="MyReport.__init__-879"><a href="#MyReport.__init__-879"><span class="linenos">879</span></a>        <span class="c1">#    (the only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="MyReport.__init__-880"><a href="#MyReport.__init__-880"><span class="linenos">880</span></a>        <span class="c1"># 2) Define additional parameters for montage:</span>
</span><span id="MyReport.__init__-881"><a href="#MyReport.__init__-881"><span class="linenos">881</span></a>        <span class="c1">#    (the additional parameters will be saved within the self object</span>
</span><span id="MyReport.__init__-882"><a href="#MyReport.__init__-882"><span class="linenos">882</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_image_types</span><span class="p">()</span>
</span><span id="MyReport.__init__-883"><a href="#MyReport.__init__-883"><span class="linenos">883</span></a>        
</span><span id="MyReport.__init__-884"><a href="#MyReport.__init__-884"><span class="linenos">884</span></a>        <span class="c1"># Rescale images if requested</span>
</span><span id="MyReport.__init__-885"><a href="#MyReport.__init__-885"><span class="linenos">885</span></a>        <span class="c1"># (rescaleing can be performed AFTER...</span>
</span><span id="MyReport.__init__-886"><a href="#MyReport.__init__-886"><span class="linenos">886</span></a>        <span class="c1"># (...self.process_images =&gt; because images are converted to arrays</span>
</span><span id="MyReport.__init__-887"><a href="#MyReport.__init__-887"><span class="linenos">887</span></a>        <span class="c1"># (...self.check_image_types =&gt; because this sets additional params:</span>
</span><span id="MyReport.__init__-888"><a href="#MyReport.__init__-888"><span class="linenos">888</span></a>        <span class="c1"># (   self.montage_channel_axis</span>
</span><span id="MyReport.__init__-889"><a href="#MyReport.__init__-889"><span class="linenos">889</span></a>        <span class="c1"># (   self.montage_number_of_channels</span>
</span><span id="MyReport.__init__-890"><a href="#MyReport.__init__-890"><span class="linenos">890</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale_images</span><span class="p">()</span>
</span><span id="MyReport.__init__-891"><a href="#MyReport.__init__-891"><span class="linenos">891</span></a>        
</span><span id="MyReport.__init__-892"><a href="#MyReport.__init__-892"><span class="linenos">892</span></a>        <span class="c1"># Adjust white/black colors according to image type and no-of-channels</span>
</span><span id="MyReport.__init__-893"><a href="#MyReport.__init__-893"><span class="linenos">893</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span> 
</span><span id="MyReport.__init__-894"><a href="#MyReport.__init__-894"><span class="linenos">894</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>   <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span>
</span><span id="MyReport.__init__-895"><a href="#MyReport.__init__-895"><span class="linenos">895</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> 
</span><span id="MyReport.__init__-896"><a href="#MyReport.__init__-896"><span class="linenos">896</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport.__init__-897"><a href="#MyReport.__init__-897"><span class="linenos">897</span></a>            <span class="n">image_black</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="MyReport.__init__-898"><a href="#MyReport.__init__-898"><span class="linenos">898</span></a>            <span class="n">image_white</span> <span class="o">=</span> <span class="mi">255</span>
</span><span id="MyReport.__init__-899"><a href="#MyReport.__init__-899"><span class="linenos">899</span></a>                
</span><span id="MyReport.__init__-900"><a href="#MyReport.__init__-900"><span class="linenos">900</span></a>        <span class="c1"># Analyze fill = fill_color and adjust acc.to image_type</span>
</span><span id="MyReport.__init__-901"><a href="#MyReport.__init__-901"><span class="linenos">901</span></a>        <span class="k">match</span> <span class="n">fill</span><span class="p">:</span>
</span><span id="MyReport.__init__-902"><a href="#MyReport.__init__-902"><span class="linenos">902</span></a>            <span class="k">case</span> <span class="s1">&#39;white&#39;</span><span class="p">:</span>
</span><span id="MyReport.__init__-903"><a href="#MyReport.__init__-903"><span class="linenos">903</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_white</span>
</span><span id="MyReport.__init__-904"><a href="#MyReport.__init__-904"><span class="linenos">904</span></a>            <span class="k">case</span> <span class="s1">&#39;black&#39;</span><span class="p">:</span>
</span><span id="MyReport.__init__-905"><a href="#MyReport.__init__-905"><span class="linenos">905</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fill</span> <span class="o">=</span> <span class="n">image_black</span>
</span><span id="MyReport.__init__-906"><a href="#MyReport.__init__-906"><span class="linenos">906</span></a>    
</span><span id="MyReport.__init__-907"><a href="#MyReport.__init__-907"><span class="linenos">907</span></a>        <span class="c1"># Create final montage</span>
</span><span id="MyReport.__init__-908"><a href="#MyReport.__init__-908"><span class="linenos">908</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">montage</span><span class="p">(</span>
</span><span id="MyReport.__init__-909"><a href="#MyReport.__init__-909"><span class="linenos">909</span></a>            <span class="n">arr_in</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">,</span>
</span><span id="MyReport.__init__-910"><a href="#MyReport.__init__-910"><span class="linenos">910</span></a>            <span class="n">grid_shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">,</span>
</span><span id="MyReport.__init__-911"><a href="#MyReport.__init__-911"><span class="linenos">911</span></a>            <span class="n">padding_width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">,</span> <span class="n">channel_axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span><span class="p">)</span>
</span><span id="MyReport.__init__-912"><a href="#MyReport.__init__-912"><span class="linenos">912</span></a>        
</span><span id="MyReport.__init__-913"><a href="#MyReport.__init__-913"><span class="linenos">913</span></a>        <span class="c1"># Crop the montage (= reduce the outer padding size to 1/2*padding)</span>
</span><span id="MyReport.__init__-914"><a href="#MyReport.__init__-914"><span class="linenos">914</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">crop</span><span class="p">:</span>
</span><span id="MyReport.__init__-915"><a href="#MyReport.__init__-915"><span class="linenos">915</span></a>            <span class="n">my_crop</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="MyReport.__init__-916"><a href="#MyReport.__init__-916"><span class="linenos">916</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">[</span><span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">,</span> <span class="n">my_crop</span><span class="p">:</span><span class="o">-</span><span class="n">my_crop</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Initialize MyReport object.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>images</strong> (list of images (arrays or str or path-like or MyImage objects)):
The list of images from which the MyReport will be created.
If {images} list consists of arrays,
we assume that these arrays are the direct input to
skimage.util.montage method.
If {images} list contains of strings or path-like objects,
we assume that these are filenames of images
that should be read as arrays.
If {images} lists contains MyImage objecs,
we use MyImage objects to create the final MyReport/montage.</li>
<li><strong>itype</strong> (type of images/arrays ('gray' or 'rgb' or 'rgba')):
The type of input/output images/arrays.
If itype='gray',
then the input/output are converted to grayscale.
If itype='rgb' or 'rgba'
then the input/output are treated as RGB or RGBA images/arrays.</li>
<li><strong>grid</strong> (tuple of two integers (number-of-rows, number-of-cols)):
This argument is an equivalent of
<em>grid_shape</em> argument in skimage.util.montage function.
It defines the number-of-rows and number-of-cols of the montage.
Note: If grid is None, it defaults to a suitable square grid.</li>
<li><strong>padding</strong> (int; the default is 0):
This argument is an equivalent of
<em>padding_width</em> argument in skimage.util.montage function.
It defines the distance between the images/arrays of the montage.</li>
<li><strong>fill</strong> (str or int or tuple/list/array; the default is 'white'):
This argument is a (slightly extended) equivalent of 
<em>fill</em> argument in skimage.util.montage function.
It defines the color between the images/arrays.
If fill='white' or fill='black',
the color among the images/arrays is white or black.
It can also be an integer value (for grayscale images)
or a three-value tuple/list/array (for RGB images);
in such a case, it defines the exact R,G,B color among the images.</li>
<li><strong>crop</strong> (bool; the default is True):
If crop=True, the outer padding is decreased to 1/2*padding.
This makes the montages nicer (like the outputs from ImageMagick).</li>
<li><strong>rescale</strong> (float; the default is None):
If <em>rescale</em> is not None, then the original size
of all input images/arrays is multiplied by <em>rescale</em>.
Example: If <em>rescale</em> = 1/2, then the original size
of all input images/arrays is halved (reduced by 50%).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>MyReport object</strong>: Multi-image = tiled image composed of <em>images</em>.
The MyReport object can be shown (<a href="#MyReport.show">MyReport.show</a>)
or saved (<a href="#MyReport.save">MyReport.save</a>).</li>
</ul>

<h6 id="technical-notes">Technical notes</h6>

<ul>
<li>Only 'gray', 'rgb', and 'rgba' standard formats are supported.
If an image has some non-standard format,
it can be read and converted using a sister MyImage class
(methods <a href="#MyImage.to_gray">MyImage.to_gray</a>, <a href="#MyImage.to_rgb">MyImage.to_rgb</a>, <a href="#MyImage.to_rgba">MyImage.to_rgba</a>).</li>
<li>The user does not have to differentiate 'rgb' and 'rgba' images.
It is enough to specify 'rgb' for color images
and if the images are 'rgba', the program can work with them.</li>
</ul>
</div>


                            </div>
                            <div id="MyReport.process_images" class="classattr">
                                        <input id="MyReport.process_images-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_images</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyReport.process_images-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.process_images"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.process_images-919"><a href="#MyReport.process_images-919"><span class="linenos">919</span></a>    <span class="k">def</span> <span class="nf">process_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport.process_images-920"><a href="#MyReport.process_images-920"><span class="linenos">920</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.process_images-921"><a href="#MyReport.process_images-921"><span class="linenos">921</span></a><span class="sd">        Check and prepare images before creating MyReport/montage.</span>
</span><span id="MyReport.process_images-922"><a href="#MyReport.process_images-922"><span class="linenos">922</span></a><span class="sd">        </span>
</span><span id="MyReport.process_images-923"><a href="#MyReport.process_images-923"><span class="linenos">923</span></a><span class="sd">       * The images used for MyReport/montage</span>
</span><span id="MyReport.process_images-924"><a href="#MyReport.process_images-924"><span class="linenos">924</span></a><span class="sd">         should be convertible to arrays with the same type and size.</span>
</span><span id="MyReport.process_images-925"><a href="#MyReport.process_images-925"><span class="linenos">925</span></a><span class="sd">       * This method goes through all images in self.images</span>
</span><span id="MyReport.process_images-926"><a href="#MyReport.process_images-926"><span class="linenos">926</span></a><span class="sd">         and converts them to arrays.</span>
</span><span id="MyReport.process_images-927"><a href="#MyReport.process_images-927"><span class="linenos">927</span></a><span class="sd">       * If the converted images/arrays have the same dimensions(=type),</span>
</span><span id="MyReport.process_images-928"><a href="#MyReport.process_images-928"><span class="linenos">928</span></a><span class="sd">         then everything is Ok</span>
</span><span id="MyReport.process_images-929"><a href="#MyReport.process_images-929"><span class="linenos">929</span></a><span class="sd">         and we cen proceed.</span>
</span><span id="MyReport.process_images-930"><a href="#MyReport.process_images-930"><span class="linenos">930</span></a><span class="sd">       * If the conerted images/arrays do not have the same dimension(=type),</span>
</span><span id="MyReport.process_images-931"><a href="#MyReport.process_images-931"><span class="linenos">931</span></a><span class="sd">         then this methods ends with an error</span>
</span><span id="MyReport.process_images-932"><a href="#MyReport.process_images-932"><span class="linenos">932</span></a><span class="sd">         and the user has to adjust images BEFORE calling the montage method.</span>
</span><span id="MyReport.process_images-933"><a href="#MyReport.process_images-933"><span class="linenos">933</span></a><span class="sd">       </span>
</span><span id="MyReport.process_images-934"><a href="#MyReport.process_images-934"><span class="linenos">934</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.process_images-935"><a href="#MyReport.process_images-935"><span class="linenos">935</span></a><span class="sd">        -------</span>
</span><span id="MyReport.process_images-936"><a href="#MyReport.process_images-936"><span class="linenos">936</span></a><span class="sd">        None</span>
</span><span id="MyReport.process_images-937"><a href="#MyReport.process_images-937"><span class="linenos">937</span></a><span class="sd">            If everything is Ok,</span>
</span><span id="MyReport.process_images-938"><a href="#MyReport.process_images-938"><span class="linenos">938</span></a><span class="sd">            the checked images are read and saved as arrays in the self.images.</span>
</span><span id="MyReport.process_images-939"><a href="#MyReport.process_images-939"><span class="linenos">939</span></a><span class="sd">            If the images are not of the same type</span>
</span><span id="MyReport.process_images-940"><a href="#MyReport.process_images-940"><span class="linenos">940</span></a><span class="sd">            this method prints an error and the program quits.</span>
</span><span id="MyReport.process_images-941"><a href="#MyReport.process_images-941"><span class="linenos">941</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.process_images-942"><a href="#MyReport.process_images-942"><span class="linenos">942</span></a>        
</span><span id="MyReport.process_images-943"><a href="#MyReport.process_images-943"><span class="linenos">943</span></a>        <span class="c1"># (0) Prepare variables</span>
</span><span id="MyReport.process_images-944"><a href="#MyReport.process_images-944"><span class="linenos">944</span></a>        <span class="n">img_sizes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="MyReport.process_images-945"><a href="#MyReport.process_images-945"><span class="linenos">945</span></a>        
</span><span id="MyReport.process_images-946"><a href="#MyReport.process_images-946"><span class="linenos">946</span></a>        <span class="c1"># (1) Go through the images (self.images) to create montage array.</span>
</span><span id="MyReport.process_images-947"><a href="#MyReport.process_images-947"><span class="linenos">947</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport.process_images-948"><a href="#MyReport.process_images-948"><span class="linenos">948</span></a>            <span class="c1"># Case 1: NumPy array =&gt; just </span>
</span><span id="MyReport.process_images-949"><a href="#MyReport.process_images-949"><span class="linenos">949</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="MyReport.process_images-950"><a href="#MyReport.process_images-950"><span class="linenos">950</span></a>                <span class="c1"># self.images is not changed = we already have an array</span>
</span><span id="MyReport.process_images-951"><a href="#MyReport.process_images-951"><span class="linenos">951</span></a>                <span class="c1"># just save image size</span>
</span><span id="MyReport.process_images-952"><a href="#MyReport.process_images-952"><span class="linenos">952</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport.process_images-953"><a href="#MyReport.process_images-953"><span class="linenos">953</span></a>            <span class="c1"># Case 2: MyImage object =&gt; convert to array and append </span>
</span><span id="MyReport.process_images-954"><a href="#MyReport.process_images-954"><span class="linenos">954</span></a>            <span class="k">elif</span> <span class="s1">&#39;MyImage&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
</span><span id="MyReport.process_images-955"><a href="#MyReport.process_images-955"><span class="linenos">955</span></a>                <span class="c1"># self.images[i] is changed =&gt; np.array instead of MyImg object</span>
</span><span id="MyReport.process_images-956"><a href="#MyReport.process_images-956"><span class="linenos">956</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
</span><span id="MyReport.process_images-957"><a href="#MyReport.process_images-957"><span class="linenos">957</span></a>                <span class="c1"># save image size</span>
</span><span id="MyReport.process_images-958"><a href="#MyReport.process_images-958"><span class="linenos">958</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport.process_images-959"><a href="#MyReport.process_images-959"><span class="linenos">959</span></a>            <span class="c1"># Case 3: None object =&gt; append None</span>
</span><span id="MyReport.process_images-960"><a href="#MyReport.process_images-960"><span class="linenos">960</span></a>            <span class="c1"># TODO: Later, None should be exchanged for suitable empty array.</span>
</span><span id="MyReport.process_images-961"><a href="#MyReport.process_images-961"><span class="linenos">961</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport.process_images-962"><a href="#MyReport.process_images-962"><span class="linenos">962</span></a>                <span class="k">pass</span>
</span><span id="MyReport.process_images-963"><a href="#MyReport.process_images-963"><span class="linenos">963</span></a>            <span class="c1"># Case 4: Nothing of the above =&gt; we suppose it is a filename.</span>
</span><span id="MyReport.process_images-964"><a href="#MyReport.process_images-964"><span class="linenos">964</span></a>            <span class="c1"># TODO: Consider exceptions etc...</span>
</span><span id="MyReport.process_images-965"><a href="#MyReport.process_images-965"><span class="linenos">965</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport.process_images-966"><a href="#MyReport.process_images-966"><span class="linenos">966</span></a>                <span class="c1"># self.images[i] is changed =&gt; we read a file to an array</span>
</span><span id="MyReport.process_images-967"><a href="#MyReport.process_images-967"><span class="linenos">967</span></a>                <span class="k">if</span> <span class="s1">&#39;rgb&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport.process_images-968"><a href="#MyReport.process_images-968"><span class="linenos">968</span></a>                    <span class="c1"># Read image in the default way (as_gray=False)</span>
</span><span id="MyReport.process_images-969"><a href="#MyReport.process_images-969"><span class="linenos">969</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="MyReport.process_images-970"><a href="#MyReport.process_images-970"><span class="linenos">970</span></a>                <span class="k">elif</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport.process_images-971"><a href="#MyReport.process_images-971"><span class="linenos">971</span></a>                    <span class="c1"># Read image as grayscale (as_grayscale=True)</span>
</span><span id="MyReport.process_images-972"><a href="#MyReport.process_images-972"><span class="linenos">972</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">as_gray</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="MyReport.process_images-973"><a href="#MyReport.process_images-973"><span class="linenos">973</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport.process_images-974"><a href="#MyReport.process_images-974"><span class="linenos">974</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in: myimg.Montage.process_images&#39;</span><span class="p">)</span>
</span><span id="MyReport.process_images-975"><a href="#MyReport.process_images-975"><span class="linenos">975</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unknown input image type!&#39;</span><span class="p">)</span>
</span><span id="MyReport.process_images-976"><a href="#MyReport.process_images-976"><span class="linenos">976</span></a>                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="MyReport.process_images-977"><a href="#MyReport.process_images-977"><span class="linenos">977</span></a>                <span class="c1"># Save image size</span>
</span><span id="MyReport.process_images-978"><a href="#MyReport.process_images-978"><span class="linenos">978</span></a>                <span class="n">img_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</span><span id="MyReport.process_images-979"><a href="#MyReport.process_images-979"><span class="linenos">979</span></a>                
</span><span id="MyReport.process_images-980"><a href="#MyReport.process_images-980"><span class="linenos">980</span></a>        <span class="c1"># (2) Additional adjustment for all grayscale images</span>
</span><span id="MyReport.process_images-981"><a href="#MyReport.process_images-981"><span class="linenos">981</span></a>        <span class="c1"># =&gt; if itype = &#39;gray&#39;, then normalize image to 8bit grayscale.</span>
</span><span id="MyReport.process_images-982"><a href="#MyReport.process_images-982"><span class="linenos">982</span></a>        <span class="c1"># (3-value gray-imgs normalized to 1, 8bit to 255, 16bit to 65535</span>
</span><span id="MyReport.process_images-983"><a href="#MyReport.process_images-983"><span class="linenos">983</span></a>        <span class="c1"># (moreover, we can have a combination of various grayscales</span>
</span><span id="MyReport.process_images-984"><a href="#MyReport.process_images-984"><span class="linenos">984</span></a>        <span class="c1"># (to get reproducible results, we ALWA&amp;S normalize to 8-bit gray</span>
</span><span id="MyReport.process_images-985"><a href="#MyReport.process_images-985"><span class="linenos">985</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport.process_images-986"><a href="#MyReport.process_images-986"><span class="linenos">986</span></a>            <span class="k">if</span> <span class="s1">&#39;gray&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="p">:</span>
</span><span id="MyReport.process_images-987"><a href="#MyReport.process_images-987"><span class="linenos">987</span></a>                <span class="n">arr_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="MyReport.process_images-988"><a href="#MyReport.process_images-988"><span class="linenos">988</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="MyReport.process_images-989"><a href="#MyReport.process_images-989"><span class="linenos">989</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">arr_max</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyReport.process_images-990"><a href="#MyReport.process_images-990"><span class="linenos">990</span></a>        
</span><span id="MyReport.process_images-991"><a href="#MyReport.process_images-991"><span class="linenos">991</span></a>        <span class="c1"># (3) Final check if all images are of the same size</span>
</span><span id="MyReport.process_images-992"><a href="#MyReport.process_images-992"><span class="linenos">992</span></a>        <span class="c1"># Trick: All-list-elements-are-the-same</span>
</span><span id="MyReport.process_images-993"><a href="#MyReport.process_images-993"><span class="linenos">993</span></a>        <span class="c1"># if the number of the occurrences of the first elements</span>
</span><span id="MyReport.process_images-994"><a href="#MyReport.process_images-994"><span class="linenos">994</span></a>        <span class="c1"># equals to the total number of elements in the list.</span>
</span><span id="MyReport.process_images-995"><a href="#MyReport.process_images-995"><span class="linenos">995</span></a>        <span class="n">all_the_same</span> <span class="o">=</span> <span class="n">img_sizes</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">img_sizes</span><span class="p">)</span>
</span><span id="MyReport.process_images-996"><a href="#MyReport.process_images-996"><span class="linenos">996</span></a>        <span class="c1"># Now the final check</span>
</span><span id="MyReport.process_images-997"><a href="#MyReport.process_images-997"><span class="linenos">997</span></a>        <span class="k">if</span> <span class="n">all_the_same</span><span class="p">:</span>
</span><span id="MyReport.process_images-998"><a href="#MyReport.process_images-998"><span class="linenos">998</span></a>            <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Check and prepare images before creating MyReport/montage.</p>

<ul>
<li>The images used for MyReport/montage
should be convertible to arrays with the same type and size.</li>
<li>This method goes through all images in self.images
and converts them to arrays.</li>
<li>If the converted images/arrays have the same dimensions(=type),
then everything is Ok
and we cen proceed.</li>
<li><p>If the conerted images/arrays do not have the same dimension(=type),
 then this methods ends with an error
 and the user has to adjust images BEFORE calling the montage method.</p>

<p>Returns</p></li>
</ul>

<hr />

<p>None
     If everything is Ok,
     the checked images are read and saved as arrays in the self.images.
     If the images are not of the same type
     this method prints an error and the program quits.</p>
</div>


                            </div>
                            <div id="MyReport.check_image_types" class="classattr">
                                        <input id="MyReport.check_image_types-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check_image_types</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyReport.check_image_types-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.check_image_types"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.check_image_types-1001"><a href="#MyReport.check_image_types-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">check_image_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport.check_image_types-1002"><a href="#MyReport.check_image_types-1002"><span class="linenos">1002</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.check_image_types-1003"><a href="#MyReport.check_image_types-1003"><span class="linenos">1003</span></a><span class="sd">        Check image/array types and prepare additional parametrs for montage.</span>
</span><span id="MyReport.check_image_types-1004"><a href="#MyReport.check_image_types-1004"><span class="linenos">1004</span></a><span class="sd">        </span>
</span><span id="MyReport.check_image_types-1005"><a href="#MyReport.check_image_types-1005"><span class="linenos">1005</span></a><span class="sd">        * The only allowed image types are &#39;rgb&#39; and &#39;gray&#39;.</span>
</span><span id="MyReport.check_image_types-1006"><a href="#MyReport.check_image_types-1006"><span class="linenos">1006</span></a><span class="sd">        * Other image types =&gt; print error message and exit program.</span>
</span><span id="MyReport.check_image_types-1007"><a href="#MyReport.check_image_types-1007"><span class="linenos">1007</span></a><span class="sd">        * For each image type we have to set two additional montage params:</span>
</span><span id="MyReport.check_image_types-1008"><a href="#MyReport.check_image_types-1008"><span class="linenos">1008</span></a><span class="sd">            - self.montage_channel_axis =&gt; the last axis of the array</span>
</span><span id="MyReport.check_image_types-1009"><a href="#MyReport.check_image_types-1009"><span class="linenos">1009</span></a><span class="sd">            - self.montage_number_of_channels =&gt; gray ~ 1, rgb ~ 3, rgba ~ 4</span>
</span><span id="MyReport.check_image_types-1010"><a href="#MyReport.check_image_types-1010"><span class="linenos">1010</span></a><span class="sd">        </span>
</span><span id="MyReport.check_image_types-1011"><a href="#MyReport.check_image_types-1011"><span class="linenos">1011</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.check_image_types-1012"><a href="#MyReport.check_image_types-1012"><span class="linenos">1012</span></a><span class="sd">        -------</span>
</span><span id="MyReport.check_image_types-1013"><a href="#MyReport.check_image_types-1013"><span class="linenos">1013</span></a><span class="sd">        None</span>
</span><span id="MyReport.check_image_types-1014"><a href="#MyReport.check_image_types-1014"><span class="linenos">1014</span></a><span class="sd">            The additional montage parameters are are saved in</span>
</span><span id="MyReport.check_image_types-1015"><a href="#MyReport.check_image_types-1015"><span class="linenos">1015</span></a><span class="sd">            self.montage_channel_axes and self.montage_number_of_channels.</span>
</span><span id="MyReport.check_image_types-1016"><a href="#MyReport.check_image_types-1016"><span class="linenos">1016</span></a><span class="sd">            These parameters are needed</span>
</span><span id="MyReport.check_image_types-1017"><a href="#MyReport.check_image_types-1017"><span class="linenos">1017</span></a><span class="sd">            for correct treatement of rgb/gray images/arrays.</span>
</span><span id="MyReport.check_image_types-1018"><a href="#MyReport.check_image_types-1018"><span class="linenos">1018</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.check_image_types-1019"><a href="#MyReport.check_image_types-1019"><span class="linenos">1019</span></a>        
</span><span id="MyReport.check_image_types-1020"><a href="#MyReport.check_image_types-1020"><span class="linenos">1020</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgb&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;rgba&#39;</span><span class="p">):</span>
</span><span id="MyReport.check_image_types-1021"><a href="#MyReport.check_image_types-1021"><span class="linenos">1021</span></a>            <span class="c1"># RGB and RGBA images = 3D-arrays</span>
</span><span id="MyReport.check_image_types-1022"><a href="#MyReport.check_image_types-1022"><span class="linenos">1022</span></a>            <span class="c1"># the last axis = channel axis = color channels = axis 4 =&gt; index 3</span>
</span><span id="MyReport.check_image_types-1023"><a href="#MyReport.check_image_types-1023"><span class="linenos">1023</span></a>            <span class="c1"># the number of channels = either 3 (RGB) or 4 (RGBA)</span>
</span><span id="MyReport.check_image_types-1024"><a href="#MyReport.check_image_types-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="MyReport.check_image_types-1025"><a href="#MyReport.check_image_types-1025"><span class="linenos">1025</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="MyReport.check_image_types-1026"><a href="#MyReport.check_image_types-1026"><span class="linenos">1026</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport.check_image_types-1027"><a href="#MyReport.check_image_types-1027"><span class="linenos">1027</span></a>            <span class="c1"># Grayscale images = 2D-arrays</span>
</span><span id="MyReport.check_image_types-1028"><a href="#MyReport.check_image_types-1028"><span class="linenos">1028</span></a>            <span class="c1"># (no channel axis = just one channel, grayscale value</span>
</span><span id="MyReport.check_image_types-1029"><a href="#MyReport.check_image_types-1029"><span class="linenos">1029</span></a>            <span class="c1"># (all grayscale images are read by ski.io.imread as 1-value gray</span>
</span><span id="MyReport.check_image_types-1030"><a href="#MyReport.check_image_types-1030"><span class="linenos">1030</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyReport.check_image_types-1031"><a href="#MyReport.check_image_types-1031"><span class="linenos">1031</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage_number_of_channels</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="MyReport.check_image_types-1032"><a href="#MyReport.check_image_types-1032"><span class="linenos">1032</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport.check_image_types-1033"><a href="#MyReport.check_image_types-1033"><span class="linenos">1033</span></a>            <span class="c1"># Other image formats are not supported at the moment.</span>
</span><span id="MyReport.check_image_types-1034"><a href="#MyReport.check_image_types-1034"><span class="linenos">1034</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown image type: [</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span><span class="si">}</span><span class="s1">]!&#39;</span><span class="p">)</span>
</span><span id="MyReport.check_image_types-1035"><a href="#MyReport.check_image_types-1035"><span class="linenos">1035</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Allowed image types are &#39;gray&#39;, &#39;rgb&#39; or &#39;rgba&#39;.&quot;</span><span class="p">)</span>
</span><span id="MyReport.check_image_types-1036"><a href="#MyReport.check_image_types-1036"><span class="linenos">1036</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Check image/array types and prepare additional parametrs for montage.</p>

<ul>
<li>The only allowed image types are 'rgb' and 'gray'.</li>
<li>Other image types =&gt; print error message and exit program.</li>
<li>For each image type we have to set two additional montage params:
<ul>
<li>self.montage_channel_axis =&gt; the last axis of the array</li>
<li>self.montage_number_of_channels =&gt; gray ~ 1, rgb ~ 3, rgba ~ 4</li>
</ul></li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The additional montage parameters are are saved in
self.montage_channel_axes and self.montage_number_of_channels.
These parameters are needed
for correct treatement of rgb/gray images/arrays.</li>
</ul>
</div>


                            </div>
                            <div id="MyReport.rescale_images" class="classattr">
                                        <input id="MyReport.rescale_images-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rescale_images</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyReport.rescale_images-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.rescale_images"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.rescale_images-1039"><a href="#MyReport.rescale_images-1039"><span class="linenos">1039</span></a>    <span class="k">def</span> <span class="nf">rescale_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MyReport.rescale_images-1040"><a href="#MyReport.rescale_images-1040"><span class="linenos">1040</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.rescale_images-1041"><a href="#MyReport.rescale_images-1041"><span class="linenos">1041</span></a><span class="sd">        Rescale input images/arrays if requested.</span>
</span><span id="MyReport.rescale_images-1042"><a href="#MyReport.rescale_images-1042"><span class="linenos">1042</span></a><span class="sd">        </span>
</span><span id="MyReport.rescale_images-1043"><a href="#MyReport.rescale_images-1043"><span class="linenos">1043</span></a><span class="sd">        * The images are rescaled if self.rescale != None.</span>
</span><span id="MyReport.rescale_images-1044"><a href="#MyReport.rescale_images-1044"><span class="linenos">1044</span></a><span class="sd">        * This rescaling should be applied to each of self.images</span>
</span><span id="MyReport.rescale_images-1045"><a href="#MyReport.rescale_images-1045"><span class="linenos">1045</span></a><span class="sd">          AFTER the images have been checked and converted to arrays.</span>
</span><span id="MyReport.rescale_images-1046"><a href="#MyReport.rescale_images-1046"><span class="linenos">1046</span></a><span class="sd">       </span>
</span><span id="MyReport.rescale_images-1047"><a href="#MyReport.rescale_images-1047"><span class="linenos">1047</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.rescale_images-1048"><a href="#MyReport.rescale_images-1048"><span class="linenos">1048</span></a><span class="sd">        -------</span>
</span><span id="MyReport.rescale_images-1049"><a href="#MyReport.rescale_images-1049"><span class="linenos">1049</span></a><span class="sd">        None</span>
</span><span id="MyReport.rescale_images-1050"><a href="#MyReport.rescale_images-1050"><span class="linenos">1050</span></a><span class="sd">            The rescaled images/arrays are saved in self.images.</span>
</span><span id="MyReport.rescale_images-1051"><a href="#MyReport.rescale_images-1051"><span class="linenos">1051</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.rescale_images-1052"><a href="#MyReport.rescale_images-1052"><span class="linenos">1052</span></a>        
</span><span id="MyReport.rescale_images-1053"><a href="#MyReport.rescale_images-1053"><span class="linenos">1053</span></a>        <span class="c1"># Rescale all input images/arrays if requested.</span>
</span><span id="MyReport.rescale_images-1054"><a href="#MyReport.rescale_images-1054"><span class="linenos">1054</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport.rescale_images-1055"><a href="#MyReport.rescale_images-1055"><span class="linenos">1055</span></a>            <span class="c1"># Go through the images/arrays in arr_in</span>
</span><span id="MyReport.rescale_images-1056"><a href="#MyReport.rescale_images-1056"><span class="linenos">1056</span></a>            <span class="c1"># and rescale them one-by-one,</span>
</span><span id="MyReport.rescale_images-1057"><a href="#MyReport.rescale_images-1057"><span class="linenos">1057</span></a>            <span class="c1"># preserving the range and data type.</span>
</span><span id="MyReport.rescale_images-1058"><a href="#MyReport.rescale_images-1058"><span class="linenos">1058</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">):</span>
</span><span id="MyReport.rescale_images-1059"><a href="#MyReport.rescale_images-1059"><span class="linenos">1059</span></a>                <span class="c1"># Save the original data type.</span>
</span><span id="MyReport.rescale_images-1060"><a href="#MyReport.rescale_images-1060"><span class="linenos">1060</span></a>                <span class="n">original_data_type</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">dtype</span>
</span><span id="MyReport.rescale_images-1061"><a href="#MyReport.rescale_images-1061"><span class="linenos">1061</span></a>                <span class="c1"># Prepare channel axis</span>
</span><span id="MyReport.rescale_images-1062"><a href="#MyReport.rescale_images-1062"><span class="linenos">1062</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="MyReport.rescale_images-1063"><a href="#MyReport.rescale_images-1063"><span class="linenos">1063</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage_channel_axis</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="MyReport.rescale_images-1064"><a href="#MyReport.rescale_images-1064"><span class="linenos">1064</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport.rescale_images-1065"><a href="#MyReport.rescale_images-1065"><span class="linenos">1065</span></a>                    <span class="n">channel_axis</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MyReport.rescale_images-1066"><a href="#MyReport.rescale_images-1066"><span class="linenos">1066</span></a>                <span class="c1"># Rescale the array, preserving the range and data type.</span>
</span><span id="MyReport.rescale_images-1067"><a href="#MyReport.rescale_images-1067"><span class="linenos">1067</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ski</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rescale</span><span class="p">(</span>
</span><span id="MyReport.rescale_images-1068"><a href="#MyReport.rescale_images-1068"><span class="linenos">1068</span></a>                    <span class="n">image</span><span class="p">,</span>                        <span class="c1"># input montage array</span>
</span><span id="MyReport.rescale_images-1069"><a href="#MyReport.rescale_images-1069"><span class="linenos">1069</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">rescale</span><span class="p">,</span>                 <span class="c1"># rescaling coefficient</span>
</span><span id="MyReport.rescale_images-1070"><a href="#MyReport.rescale_images-1070"><span class="linenos">1070</span></a>                    <span class="n">anti_aliasing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>           <span class="c1"># anti-aliasing</span>
</span><span id="MyReport.rescale_images-1071"><a href="#MyReport.rescale_images-1071"><span class="linenos">1071</span></a>                    <span class="n">preserve_range</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>          <span class="c1"># preserve intensities</span>
</span><span id="MyReport.rescale_images-1072"><a href="#MyReport.rescale_images-1072"><span class="linenos">1072</span></a>                    <span class="n">channel_axis</span><span class="o">=</span><span class="n">channel_axis</span>     <span class="c1"># channel axis for RGB images</span>
</span><span id="MyReport.rescale_images-1073"><a href="#MyReport.rescale_images-1073"><span class="linenos">1073</span></a>                    <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">original_data_type</span><span class="p">)</span>  <span class="c1"># preserve original data type</span>
</span></pre></div>


            <div class="docstring"><p>Rescale input images/arrays if requested.</p>

<ul>
<li>The images are rescaled if self.rescale != None.</li>
<li>This rescaling should be applied to each of self.images
AFTER the images have been checked and converted to arrays.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The rescaled images/arrays are saved in self.images.</li>
</ul>
</div>


                            </div>
                            <div id="MyReport.show" class="classattr">
                                        <input id="MyReport.show-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">show</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cmap</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">axes</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyReport.show-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.show"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.show-1076"><a href="#MyReport.show-1076"><span class="linenos">1076</span></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="MyReport.show-1077"><a href="#MyReport.show-1077"><span class="linenos">1077</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.show-1078"><a href="#MyReport.show-1078"><span class="linenos">1078</span></a><span class="sd">        Show MyReport = rectangular montage of images.</span>
</span><span id="MyReport.show-1079"><a href="#MyReport.show-1079"><span class="linenos">1079</span></a>
</span><span id="MyReport.show-1080"><a href="#MyReport.show-1080"><span class="linenos">1080</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport.show-1081"><a href="#MyReport.show-1081"><span class="linenos">1081</span></a><span class="sd">        ----------</span>
</span><span id="MyReport.show-1082"><a href="#MyReport.show-1082"><span class="linenos">1082</span></a><span class="sd">        cmap : matplotlib colormap name, optional, default is None</span>
</span><span id="MyReport.show-1083"><a href="#MyReport.show-1083"><span class="linenos">1083</span></a><span class="sd">            Matplotlib colormap name.</span>
</span><span id="MyReport.show-1084"><a href="#MyReport.show-1084"><span class="linenos">1084</span></a><span class="sd">            If omitted and we have grayscale image, then we use cmap=gray.</span>
</span><span id="MyReport.show-1085"><a href="#MyReport.show-1085"><span class="linenos">1085</span></a><span class="sd">        axes : bool, optional, default is False</span>
</span><span id="MyReport.show-1086"><a href="#MyReport.show-1086"><span class="linenos">1086</span></a><span class="sd">            If axes=False (default), do not show axes around the image.</span>
</span><span id="MyReport.show-1087"><a href="#MyReport.show-1087"><span class="linenos">1087</span></a>
</span><span id="MyReport.show-1088"><a href="#MyReport.show-1088"><span class="linenos">1088</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.show-1089"><a href="#MyReport.show-1089"><span class="linenos">1089</span></a><span class="sd">        -------</span>
</span><span id="MyReport.show-1090"><a href="#MyReport.show-1090"><span class="linenos">1090</span></a><span class="sd">        None</span>
</span><span id="MyReport.show-1091"><a href="#MyReport.show-1091"><span class="linenos">1091</span></a><span class="sd">            The output is the MyReport (image montage) shown on the screen.</span>
</span><span id="MyReport.show-1092"><a href="#MyReport.show-1092"><span class="linenos">1092</span></a>
</span><span id="MyReport.show-1093"><a href="#MyReport.show-1093"><span class="linenos">1093</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.show-1094"><a href="#MyReport.show-1094"><span class="linenos">1094</span></a>        <span class="c1"># Check/adjust the colormap</span>
</span><span id="MyReport.show-1095"><a href="#MyReport.show-1095"><span class="linenos">1095</span></a>        <span class="c1"># (if we have grayscale image and no colormap, we want cmap=&#39;gray&#39;</span>
</span><span id="MyReport.show-1096"><a href="#MyReport.show-1096"><span class="linenos">1096</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">cmap</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">):</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>
</span><span id="MyReport.show-1097"><a href="#MyReport.show-1097"><span class="linenos">1097</span></a>        <span class="c1"># Prepare the plot</span>
</span><span id="MyReport.show-1098"><a href="#MyReport.show-1098"><span class="linenos">1098</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</span><span id="MyReport.show-1099"><a href="#MyReport.show-1099"><span class="linenos">1099</span></a>        <span class="c1"># Switch off the axes, if not requested otherwise</span>
</span><span id="MyReport.show-1100"><a href="#MyReport.show-1100"><span class="linenos">1100</span></a>        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">axes</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
</span><span id="MyReport.show-1101"><a href="#MyReport.show-1101"><span class="linenos">1101</span></a>        <span class="c1"># Show the plot</span>
</span><span id="MyReport.show-1102"><a href="#MyReport.show-1102"><span class="linenos">1102</span></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Show MyReport = rectangular montage of images.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>cmap</strong> (matplotlib colormap name, optional, default is None):
Matplotlib colormap name.
If omitted and we have grayscale image, then we use cmap=gray.</li>
<li><strong>axes</strong> (bool, optional, default is False):
If axes=False (default), do not show axes around the image.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is the MyReport (image montage) shown on the screen.</li>
</ul>
</div>


                            </div>
                            <div id="MyReport.save" class="classattr">
                                        <input id="MyReport.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">output_image</span>, </span><span class="param"><span class="n">dpi</span><span class="o">=</span><span class="mi">300</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MyReport.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MyReport.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MyReport.save-1105"><a href="#MyReport.save-1105"><span class="linenos">1105</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_image</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
</span><span id="MyReport.save-1106"><a href="#MyReport.save-1106"><span class="linenos">1106</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="MyReport.save-1107"><a href="#MyReport.save-1107"><span class="linenos">1107</span></a><span class="sd">        Save MyReport (using an arbitrary path, name and extension).</span>
</span><span id="MyReport.save-1108"><a href="#MyReport.save-1108"><span class="linenos">1108</span></a>
</span><span id="MyReport.save-1109"><a href="#MyReport.save-1109"><span class="linenos">1109</span></a><span class="sd">        Parameters</span>
</span><span id="MyReport.save-1110"><a href="#MyReport.save-1110"><span class="linenos">1110</span></a><span class="sd">        ----------</span>
</span><span id="MyReport.save-1111"><a href="#MyReport.save-1111"><span class="linenos">1111</span></a><span class="sd">        output_image : str or path-like object</span>
</span><span id="MyReport.save-1112"><a href="#MyReport.save-1112"><span class="linenos">1112</span></a><span class="sd">            Filename of the output image.</span>
</span><span id="MyReport.save-1113"><a href="#MyReport.save-1113"><span class="linenos">1113</span></a><span class="sd">            The format of saved image is guessed from the extension.</span>
</span><span id="MyReport.save-1114"><a href="#MyReport.save-1114"><span class="linenos">1114</span></a><span class="sd">        dpi : int, optional, default is 300</span>
</span><span id="MyReport.save-1115"><a href="#MyReport.save-1115"><span class="linenos">1115</span></a><span class="sd">            The dpi of the saved image/montage.</span>
</span><span id="MyReport.save-1116"><a href="#MyReport.save-1116"><span class="linenos">1116</span></a>
</span><span id="MyReport.save-1117"><a href="#MyReport.save-1117"><span class="linenos">1117</span></a><span class="sd">        Returns</span>
</span><span id="MyReport.save-1118"><a href="#MyReport.save-1118"><span class="linenos">1118</span></a><span class="sd">        -------</span>
</span><span id="MyReport.save-1119"><a href="#MyReport.save-1119"><span class="linenos">1119</span></a><span class="sd">        None</span>
</span><span id="MyReport.save-1120"><a href="#MyReport.save-1120"><span class="linenos">1120</span></a><span class="sd">            The output is the saved *output_image*.</span>
</span><span id="MyReport.save-1121"><a href="#MyReport.save-1121"><span class="linenos">1121</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="MyReport.save-1122"><a href="#MyReport.save-1122"><span class="linenos">1122</span></a>        <span class="c1"># Convert to grayscale, if required.</span>
</span><span id="MyReport.save-1123"><a href="#MyReport.save-1123"><span class="linenos">1123</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport.save-1124"><a href="#MyReport.save-1124"><span class="linenos">1124</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">montage</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="MyReport.save-1125"><a href="#MyReport.save-1125"><span class="linenos">1125</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="MyReport.save-1126"><a href="#MyReport.save-1126"><span class="linenos">1126</span></a>        <span class="c1"># Save the output image montage.</span>
</span><span id="MyReport.save-1127"><a href="#MyReport.save-1127"><span class="linenos">1127</span></a>        <span class="c1"># (ski.io.imsave does not support saving with defined DPI</span>
</span><span id="MyReport.save-1128"><a href="#MyReport.save-1128"><span class="linenos">1128</span></a>        <span class="c1"># (plt.imsave supports DPI, but grayscale images require cmap=&#39;gray&#39;</span>
</span><span id="MyReport.save-1129"><a href="#MyReport.save-1129"><span class="linenos">1129</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">itype</span> <span class="o">==</span> <span class="s1">&#39;gray&#39;</span><span class="p">:</span>
</span><span id="MyReport.save-1130"><a href="#MyReport.save-1130"><span class="linenos">1130</span></a>            <span class="c1"># Grayscale images are saved with colormap = &#39;gray&#39;</span>
</span><span id="MyReport.save-1131"><a href="#MyReport.save-1131"><span class="linenos">1131</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</span><span id="MyReport.save-1132"><a href="#MyReport.save-1132"><span class="linenos">1132</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="MyReport.save-1133"><a href="#MyReport.save-1133"><span class="linenos">1133</span></a>            <span class="c1"># RGB (and RGBA) images are saved without cmap to keep the colors</span>
</span><span id="MyReport.save-1134"><a href="#MyReport.save-1134"><span class="linenos">1134</span></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="n">output_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">montage</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save MyReport (using an arbitrary path, name and extension).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>output_image</strong> (str or path-like object):
Filename of the output image.
The format of saved image is guessed from the extension.</li>
<li><strong>dpi</strong> (int, optional, default is 300):
The dpi of the saved image/montage.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The output is the saved *output_image*.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="Units">
                            <input id="Units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Units</span>:

                <label class="view-source-button" for="Units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Units-1138"><a href="#Units-1138"><span class="linenos">1138</span></a><span class="nd">@dataclass</span>
</span><span id="Units-1139"><a href="#Units-1139"><span class="linenos">1139</span></a><span class="k">class</span> <span class="nc">Units</span><span class="p">:</span>
</span><span id="Units-1140"><a href="#Units-1140"><span class="linenos">1140</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="Units-1141"><a href="#Units-1141"><span class="linenos">1141</span></a><span class="sd">    Data class: just a container for the following two dataclasses.</span>
</span><span id="Units-1142"><a href="#Units-1142"><span class="linenos">1142</span></a><span class="sd">    </span>
</span><span id="Units-1143"><a href="#Units-1143"><span class="linenos">1143</span></a><span class="sd">    * The sub-dataclasses are used in NumberWithUnits/ScaleWithUnits objects.</span>
</span><span id="Units-1144"><a href="#Units-1144"><span class="linenos">1144</span></a><span class="sd">    * The units definitions are fixed, the users should not change them.</span>
</span><span id="Units-1145"><a href="#Units-1145"><span class="linenos">1145</span></a><span class="sd">    * The correct units (Lenghts or RecLenghts) are guessed</span>
</span><span id="Units-1146"><a href="#Units-1146"><span class="linenos">1146</span></a><span class="sd">      during NumberWithUnits/ScaleWithUnits object initialization.</span>
</span><span id="Units-1147"><a href="#Units-1147"><span class="linenos">1147</span></a><span class="sd">      Example: If `nwu = NumberWithUnits(&#39;2um&#39;)`, then we use `Units.Lenghts`.</span>
</span><span id="Units-1148"><a href="#Units-1148"><span class="linenos">1148</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="Units-1149"><a href="#Units-1149"><span class="linenos">1149</span></a>    
</span><span id="Units-1150"><a href="#Units-1150"><span class="linenos">1150</span></a>    <span class="nd">@dataclass</span>
</span><span id="Units-1151"><a href="#Units-1151"><span class="linenos">1151</span></a>    <span class="k">class</span> <span class="nc">Lengths</span><span class="p">:</span>
</span><span id="Units-1152"><a href="#Units-1152"><span class="linenos">1152</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="Units-1153"><a href="#Units-1153"><span class="linenos">1153</span></a><span class="sd">        Data class: length units (and their ratios) for micrographs.    </span>
</span><span id="Units-1154"><a href="#Units-1154"><span class="linenos">1154</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Units-1155"><a href="#Units-1155"><span class="linenos">1155</span></a>        <span class="n">micro</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u00B5</span><span class="s1">&#39;</span>
</span><span id="Units-1156"><a href="#Units-1156"><span class="linenos">1156</span></a>        <span class="n">angstrem</span>   <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="Units-1157"><a href="#Units-1157"><span class="linenos">1157</span></a>        <span class="n">micrometer</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">micro</span> <span class="o">+</span> <span class="s1">&#39;m&#39;</span>
</span><span id="Units-1158"><a href="#Units-1158"><span class="linenos">1158</span></a>        <span class="n">units</span>      <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;cm&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="s1">&#39;um&#39;</span><span class="p">,</span> <span class="s1">&#39;nm&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</span><span id="Units-1159"><a href="#Units-1159"><span class="linenos">1159</span></a>        <span class="n">ratios</span>     <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">,</span> <span class="mf">1e9</span><span class="p">,</span> <span class="mf">1e10</span><span class="p">)</span>
</span><span id="Units-1160"><a href="#Units-1160"><span class="linenos">1160</span></a>    
</span><span id="Units-1161"><a href="#Units-1161"><span class="linenos">1161</span></a>    <span class="nd">@dataclass</span>
</span><span id="Units-1162"><a href="#Units-1162"><span class="linenos">1162</span></a>    <span class="k">class</span> <span class="nc">RecLengths</span><span class="p">:</span>
</span><span id="Units-1163"><a href="#Units-1163"><span class="linenos">1163</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="Units-1164"><a href="#Units-1164"><span class="linenos">1164</span></a><span class="sd">        Data class: reciprocal lenght units (and their ratios).</span>
</span><span id="Units-1165"><a href="#Units-1165"><span class="linenos">1165</span></a><span class="sd">        </span>
</span><span id="Units-1166"><a href="#Units-1166"><span class="linenos">1166</span></a><span class="sd">        * Reminder: reciprocal lenghts are used in diffractograms</span>
</span><span id="Units-1167"><a href="#Units-1167"><span class="linenos">1167</span></a><span class="sd">        * Here: rust a pair of units that are employed in real life: 1/nm, 1/A</span>
</span><span id="Units-1168"><a href="#Units-1168"><span class="linenos">1168</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Units-1169"><a href="#Units-1169"><span class="linenos">1169</span></a>        <span class="n">angstrem</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="Units-1170"><a href="#Units-1170"><span class="linenos">1170</span></a>        <span class="n">rec_angstrem</span>  <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span>  <span class="s1">&#39;1/&#39;</span><span class="o">+</span><span class="n">angstrem</span>
</span><span id="Units-1171"><a href="#Units-1171"><span class="linenos">1171</span></a>        <span class="n">units</span>         <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1/nm&#39;</span><span class="p">,</span><span class="s1">&#39;1/A&#39;</span><span class="p">)</span>
</span><span id="Units-1172"><a href="#Units-1172"><span class="linenos">1172</span></a>        <span class="n">ratios</span>        <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Data class: just a container for the following two dataclasses.</p>

<ul>
<li>The sub-dataclasses are used in NumberWithUnits/ScaleWithUnits objects.</li>
<li>The units definitions are fixed, the users should not change them.</li>
<li>The correct units (Lenghts or RecLenghts) are guessed
during NumberWithUnits/ScaleWithUnits object initialization.
Example: If <code>nwu = NumberWithUnits('2um')</code>, then we use <code>Units.Lenghts</code>.</li>
</ul>
</div>


                </section>
                <section id="Units.Lengths">
                            <input id="Units.Lengths-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Units.Lengths</span>:

                <label class="view-source-button" for="Units.Lengths-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Units.Lengths"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Units.Lengths-1150"><a href="#Units.Lengths-1150"><span class="linenos">1150</span></a>    <span class="nd">@dataclass</span>
</span><span id="Units.Lengths-1151"><a href="#Units.Lengths-1151"><span class="linenos">1151</span></a>    <span class="k">class</span> <span class="nc">Lengths</span><span class="p">:</span>
</span><span id="Units.Lengths-1152"><a href="#Units.Lengths-1152"><span class="linenos">1152</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="Units.Lengths-1153"><a href="#Units.Lengths-1153"><span class="linenos">1153</span></a><span class="sd">        Data class: length units (and their ratios) for micrographs.    </span>
</span><span id="Units.Lengths-1154"><a href="#Units.Lengths-1154"><span class="linenos">1154</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Units.Lengths-1155"><a href="#Units.Lengths-1155"><span class="linenos">1155</span></a>        <span class="n">micro</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u00B5</span><span class="s1">&#39;</span>
</span><span id="Units.Lengths-1156"><a href="#Units.Lengths-1156"><span class="linenos">1156</span></a>        <span class="n">angstrem</span>   <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="Units.Lengths-1157"><a href="#Units.Lengths-1157"><span class="linenos">1157</span></a>        <span class="n">micrometer</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">micro</span> <span class="o">+</span> <span class="s1">&#39;m&#39;</span>
</span><span id="Units.Lengths-1158"><a href="#Units.Lengths-1158"><span class="linenos">1158</span></a>        <span class="n">units</span>      <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;cm&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span> <span class="s1">&#39;um&#39;</span><span class="p">,</span> <span class="s1">&#39;nm&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
</span><span id="Units.Lengths-1159"><a href="#Units.Lengths-1159"><span class="linenos">1159</span></a>        <span class="n">ratios</span>     <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">,</span> <span class="mf">1e9</span><span class="p">,</span> <span class="mf">1e10</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Data class: length units (and their ratios) for micrographs.</p>
</div>


                </section>
                <section id="Units.RecLengths">
                            <input id="Units.RecLengths-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator decorator-dataclass">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Units.RecLengths</span>:

                <label class="view-source-button" for="Units.RecLengths-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Units.RecLengths"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Units.RecLengths-1161"><a href="#Units.RecLengths-1161"><span class="linenos">1161</span></a>    <span class="nd">@dataclass</span>
</span><span id="Units.RecLengths-1162"><a href="#Units.RecLengths-1162"><span class="linenos">1162</span></a>    <span class="k">class</span> <span class="nc">RecLengths</span><span class="p">:</span>
</span><span id="Units.RecLengths-1163"><a href="#Units.RecLengths-1163"><span class="linenos">1163</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="Units.RecLengths-1164"><a href="#Units.RecLengths-1164"><span class="linenos">1164</span></a><span class="sd">        Data class: reciprocal lenght units (and their ratios).</span>
</span><span id="Units.RecLengths-1165"><a href="#Units.RecLengths-1165"><span class="linenos">1165</span></a><span class="sd">        </span>
</span><span id="Units.RecLengths-1166"><a href="#Units.RecLengths-1166"><span class="linenos">1166</span></a><span class="sd">        * Reminder: reciprocal lenghts are used in diffractograms</span>
</span><span id="Units.RecLengths-1167"><a href="#Units.RecLengths-1167"><span class="linenos">1167</span></a><span class="sd">        * Here: rust a pair of units that are employed in real life: 1/nm, 1/A</span>
</span><span id="Units.RecLengths-1168"><a href="#Units.RecLengths-1168"><span class="linenos">1168</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="Units.RecLengths-1169"><a href="#Units.RecLengths-1169"><span class="linenos">1169</span></a>        <span class="n">angstrem</span>      <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\u212B</span><span class="s1">&#39;</span>
</span><span id="Units.RecLengths-1170"><a href="#Units.RecLengths-1170"><span class="linenos">1170</span></a>        <span class="n">rec_angstrem</span>  <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span>  <span class="s1">&#39;1/&#39;</span><span class="o">+</span><span class="n">angstrem</span>
</span><span id="Units.RecLengths-1171"><a href="#Units.RecLengths-1171"><span class="linenos">1171</span></a>        <span class="n">units</span>         <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1/nm&#39;</span><span class="p">,</span><span class="s1">&#39;1/A&#39;</span><span class="p">)</span>
</span><span id="Units.RecLengths-1172"><a href="#Units.RecLengths-1172"><span class="linenos">1172</span></a>        <span class="n">ratios</span>        <span class="p">:</span> <span class="nb">tuple</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Data class: reciprocal lenght units (and their ratios).</p>

<ul>
<li>Reminder: reciprocal lenghts are used in diffractograms</li>
<li>Here: rust a pair of units that are employed in real life: 1/nm, 1/A</li>
</ul>
</div>


                </section>
                <section id="NumberWithUnits">
                            <input id="NumberWithUnits-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">NumberWithUnits</span>:

                <label class="view-source-button" for="NumberWithUnits-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits-1175"><a href="#NumberWithUnits-1175"><span class="linenos">1175</span></a><span class="k">class</span> <span class="nc">NumberWithUnits</span><span class="p">:</span>
</span><span id="NumberWithUnits-1176"><a href="#NumberWithUnits-1176"><span class="linenos">1176</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1177"><a href="#NumberWithUnits-1177"><span class="linenos">1177</span></a><span class="sd">    Class defining NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1178"><a href="#NumberWithUnits-1178"><span class="linenos">1178</span></a><span class="sd">    </span>
</span><span id="NumberWithUnits-1179"><a href="#NumberWithUnits-1179"><span class="linenos">1179</span></a><span class="sd">    * NumberWithUnits object = number + units.</span>
</span><span id="NumberWithUnits-1180"><a href="#NumberWithUnits-1180"><span class="linenos">1180</span></a><span class="sd">    * The numbers-with-units are used for pixel sizes or scalebars.</span>
</span><span id="NumberWithUnits-1181"><a href="#NumberWithUnits-1181"><span class="linenos">1181</span></a><span class="sd">      </span>
</span><span id="NumberWithUnits-1182"><a href="#NumberWithUnits-1182"><span class="linenos">1182</span></a><span class="sd">    Object initialiation</span>
</span><span id="NumberWithUnits-1183"><a href="#NumberWithUnits-1183"><span class="linenos">1183</span></a><span class="sd">    </span>
</span><span id="NumberWithUnits-1184"><a href="#NumberWithUnits-1184"><span class="linenos">1184</span></a><span class="sd">    &gt;&gt;&gt; # Three basic ways how to initialize a NumberWithUnits object</span>
</span><span id="NumberWithUnits-1185"><a href="#NumberWithUnits-1185"><span class="linenos">1185</span></a><span class="sd">    &gt;&gt;&gt; # (this is a NON-typical usage</span>
</span><span id="NumberWithUnits-1186"><a href="#NumberWithUnits-1186"><span class="linenos">1186</span></a><span class="sd">    &gt;&gt;&gt; # (NumberWithUnits object is used internally, when drawing scalebars</span>
</span><span id="NumberWithUnits-1187"><a href="#NumberWithUnits-1187"><span class="linenos">1187</span></a><span class="sd">    &gt;&gt;&gt; from myimg.nwu import NumberWithUnits</span>
</span><span id="NumberWithUnits-1188"><a href="#NumberWithUnits-1188"><span class="linenos">1188</span></a><span class="sd">    &gt;&gt;&gt; nwu1 = NumberWithUnits(&#39;1.2um&#39;)</span>
</span><span id="NumberWithUnits-1189"><a href="#NumberWithUnits-1189"><span class="linenos">1189</span></a><span class="sd">    &gt;&gt;&gt; nwu2 = NumberWithUnits(number=1.2, units=&#39;um&#39;)</span>
</span><span id="NumberWithUnits-1190"><a href="#NumberWithUnits-1190"><span class="linenos">1190</span></a><span class="sd">    &gt;&gt;&gt; nwu3 = NumberWithUnits(a_number_with_units_object_such_as_nwu1)</span>
</span><span id="NumberWithUnits-1191"><a href="#NumberWithUnits-1191"><span class="linenos">1191</span></a><span class="sd">    </span>
</span><span id="NumberWithUnits-1192"><a href="#NumberWithUnits-1192"><span class="linenos">1192</span></a><span class="sd">    List of object properties</span>
</span><span id="NumberWithUnits-1193"><a href="#NumberWithUnits-1193"><span class="linenos">1193</span></a><span class="sd">        </span>
</span><span id="NumberWithUnits-1194"><a href="#NumberWithUnits-1194"><span class="linenos">1194</span></a><span class="sd">    * number = number/numeric value</span>
</span><span id="NumberWithUnits-1195"><a href="#NumberWithUnits-1195"><span class="linenos">1195</span></a><span class="sd">    * units = units corresponding to number</span>
</span><span id="NumberWithUnits-1196"><a href="#NumberWithUnits-1196"><span class="linenos">1196</span></a><span class="sd">    * _units_description = myimg.settings.Units subclass, private property</span>
</span><span id="NumberWithUnits-1197"><a href="#NumberWithUnits-1197"><span class="linenos">1197</span></a><span class="sd">    </span>
</span><span id="NumberWithUnits-1198"><a href="#NumberWithUnits-1198"><span class="linenos">1198</span></a><span class="sd">    Object methods</span>
</span><span id="NumberWithUnits-1199"><a href="#NumberWithUnits-1199"><span class="linenos">1199</span></a><span class="sd">    </span>
</span><span id="NumberWithUnits-1200"><a href="#NumberWithUnits-1200"><span class="linenos">1200</span></a><span class="sd">    * text = return number-with-units as string</span>
</span><span id="NumberWithUnits-1201"><a href="#NumberWithUnits-1201"><span class="linenos">1201</span></a><span class="sd">    * units_Ok = test if the defined units are correct</span>
</span><span id="NumberWithUnits-1202"><a href="#NumberWithUnits-1202"><span class="linenos">1202</span></a><span class="sd">    * index_of_units = index of units in units_description.units list</span>
</span><span id="NumberWithUnits-1203"><a href="#NumberWithUnits-1203"><span class="linenos">1203</span></a><span class="sd">    * increase_units = increase units and modify number accordingly</span>
</span><span id="NumberWithUnits-1204"><a href="#NumberWithUnits-1204"><span class="linenos">1204</span></a><span class="sd">    * decrease_units = decrease units and modify number accordingly</span>
</span><span id="NumberWithUnits-1205"><a href="#NumberWithUnits-1205"><span class="linenos">1205</span></a><span class="sd">    * set_units_to = set units to given units and modify number accordingly</span>
</span><span id="NumberWithUnits-1206"><a href="#NumberWithUnits-1206"><span class="linenos">1206</span></a><span class="sd">    * set_correct_units = set units so that the number was within &lt;1,1000)</span>
</span><span id="NumberWithUnits-1207"><a href="#NumberWithUnits-1207"><span class="linenos">1207</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1208"><a href="#NumberWithUnits-1208"><span class="linenos">1208</span></a>    
</span><span id="NumberWithUnits-1209"><a href="#NumberWithUnits-1209"><span class="linenos">1209</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits-1210"><a href="#NumberWithUnits-1210"><span class="linenos">1210</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1211"><a href="#NumberWithUnits-1211"><span class="linenos">1211</span></a><span class="sd">        Initialize NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1212"><a href="#NumberWithUnits-1212"><span class="linenos">1212</span></a>
</span><span id="NumberWithUnits-1213"><a href="#NumberWithUnits-1213"><span class="linenos">1213</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits-1214"><a href="#NumberWithUnits-1214"><span class="linenos">1214</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits-1215"><a href="#NumberWithUnits-1215"><span class="linenos">1215</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="NumberWithUnits-1216"><a href="#NumberWithUnits-1216"><span class="linenos">1216</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="NumberWithUnits-1217"><a href="#NumberWithUnits-1217"><span class="linenos">1217</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="NumberWithUnits-1218"><a href="#NumberWithUnits-1218"><span class="linenos">1218</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="NumberWithUnits-1219"><a href="#NumberWithUnits-1219"><span class="linenos">1219</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="NumberWithUnits-1220"><a href="#NumberWithUnits-1220"><span class="linenos">1220</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="NumberWithUnits-1221"><a href="#NumberWithUnits-1221"><span class="linenos">1221</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="NumberWithUnits-1222"><a href="#NumberWithUnits-1222"><span class="linenos">1222</span></a><span class="sd">              </span>
</span><span id="NumberWithUnits-1223"><a href="#NumberWithUnits-1223"><span class="linenos">1223</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="NumberWithUnits-1224"><a href="#NumberWithUnits-1224"><span class="linenos">1224</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="NumberWithUnits-1225"><a href="#NumberWithUnits-1225"><span class="linenos">1225</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="NumberWithUnits-1226"><a href="#NumberWithUnits-1226"><span class="linenos">1226</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="NumberWithUnits-1227"><a href="#NumberWithUnits-1227"><span class="linenos">1227</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="NumberWithUnits-1228"><a href="#NumberWithUnits-1228"><span class="linenos">1228</span></a><span class="sd">            </span>
</span><span id="NumberWithUnits-1229"><a href="#NumberWithUnits-1229"><span class="linenos">1229</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1230"><a href="#NumberWithUnits-1230"><span class="linenos">1230</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1231"><a href="#NumberWithUnits-1231"><span class="linenos">1231</span></a><span class="sd">        NumberWithUnits object</span>
</span><span id="NumberWithUnits-1232"><a href="#NumberWithUnits-1232"><span class="linenos">1232</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="NumberWithUnits-1233"><a href="#NumberWithUnits-1233"><span class="linenos">1233</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="NumberWithUnits-1234"><a href="#NumberWithUnits-1234"><span class="linenos">1234</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units), and</span>
</span><span id="NumberWithUnits-1235"><a href="#NumberWithUnits-1235"><span class="linenos">1235</span></a><span class="sd">            (iii) further props/methods (NumberWithUnits.change_units ...).</span>
</span><span id="NumberWithUnits-1236"><a href="#NumberWithUnits-1236"><span class="linenos">1236</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1237"><a href="#NumberWithUnits-1237"><span class="linenos">1237</span></a>        <span class="c1"># (1) Determine input types</span>
</span><span id="NumberWithUnits-1238"><a href="#NumberWithUnits-1238"><span class="linenos">1238</span></a>        <span class="k">if</span> <span class="n">number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input1</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="NumberWithUnits-1239"><a href="#NumberWithUnits-1239"><span class="linenos">1239</span></a>        <span class="k">if</span> <span class="n">units</span>  <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input2</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
</span><span id="NumberWithUnits-1240"><a href="#NumberWithUnits-1240"><span class="linenos">1240</span></a>        <span class="c1"># (2) Parse the input number with units</span>
</span><span id="NumberWithUnits-1241"><a href="#NumberWithUnits-1241"><span class="linenos">1241</span></a>        <span class="k">if</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="NumberWithUnits-1242"><a href="#NumberWithUnits-1242"><span class="linenos">1242</span></a>            <span class="c1"># 1st input is a float (number) =&gt; 2nd input should be str (units)</span>
</span><span id="NumberWithUnits-1243"><a href="#NumberWithUnits-1243"><span class="linenos">1243</span></a>            <span class="k">if</span> <span class="n">input2</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NumberWithUnits-1244"><a href="#NumberWithUnits-1244"><span class="linenos">1244</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
</span><span id="NumberWithUnits-1245"><a href="#NumberWithUnits-1245"><span class="linenos">1245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="NumberWithUnits-1246"><a href="#NumberWithUnits-1246"><span class="linenos">1246</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1247"><a href="#NumberWithUnits-1247"><span class="linenos">1247</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits object!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1248"><a href="#NumberWithUnits-1248"><span class="linenos">1248</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Units not given, exiting...&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1249"><a href="#NumberWithUnits-1249"><span class="linenos">1249</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="NumberWithUnits-1250"><a href="#NumberWithUnits-1250"><span class="linenos">1250</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NumberWithUnits-1251"><a href="#NumberWithUnits-1251"><span class="linenos">1251</span></a>            <span class="c1"># input is string =&gt; split using regexp</span>
</span><span id="NumberWithUnits-1252"><a href="#NumberWithUnits-1252"><span class="linenos">1252</span></a>            <span class="c1"># TODO: consider errors and exceptions</span>
</span><span id="NumberWithUnits-1253"><a href="#NumberWithUnits-1253"><span class="linenos">1253</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1254"><a href="#NumberWithUnits-1254"><span class="linenos">1254</span></a><span class="s1">                # 1st/2nd group = number/units in standard () =&gt; to remember</span>
</span><span id="NumberWithUnits-1255"><a href="#NumberWithUnits-1255"><span class="linenos">1255</span></a><span class="s1">                # exponent/rec.value in (?:) =&gt; not to remember</span>
</span><span id="NumberWithUnits-1256"><a href="#NumberWithUnits-1256"><span class="linenos">1256</span></a><span class="s1">                (                  # start of 1st group = number</span>
</span><span id="NumberWithUnits-1257"><a href="#NumberWithUnits-1257"><span class="linenos">1257</span></a><span class="s1">                  \d*\.?\d*        # number, such as 1, 1.2, .9</span>
</span><span id="NumberWithUnits-1258"><a href="#NumberWithUnits-1258"><span class="linenos">1258</span></a><span class="s1">                  (?:e[+-]?\d+)?   # optional exponent, such as e3 e-6</span>
</span><span id="NumberWithUnits-1259"><a href="#NumberWithUnits-1259"><span class="linenos">1259</span></a><span class="s1">                )                  # end of 1st group</span>
</span><span id="NumberWithUnits-1260"><a href="#NumberWithUnits-1260"><span class="linenos">1260</span></a><span class="s1">                \s*                # possible whitespace</span>
</span><span id="NumberWithUnits-1261"><a href="#NumberWithUnits-1261"><span class="linenos">1261</span></a><span class="s1">                (                  # start of 2nd group = units</span>
</span><span id="NumberWithUnits-1262"><a href="#NumberWithUnits-1262"><span class="linenos">1262</span></a><span class="s1">                  (?:1/)?          # optional reciprocal value = &#39;1/&#39;</span>
</span><span id="NumberWithUnits-1263"><a href="#NumberWithUnits-1263"><span class="linenos">1263</span></a><span class="s1">                  \D+              # one or more non-digit characters</span>
</span><span id="NumberWithUnits-1264"><a href="#NumberWithUnits-1264"><span class="linenos">1264</span></a><span class="s1">                )                  # end of 2nd group</span>
</span><span id="NumberWithUnits-1265"><a href="#NumberWithUnits-1265"><span class="linenos">1265</span></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="NumberWithUnits-1266"><a href="#NumberWithUnits-1266"><span class="linenos">1266</span></a>                <span class="n">string</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
</span><span id="NumberWithUnits-1267"><a href="#NumberWithUnits-1267"><span class="linenos">1267</span></a>                <span class="n">flags</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>
</span><span id="NumberWithUnits-1268"><a href="#NumberWithUnits-1268"><span class="linenos">1268</span></a>            <span class="n">number</span><span class="p">,</span><span class="n">units</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
</span><span id="NumberWithUnits-1269"><a href="#NumberWithUnits-1269"><span class="linenos">1269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="NumberWithUnits-1270"><a href="#NumberWithUnits-1270"><span class="linenos">1270</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="NumberWithUnits-1271"><a href="#NumberWithUnits-1271"><span class="linenos">1271</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="n">NumberWithUnits</span><span class="p">:</span>
</span><span id="NumberWithUnits-1272"><a href="#NumberWithUnits-1272"><span class="linenos">1272</span></a>            <span class="c1"># input is another NumberWithUnits =&gt; create copy of it</span>
</span><span id="NumberWithUnits-1273"><a href="#NumberWithUnits-1273"><span class="linenos">1273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">number</span>
</span><span id="NumberWithUnits-1274"><a href="#NumberWithUnits-1274"><span class="linenos">1274</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">units</span>
</span><span id="NumberWithUnits-1275"><a href="#NumberWithUnits-1275"><span class="linenos">1275</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1276"><a href="#NumberWithUnits-1276"><span class="linenos">1276</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1277"><a href="#NumberWithUnits-1277"><span class="linenos">1277</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Wrong input number_with_units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1278"><a href="#NumberWithUnits-1278"><span class="linenos">1278</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="NumberWithUnits-1279"><a href="#NumberWithUnits-1279"><span class="linenos">1279</span></a>        <span class="c1"># (3) Determine, which units we use</span>
</span><span id="NumberWithUnits-1280"><a href="#NumberWithUnits-1280"><span class="linenos">1280</span></a>        <span class="c1"># =&gt; set private _units_description property</span>
</span><span id="NumberWithUnits-1281"><a href="#NumberWithUnits-1281"><span class="linenos">1281</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits-1282"><a href="#NumberWithUnits-1282"><span class="linenos">1282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span>
</span><span id="NumberWithUnits-1283"><a href="#NumberWithUnits-1283"><span class="linenos">1283</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits-1284"><a href="#NumberWithUnits-1284"><span class="linenos">1284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span>
</span><span id="NumberWithUnits-1285"><a href="#NumberWithUnits-1285"><span class="linenos">1285</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1286"><a href="#NumberWithUnits-1286"><span class="linenos">1286</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1287"><a href="#NumberWithUnits-1287"><span class="linenos">1287</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uknown units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1288"><a href="#NumberWithUnits-1288"><span class="linenos">1288</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="NumberWithUnits-1289"><a href="#NumberWithUnits-1289"><span class="linenos">1289</span></a>    
</span><span id="NumberWithUnits-1290"><a href="#NumberWithUnits-1290"><span class="linenos">1290</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits-1291"><a href="#NumberWithUnits-1291"><span class="linenos">1291</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Overwritten __str__ method to get nice output with print.&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1292"><a href="#NumberWithUnits-1292"><span class="linenos">1292</span></a>        <span class="c1"># Get number and units (they will be adjusted, originals unchanged).</span>
</span><span id="NumberWithUnits-1293"><a href="#NumberWithUnits-1293"><span class="linenos">1293</span></a>        <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
</span><span id="NumberWithUnits-1294"><a href="#NumberWithUnits-1294"><span class="linenos">1294</span></a>        <span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
</span><span id="NumberWithUnits-1295"><a href="#NumberWithUnits-1295"><span class="linenos">1295</span></a>        <span class="c1"># Adjust number: if it is (very close to) integer, convert to integer.</span>
</span><span id="NumberWithUnits-1296"><a href="#NumberWithUnits-1296"><span class="linenos">1296</span></a>        <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-10</span>
</span><span id="NumberWithUnits-1297"><a href="#NumberWithUnits-1297"><span class="linenos">1297</span></a>        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">number</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">:</span> <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="NumberWithUnits-1298"><a href="#NumberWithUnits-1298"><span class="linenos">1298</span></a>        <span class="c1"># Adjust units: if units contains a special character, print it.</span>
</span><span id="NumberWithUnits-1299"><a href="#NumberWithUnits-1299"><span class="linenos">1299</span></a>        <span class="k">if</span>   <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;um&#39;</span> <span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">micrometer</span>
</span><span id="NumberWithUnits-1300"><a href="#NumberWithUnits-1300"><span class="linenos">1300</span></a>        <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span>  <span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">angstrem</span>
</span><span id="NumberWithUnits-1301"><a href="#NumberWithUnits-1301"><span class="linenos">1301</span></a>        <span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s1">&#39;1/A&#39;</span><span class="p">:</span> <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">rec_angstrem</span>
</span><span id="NumberWithUnits-1302"><a href="#NumberWithUnits-1302"><span class="linenos">1302</span></a>        <span class="c1"># Combine final number and units</span>
</span><span id="NumberWithUnits-1303"><a href="#NumberWithUnits-1303"><span class="linenos">1303</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">units</span>
</span><span id="NumberWithUnits-1304"><a href="#NumberWithUnits-1304"><span class="linenos">1304</span></a>        <span class="c1"># Return resulting string</span>
</span><span id="NumberWithUnits-1305"><a href="#NumberWithUnits-1305"><span class="linenos">1305</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="NumberWithUnits-1306"><a href="#NumberWithUnits-1306"><span class="linenos">1306</span></a>    
</span><span id="NumberWithUnits-1307"><a href="#NumberWithUnits-1307"><span class="linenos">1307</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits-1308"><a href="#NumberWithUnits-1308"><span class="linenos">1308</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1309"><a href="#NumberWithUnits-1309"><span class="linenos">1309</span></a><span class="sd">        Return number + units as string.</span>
</span><span id="NumberWithUnits-1310"><a href="#NumberWithUnits-1310"><span class="linenos">1310</span></a>
</span><span id="NumberWithUnits-1311"><a href="#NumberWithUnits-1311"><span class="linenos">1311</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1312"><a href="#NumberWithUnits-1312"><span class="linenos">1312</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1313"><a href="#NumberWithUnits-1313"><span class="linenos">1313</span></a><span class="sd">        str : number-with-units</span>
</span><span id="NumberWithUnits-1314"><a href="#NumberWithUnits-1314"><span class="linenos">1314</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="NumberWithUnits-1315"><a href="#NumberWithUnits-1315"><span class="linenos">1315</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="NumberWithUnits-1316"><a href="#NumberWithUnits-1316"><span class="linenos">1316</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="NumberWithUnits-1317"><a href="#NumberWithUnits-1317"><span class="linenos">1317</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1318"><a href="#NumberWithUnits-1318"><span class="linenos">1318</span></a>        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
</span><span id="NumberWithUnits-1319"><a href="#NumberWithUnits-1319"><span class="linenos">1319</span></a>    
</span><span id="NumberWithUnits-1320"><a href="#NumberWithUnits-1320"><span class="linenos">1320</span></a>    <span class="k">def</span> <span class="nf">units_Ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits-1321"><a href="#NumberWithUnits-1321"><span class="linenos">1321</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1322"><a href="#NumberWithUnits-1322"><span class="linenos">1322</span></a><span class="sd">        Test if current units are correct.</span>
</span><span id="NumberWithUnits-1323"><a href="#NumberWithUnits-1323"><span class="linenos">1323</span></a>
</span><span id="NumberWithUnits-1324"><a href="#NumberWithUnits-1324"><span class="linenos">1324</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits-1325"><a href="#NumberWithUnits-1325"><span class="linenos">1325</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits-1326"><a href="#NumberWithUnits-1326"><span class="linenos">1326</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="NumberWithUnits-1327"><a href="#NumberWithUnits-1327"><span class="linenos">1327</span></a><span class="sd">            If units=&#39;something&#39;, then &#39;something&#39; is compared</span>
</span><span id="NumberWithUnits-1328"><a href="#NumberWithUnits-1328"><span class="linenos">1328</span></a><span class="sd">            with the list of allowed units for self = NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1329"><a href="#NumberWithUnits-1329"><span class="linenos">1329</span></a>
</span><span id="NumberWithUnits-1330"><a href="#NumberWithUnits-1330"><span class="linenos">1330</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1331"><a href="#NumberWithUnits-1331"><span class="linenos">1331</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1332"><a href="#NumberWithUnits-1332"><span class="linenos">1332</span></a><span class="sd">        bool</span>
</span><span id="NumberWithUnits-1333"><a href="#NumberWithUnits-1333"><span class="linenos">1333</span></a><span class="sd">            True if the units are correct and False otherwise.</span>
</span><span id="NumberWithUnits-1334"><a href="#NumberWithUnits-1334"><span class="linenos">1334</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1335"><a href="#NumberWithUnits-1335"><span class="linenos">1335</span></a>        <span class="c1"># (1) If units argument is not given,</span>
</span><span id="NumberWithUnits-1336"><a href="#NumberWithUnits-1336"><span class="linenos">1336</span></a>        <span class="c1"># check units of current NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1337"><a href="#NumberWithUnits-1337"><span class="linenos">1337</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NumberWithUnits-1338"><a href="#NumberWithUnits-1338"><span class="linenos">1338</span></a>            <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
</span><span id="NumberWithUnits-1339"><a href="#NumberWithUnits-1339"><span class="linenos">1339</span></a>        <span class="c1"># (2) Return True/False if units are correct/incorrect.</span>
</span><span id="NumberWithUnits-1340"><a href="#NumberWithUnits-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits-1341"><a href="#NumberWithUnits-1341"><span class="linenos">1341</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="NumberWithUnits-1342"><a href="#NumberWithUnits-1342"><span class="linenos">1342</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1343"><a href="#NumberWithUnits-1343"><span class="linenos">1343</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span><span id="NumberWithUnits-1344"><a href="#NumberWithUnits-1344"><span class="linenos">1344</span></a>        
</span><span id="NumberWithUnits-1345"><a href="#NumberWithUnits-1345"><span class="linenos">1345</span></a>    <span class="k">def</span> <span class="nf">index_of_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units_to_check</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits-1346"><a href="#NumberWithUnits-1346"><span class="linenos">1346</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1347"><a href="#NumberWithUnits-1347"><span class="linenos">1347</span></a><span class="sd">        Get index of current or specified units.</span>
</span><span id="NumberWithUnits-1348"><a href="#NumberWithUnits-1348"><span class="linenos">1348</span></a>
</span><span id="NumberWithUnits-1349"><a href="#NumberWithUnits-1349"><span class="linenos">1349</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits-1350"><a href="#NumberWithUnits-1350"><span class="linenos">1350</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits-1351"><a href="#NumberWithUnits-1351"><span class="linenos">1351</span></a><span class="sd">        units_to_check : str, optional, default is None</span>
</span><span id="NumberWithUnits-1352"><a href="#NumberWithUnits-1352"><span class="linenos">1352</span></a><span class="sd">            Any string representing some units.</span>
</span><span id="NumberWithUnits-1353"><a href="#NumberWithUnits-1353"><span class="linenos">1353</span></a><span class="sd">            If units_to_check is not given,</span>
</span><span id="NumberWithUnits-1354"><a href="#NumberWithUnits-1354"><span class="linenos">1354</span></a><span class="sd">            the method check current units of self object.</span>
</span><span id="NumberWithUnits-1355"><a href="#NumberWithUnits-1355"><span class="linenos">1355</span></a><span class="sd">            </span>
</span><span id="NumberWithUnits-1356"><a href="#NumberWithUnits-1356"><span class="linenos">1356</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1357"><a href="#NumberWithUnits-1357"><span class="linenos">1357</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1358"><a href="#NumberWithUnits-1358"><span class="linenos">1358</span></a><span class="sd">        int</span>
</span><span id="NumberWithUnits-1359"><a href="#NumberWithUnits-1359"><span class="linenos">1359</span></a><span class="sd">            Index of current or specified units.</span>
</span><span id="NumberWithUnits-1360"><a href="#NumberWithUnits-1360"><span class="linenos">1360</span></a><span class="sd">            If units = &#39;um&#39; then index_of_units = 2,</span>
</span><span id="NumberWithUnits-1361"><a href="#NumberWithUnits-1361"><span class="linenos">1361</span></a><span class="sd">            because Units.Lenghts.units = (&#39;m&#39;, &#39;mm&#39;, &#39;um&#39;, &#39;nm&#39;, &#39;A&#39;),</span>
</span><span id="NumberWithUnits-1362"><a href="#NumberWithUnits-1362"><span class="linenos">1362</span></a><span class="sd">            which means: &#39;m&#39; =&gt; 0, &#39;mm&#39; =&gt; 1, &#39;um&#39; =&gt; 2...</span>
</span><span id="NumberWithUnits-1363"><a href="#NumberWithUnits-1363"><span class="linenos">1363</span></a><span class="sd">        </span>
</span><span id="NumberWithUnits-1364"><a href="#NumberWithUnits-1364"><span class="linenos">1364</span></a><span class="sd">        Note</span>
</span><span id="NumberWithUnits-1365"><a href="#NumberWithUnits-1365"><span class="linenos">1365</span></a><span class="sd">        ----</span>
</span><span id="NumberWithUnits-1366"><a href="#NumberWithUnits-1366"><span class="linenos">1366</span></a><span class="sd">        This function is employed in further functions</span>
</span><span id="NumberWithUnits-1367"><a href="#NumberWithUnits-1367"><span class="linenos">1367</span></a><span class="sd">        manipulating with units, such as increase_units, decrease_units...</span>
</span><span id="NumberWithUnits-1368"><a href="#NumberWithUnits-1368"><span class="linenos">1368</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1369"><a href="#NumberWithUnits-1369"><span class="linenos">1369</span></a>        <span class="k">if</span> <span class="n">units_to_check</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">units_to_check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> 
</span><span id="NumberWithUnits-1370"><a href="#NumberWithUnits-1370"><span class="linenos">1370</span></a>        <span class="n">index_of_units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">units_to_check</span><span class="p">)</span>
</span><span id="NumberWithUnits-1371"><a href="#NumberWithUnits-1371"><span class="linenos">1371</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">index_of_units</span><span class="p">)</span>
</span><span id="NumberWithUnits-1372"><a href="#NumberWithUnits-1372"><span class="linenos">1372</span></a>        
</span><span id="NumberWithUnits-1373"><a href="#NumberWithUnits-1373"><span class="linenos">1373</span></a>    <span class="k">def</span> <span class="nf">increase_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits-1374"><a href="#NumberWithUnits-1374"><span class="linenos">1374</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1375"><a href="#NumberWithUnits-1375"><span class="linenos">1375</span></a><span class="sd">        Increase current units (for example: um -&gt; mm).</span>
</span><span id="NumberWithUnits-1376"><a href="#NumberWithUnits-1376"><span class="linenos">1376</span></a>
</span><span id="NumberWithUnits-1377"><a href="#NumberWithUnits-1377"><span class="linenos">1377</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1378"><a href="#NumberWithUnits-1378"><span class="linenos">1378</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1379"><a href="#NumberWithUnits-1379"><span class="linenos">1379</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits-1380"><a href="#NumberWithUnits-1380"><span class="linenos">1380</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1381"><a href="#NumberWithUnits-1381"><span class="linenos">1381</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1382"><a href="#NumberWithUnits-1382"><span class="linenos">1382</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="NumberWithUnits-1383"><a href="#NumberWithUnits-1383"><span class="linenos">1383</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1384"><a href="#NumberWithUnits-1384"><span class="linenos">1384</span></a>        <span class="c1"># (2) If index-of-curent-units = 0,</span>
</span><span id="NumberWithUnits-1385"><a href="#NumberWithUnits-1385"><span class="linenos">1385</span></a>        <span class="c1"># then it is not possible to increase units - we are at maximum. </span>
</span><span id="NumberWithUnits-1386"><a href="#NumberWithUnits-1386"><span class="linenos">1386</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits-1387"><a href="#NumberWithUnits-1387"><span class="linenos">1387</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to increase units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1388"><a href="#NumberWithUnits-1388"><span class="linenos">1388</span></a>        <span class="c1"># (3) If index-of-current-units &gt; 0,</span>
</span><span id="NumberWithUnits-1389"><a href="#NumberWithUnits-1389"><span class="linenos">1389</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) decrease number, 3) increase units.</span>
</span><span id="NumberWithUnits-1390"><a href="#NumberWithUnits-1390"><span class="linenos">1390</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1391"><a href="#NumberWithUnits-1391"><span class="linenos">1391</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="NumberWithUnits-1392"><a href="#NumberWithUnits-1392"><span class="linenos">1392</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="NumberWithUnits-1393"><a href="#NumberWithUnits-1393"><span class="linenos">1393</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="NumberWithUnits-1394"><a href="#NumberWithUnits-1394"><span class="linenos">1394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="NumberWithUnits-1395"><a href="#NumberWithUnits-1395"><span class="linenos">1395</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="NumberWithUnits-1396"><a href="#NumberWithUnits-1396"><span class="linenos">1396</span></a>
</span><span id="NumberWithUnits-1397"><a href="#NumberWithUnits-1397"><span class="linenos">1397</span></a>    <span class="k">def</span> <span class="nf">decrease_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits-1398"><a href="#NumberWithUnits-1398"><span class="linenos">1398</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1399"><a href="#NumberWithUnits-1399"><span class="linenos">1399</span></a><span class="sd">        Decrease current units (for example: um -&gt; nm).</span>
</span><span id="NumberWithUnits-1400"><a href="#NumberWithUnits-1400"><span class="linenos">1400</span></a>
</span><span id="NumberWithUnits-1401"><a href="#NumberWithUnits-1401"><span class="linenos">1401</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1402"><a href="#NumberWithUnits-1402"><span class="linenos">1402</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1403"><a href="#NumberWithUnits-1403"><span class="linenos">1403</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits-1404"><a href="#NumberWithUnits-1404"><span class="linenos">1404</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1405"><a href="#NumberWithUnits-1405"><span class="linenos">1405</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1406"><a href="#NumberWithUnits-1406"><span class="linenos">1406</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="NumberWithUnits-1407"><a href="#NumberWithUnits-1407"><span class="linenos">1407</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1408"><a href="#NumberWithUnits-1408"><span class="linenos">1408</span></a>        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="NumberWithUnits-1409"><a href="#NumberWithUnits-1409"><span class="linenos">1409</span></a>        <span class="c1"># (2) If index-of-curent-units = last-index-of-our-units,</span>
</span><span id="NumberWithUnits-1410"><a href="#NumberWithUnits-1410"><span class="linenos">1410</span></a>        <span class="c1"># then it is not possible to decrease units - we are at minimum. </span>
</span><span id="NumberWithUnits-1411"><a href="#NumberWithUnits-1411"><span class="linenos">1411</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">max_index</span><span class="p">:</span>
</span><span id="NumberWithUnits-1412"><a href="#NumberWithUnits-1412"><span class="linenos">1412</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to decrease units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits-1413"><a href="#NumberWithUnits-1413"><span class="linenos">1413</span></a>        <span class="c1"># (3) If index-of-current-units &lt; last-index-of-our-units,</span>
</span><span id="NumberWithUnits-1414"><a href="#NumberWithUnits-1414"><span class="linenos">1414</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) increase number, 3) decrease units.</span>
</span><span id="NumberWithUnits-1415"><a href="#NumberWithUnits-1415"><span class="linenos">1415</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits-1416"><a href="#NumberWithUnits-1416"><span class="linenos">1416</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="NumberWithUnits-1417"><a href="#NumberWithUnits-1417"><span class="linenos">1417</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="NumberWithUnits-1418"><a href="#NumberWithUnits-1418"><span class="linenos">1418</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span id="NumberWithUnits-1419"><a href="#NumberWithUnits-1419"><span class="linenos">1419</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="NumberWithUnits-1420"><a href="#NumberWithUnits-1420"><span class="linenos">1420</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="NumberWithUnits-1421"><a href="#NumberWithUnits-1421"><span class="linenos">1421</span></a>        
</span><span id="NumberWithUnits-1422"><a href="#NumberWithUnits-1422"><span class="linenos">1422</span></a>    <span class="k">def</span> <span class="nf">set_units_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_units</span><span class="p">):</span>
</span><span id="NumberWithUnits-1423"><a href="#NumberWithUnits-1423"><span class="linenos">1423</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1424"><a href="#NumberWithUnits-1424"><span class="linenos">1424</span></a><span class="sd">        Set units to *target_units* and modify number accordingly.</span>
</span><span id="NumberWithUnits-1425"><a href="#NumberWithUnits-1425"><span class="linenos">1425</span></a>
</span><span id="NumberWithUnits-1426"><a href="#NumberWithUnits-1426"><span class="linenos">1426</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits-1427"><a href="#NumberWithUnits-1427"><span class="linenos">1427</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits-1428"><a href="#NumberWithUnits-1428"><span class="linenos">1428</span></a><span class="sd">        target_units : str</span>
</span><span id="NumberWithUnits-1429"><a href="#NumberWithUnits-1429"><span class="linenos">1429</span></a><span class="sd">            Any string specifying valid units.</span>
</span><span id="NumberWithUnits-1430"><a href="#NumberWithUnits-1430"><span class="linenos">1430</span></a>
</span><span id="NumberWithUnits-1431"><a href="#NumberWithUnits-1431"><span class="linenos">1431</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1432"><a href="#NumberWithUnits-1432"><span class="linenos">1432</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1433"><a href="#NumberWithUnits-1433"><span class="linenos">1433</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits-1434"><a href="#NumberWithUnits-1434"><span class="linenos">1434</span></a><span class="sd">            The results = changed units (and correspondingly changed number)</span>
</span><span id="NumberWithUnits-1435"><a href="#NumberWithUnits-1435"><span class="linenos">1435</span></a><span class="sd">            are saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1436"><a href="#NumberWithUnits-1436"><span class="linenos">1436</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1437"><a href="#NumberWithUnits-1437"><span class="linenos">1437</span></a>        <span class="n">index_current</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1438"><a href="#NumberWithUnits-1438"><span class="linenos">1438</span></a>        <span class="n">index_target</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">(</span><span class="n">target_units</span><span class="p">)</span>
</span><span id="NumberWithUnits-1439"><a href="#NumberWithUnits-1439"><span class="linenos">1439</span></a>        <span class="n">index_difference</span> <span class="o">=</span> <span class="n">index_target</span> <span class="o">-</span> <span class="n">index_current</span>
</span><span id="NumberWithUnits-1440"><a href="#NumberWithUnits-1440"><span class="linenos">1440</span></a>        <span class="k">if</span> <span class="n">index_difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits-1441"><a href="#NumberWithUnits-1441"><span class="linenos">1441</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index_difference</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1442"><a href="#NumberWithUnits-1442"><span class="linenos">1442</span></a>        <span class="k">elif</span> <span class="n">index_difference</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits-1443"><a href="#NumberWithUnits-1443"><span class="linenos">1443</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">index_difference</span><span class="p">)):</span> <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1444"><a href="#NumberWithUnits-1444"><span class="linenos">1444</span></a>                
</span><span id="NumberWithUnits-1445"><a href="#NumberWithUnits-1445"><span class="linenos">1445</span></a>    <span class="k">def</span> <span class="nf">set_correct_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits-1446"><a href="#NumberWithUnits-1446"><span class="linenos">1446</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1447"><a href="#NumberWithUnits-1447"><span class="linenos">1447</span></a><span class="sd">        Set correct units, so that the number was between 1 and 1000.</span>
</span><span id="NumberWithUnits-1448"><a href="#NumberWithUnits-1448"><span class="linenos">1448</span></a>
</span><span id="NumberWithUnits-1449"><a href="#NumberWithUnits-1449"><span class="linenos">1449</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits-1450"><a href="#NumberWithUnits-1450"><span class="linenos">1450</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits-1451"><a href="#NumberWithUnits-1451"><span class="linenos">1451</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits-1452"><a href="#NumberWithUnits-1452"><span class="linenos">1452</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits-1453"><a href="#NumberWithUnits-1453"><span class="linenos">1453</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits-1454"><a href="#NumberWithUnits-1454"><span class="linenos">1454</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="NumberWithUnits-1455"><a href="#NumberWithUnits-1455"><span class="linenos">1455</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="NumberWithUnits-1456"><a href="#NumberWithUnits-1456"><span class="linenos">1456</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
</span><span id="NumberWithUnits-1457"><a href="#NumberWithUnits-1457"><span class="linenos">1457</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Class defining NumberWithUnits object.</p>

<ul>
<li>NumberWithUnits object = number + units.</li>
<li>The numbers-with-units are used for pixel sizes or scalebars.</li>
</ul>

<p>Object initialiation</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Three basic ways how to initialize a NumberWithUnits object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (this is a NON-typical usage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (NumberWithUnits object is used internally, when drawing scalebars</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myimg.nwu</span> <span class="kn">import</span> <span class="n">NumberWithUnits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nwu1</span> <span class="o">=</span> <span class="n">NumberWithUnits</span><span class="p">(</span><span class="s1">&#39;1.2um&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nwu2</span> <span class="o">=</span> <span class="n">NumberWithUnits</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;um&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nwu3</span> <span class="o">=</span> <span class="n">NumberWithUnits</span><span class="p">(</span><span class="n">a_number_with_units_object_such_as_nwu1</span><span class="p">)</span>
</code></pre>
</div>

<p>List of object properties</p>

<ul>
<li>number = number/numeric value</li>
<li>units = units corresponding to number</li>
<li>_units_description = <a href="#Units">myimg.settings.Units</a> subclass, private property</li>
</ul>

<p>Object methods</p>

<ul>
<li>text = return number-with-units as string</li>
<li>units_Ok = test if the defined units are correct</li>
<li>index_of_units = index of units in units_description.units list</li>
<li>increase_units = increase units and modify number accordingly</li>
<li>decrease_units = decrease units and modify number accordingly</li>
<li>set_units_to = set units to given units and modify number accordingly</li>
<li>set_correct_units = set units so that the number was within &lt;1,1000)</li>
</ul>
</div>


                            <div id="NumberWithUnits.__init__" class="classattr">
                                        <input id="NumberWithUnits.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">NumberWithUnits</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">number</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">units</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="NumberWithUnits.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.__init__-1209"><a href="#NumberWithUnits.__init__-1209"><span class="linenos">1209</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits.__init__-1210"><a href="#NumberWithUnits.__init__-1210"><span class="linenos">1210</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.__init__-1211"><a href="#NumberWithUnits.__init__-1211"><span class="linenos">1211</span></a><span class="sd">        Initialize NumberWithUnits object.</span>
</span><span id="NumberWithUnits.__init__-1212"><a href="#NumberWithUnits.__init__-1212"><span class="linenos">1212</span></a>
</span><span id="NumberWithUnits.__init__-1213"><a href="#NumberWithUnits.__init__-1213"><span class="linenos">1213</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits.__init__-1214"><a href="#NumberWithUnits.__init__-1214"><span class="linenos">1214</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits.__init__-1215"><a href="#NumberWithUnits.__init__-1215"><span class="linenos">1215</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="NumberWithUnits.__init__-1216"><a href="#NumberWithUnits.__init__-1216"><span class="linenos">1216</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="NumberWithUnits.__init__-1217"><a href="#NumberWithUnits.__init__-1217"><span class="linenos">1217</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="NumberWithUnits.__init__-1218"><a href="#NumberWithUnits.__init__-1218"><span class="linenos">1218</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="NumberWithUnits.__init__-1219"><a href="#NumberWithUnits.__init__-1219"><span class="linenos">1219</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="NumberWithUnits.__init__-1220"><a href="#NumberWithUnits.__init__-1220"><span class="linenos">1220</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="NumberWithUnits.__init__-1221"><a href="#NumberWithUnits.__init__-1221"><span class="linenos">1221</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="NumberWithUnits.__init__-1222"><a href="#NumberWithUnits.__init__-1222"><span class="linenos">1222</span></a><span class="sd">              </span>
</span><span id="NumberWithUnits.__init__-1223"><a href="#NumberWithUnits.__init__-1223"><span class="linenos">1223</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="NumberWithUnits.__init__-1224"><a href="#NumberWithUnits.__init__-1224"><span class="linenos">1224</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="NumberWithUnits.__init__-1225"><a href="#NumberWithUnits.__init__-1225"><span class="linenos">1225</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="NumberWithUnits.__init__-1226"><a href="#NumberWithUnits.__init__-1226"><span class="linenos">1226</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="NumberWithUnits.__init__-1227"><a href="#NumberWithUnits.__init__-1227"><span class="linenos">1227</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="NumberWithUnits.__init__-1228"><a href="#NumberWithUnits.__init__-1228"><span class="linenos">1228</span></a><span class="sd">            </span>
</span><span id="NumberWithUnits.__init__-1229"><a href="#NumberWithUnits.__init__-1229"><span class="linenos">1229</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.__init__-1230"><a href="#NumberWithUnits.__init__-1230"><span class="linenos">1230</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.__init__-1231"><a href="#NumberWithUnits.__init__-1231"><span class="linenos">1231</span></a><span class="sd">        NumberWithUnits object</span>
</span><span id="NumberWithUnits.__init__-1232"><a href="#NumberWithUnits.__init__-1232"><span class="linenos">1232</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="NumberWithUnits.__init__-1233"><a href="#NumberWithUnits.__init__-1233"><span class="linenos">1233</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="NumberWithUnits.__init__-1234"><a href="#NumberWithUnits.__init__-1234"><span class="linenos">1234</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units), and</span>
</span><span id="NumberWithUnits.__init__-1235"><a href="#NumberWithUnits.__init__-1235"><span class="linenos">1235</span></a><span class="sd">            (iii) further props/methods (NumberWithUnits.change_units ...).</span>
</span><span id="NumberWithUnits.__init__-1236"><a href="#NumberWithUnits.__init__-1236"><span class="linenos">1236</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.__init__-1237"><a href="#NumberWithUnits.__init__-1237"><span class="linenos">1237</span></a>        <span class="c1"># (1) Determine input types</span>
</span><span id="NumberWithUnits.__init__-1238"><a href="#NumberWithUnits.__init__-1238"><span class="linenos">1238</span></a>        <span class="k">if</span> <span class="n">number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input1</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1239"><a href="#NumberWithUnits.__init__-1239"><span class="linenos">1239</span></a>        <span class="k">if</span> <span class="n">units</span>  <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">input2</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1240"><a href="#NumberWithUnits.__init__-1240"><span class="linenos">1240</span></a>        <span class="c1"># (2) Parse the input number with units</span>
</span><span id="NumberWithUnits.__init__-1241"><a href="#NumberWithUnits.__init__-1241"><span class="linenos">1241</span></a>        <span class="k">if</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">float</span> <span class="ow">or</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1242"><a href="#NumberWithUnits.__init__-1242"><span class="linenos">1242</span></a>            <span class="c1"># 1st input is a float (number) =&gt; 2nd input should be str (units)</span>
</span><span id="NumberWithUnits.__init__-1243"><a href="#NumberWithUnits.__init__-1243"><span class="linenos">1243</span></a>            <span class="k">if</span> <span class="n">input2</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1244"><a href="#NumberWithUnits.__init__-1244"><span class="linenos">1244</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
</span><span id="NumberWithUnits.__init__-1245"><a href="#NumberWithUnits.__init__-1245"><span class="linenos">1245</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="NumberWithUnits.__init__-1246"><a href="#NumberWithUnits.__init__-1246"><span class="linenos">1246</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1247"><a href="#NumberWithUnits.__init__-1247"><span class="linenos">1247</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits object!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1248"><a href="#NumberWithUnits.__init__-1248"><span class="linenos">1248</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Units not given, exiting...&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1249"><a href="#NumberWithUnits.__init__-1249"><span class="linenos">1249</span></a>                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="NumberWithUnits.__init__-1250"><a href="#NumberWithUnits.__init__-1250"><span class="linenos">1250</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1251"><a href="#NumberWithUnits.__init__-1251"><span class="linenos">1251</span></a>            <span class="c1"># input is string =&gt; split using regexp</span>
</span><span id="NumberWithUnits.__init__-1252"><a href="#NumberWithUnits.__init__-1252"><span class="linenos">1252</span></a>            <span class="c1"># TODO: consider errors and exceptions</span>
</span><span id="NumberWithUnits.__init__-1253"><a href="#NumberWithUnits.__init__-1253"><span class="linenos">1253</span></a>            <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.__init__-1254"><a href="#NumberWithUnits.__init__-1254"><span class="linenos">1254</span></a><span class="s1">                # 1st/2nd group = number/units in standard () =&gt; to remember</span>
</span><span id="NumberWithUnits.__init__-1255"><a href="#NumberWithUnits.__init__-1255"><span class="linenos">1255</span></a><span class="s1">                # exponent/rec.value in (?:) =&gt; not to remember</span>
</span><span id="NumberWithUnits.__init__-1256"><a href="#NumberWithUnits.__init__-1256"><span class="linenos">1256</span></a><span class="s1">                (                  # start of 1st group = number</span>
</span><span id="NumberWithUnits.__init__-1257"><a href="#NumberWithUnits.__init__-1257"><span class="linenos">1257</span></a><span class="s1">                  \d*\.?\d*        # number, such as 1, 1.2, .9</span>
</span><span id="NumberWithUnits.__init__-1258"><a href="#NumberWithUnits.__init__-1258"><span class="linenos">1258</span></a><span class="s1">                  (?:e[+-]?\d+)?   # optional exponent, such as e3 e-6</span>
</span><span id="NumberWithUnits.__init__-1259"><a href="#NumberWithUnits.__init__-1259"><span class="linenos">1259</span></a><span class="s1">                )                  # end of 1st group</span>
</span><span id="NumberWithUnits.__init__-1260"><a href="#NumberWithUnits.__init__-1260"><span class="linenos">1260</span></a><span class="s1">                \s*                # possible whitespace</span>
</span><span id="NumberWithUnits.__init__-1261"><a href="#NumberWithUnits.__init__-1261"><span class="linenos">1261</span></a><span class="s1">                (                  # start of 2nd group = units</span>
</span><span id="NumberWithUnits.__init__-1262"><a href="#NumberWithUnits.__init__-1262"><span class="linenos">1262</span></a><span class="s1">                  (?:1/)?          # optional reciprocal value = &#39;1/&#39;</span>
</span><span id="NumberWithUnits.__init__-1263"><a href="#NumberWithUnits.__init__-1263"><span class="linenos">1263</span></a><span class="s1">                  \D+              # one or more non-digit characters</span>
</span><span id="NumberWithUnits.__init__-1264"><a href="#NumberWithUnits.__init__-1264"><span class="linenos">1264</span></a><span class="s1">                )                  # end of 2nd group</span>
</span><span id="NumberWithUnits.__init__-1265"><a href="#NumberWithUnits.__init__-1265"><span class="linenos">1265</span></a><span class="s1">                &#39;&#39;&#39;</span><span class="p">,</span>
</span><span id="NumberWithUnits.__init__-1266"><a href="#NumberWithUnits.__init__-1266"><span class="linenos">1266</span></a>                <span class="n">string</span> <span class="o">=</span> <span class="n">number</span><span class="p">,</span>
</span><span id="NumberWithUnits.__init__-1267"><a href="#NumberWithUnits.__init__-1267"><span class="linenos">1267</span></a>                <span class="n">flags</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1268"><a href="#NumberWithUnits.__init__-1268"><span class="linenos">1268</span></a>            <span class="n">number</span><span class="p">,</span><span class="n">units</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
</span><span id="NumberWithUnits.__init__-1269"><a href="#NumberWithUnits.__init__-1269"><span class="linenos">1269</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1270"><a href="#NumberWithUnits.__init__-1270"><span class="linenos">1270</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">units</span>
</span><span id="NumberWithUnits.__init__-1271"><a href="#NumberWithUnits.__init__-1271"><span class="linenos">1271</span></a>        <span class="k">elif</span> <span class="n">input1</span> <span class="o">==</span> <span class="n">NumberWithUnits</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1272"><a href="#NumberWithUnits.__init__-1272"><span class="linenos">1272</span></a>            <span class="c1"># input is another NumberWithUnits =&gt; create copy of it</span>
</span><span id="NumberWithUnits.__init__-1273"><a href="#NumberWithUnits.__init__-1273"><span class="linenos">1273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">number</span>
</span><span id="NumberWithUnits.__init__-1274"><a href="#NumberWithUnits.__init__-1274"><span class="linenos">1274</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">units</span>
</span><span id="NumberWithUnits.__init__-1275"><a href="#NumberWithUnits.__init__-1275"><span class="linenos">1275</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1276"><a href="#NumberWithUnits.__init__-1276"><span class="linenos">1276</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1277"><a href="#NumberWithUnits.__init__-1277"><span class="linenos">1277</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Wrong input number_with_units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1278"><a href="#NumberWithUnits.__init__-1278"><span class="linenos">1278</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="NumberWithUnits.__init__-1279"><a href="#NumberWithUnits.__init__-1279"><span class="linenos">1279</span></a>        <span class="c1"># (3) Determine, which units we use</span>
</span><span id="NumberWithUnits.__init__-1280"><a href="#NumberWithUnits.__init__-1280"><span class="linenos">1280</span></a>        <span class="c1"># =&gt; set private _units_description property</span>
</span><span id="NumberWithUnits.__init__-1281"><a href="#NumberWithUnits.__init__-1281"><span class="linenos">1281</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1282"><a href="#NumberWithUnits.__init__-1282"><span class="linenos">1282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">Lengths</span>
</span><span id="NumberWithUnits.__init__-1283"><a href="#NumberWithUnits.__init__-1283"><span class="linenos">1283</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="ow">in</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1284"><a href="#NumberWithUnits.__init__-1284"><span class="linenos">1284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span> <span class="o">=</span> <span class="n">Units</span><span class="o">.</span><span class="n">RecLengths</span>
</span><span id="NumberWithUnits.__init__-1285"><a href="#NumberWithUnits.__init__-1285"><span class="linenos">1285</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.__init__-1286"><a href="#NumberWithUnits.__init__-1286"><span class="linenos">1286</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error in defining NumberWithUnits:&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1287"><a href="#NumberWithUnits.__init__-1287"><span class="linenos">1287</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uknown units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.__init__-1288"><a href="#NumberWithUnits.__init__-1288"><span class="linenos">1288</span></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize NumberWithUnits object.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>number</strong> (float or str or NumberWithUnits object):
Number with (or without) units, which can be:
(i) Number (float; such as: 100),
but then the 2nd argument should be given (such as units='um'). 
(ii) String (str; such as: '100 um' or '1.2nm').
(iii) Another NumberWithUnits object;
in such a case we receive the copy of the argument.</li>
<li><strong>units</strong> (str, optional, the default is None):
If the 1st argument (number) is a float, the 2nd argument (units)
defines units of the first argument.
If the 1st argument is string or NumberWithUnits object,
the 2nd argument is ignored.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>NumberWithUnits object</strong>: NumberWithUnits object contains:
(i) numerical value (NumberWithUnits.number),
(ii) corresponding units (NumberWithUnits.units), and
(iii) further props/methods (NumberWithUnits.change_units ...).</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.text" class="classattr">
                                        <input id="NumberWithUnits.text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.text-1307"><a href="#NumberWithUnits.text-1307"><span class="linenos">1307</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits.text-1308"><a href="#NumberWithUnits.text-1308"><span class="linenos">1308</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.text-1309"><a href="#NumberWithUnits.text-1309"><span class="linenos">1309</span></a><span class="sd">        Return number + units as string.</span>
</span><span id="NumberWithUnits.text-1310"><a href="#NumberWithUnits.text-1310"><span class="linenos">1310</span></a>
</span><span id="NumberWithUnits.text-1311"><a href="#NumberWithUnits.text-1311"><span class="linenos">1311</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.text-1312"><a href="#NumberWithUnits.text-1312"><span class="linenos">1312</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.text-1313"><a href="#NumberWithUnits.text-1313"><span class="linenos">1313</span></a><span class="sd">        str : number-with-units</span>
</span><span id="NumberWithUnits.text-1314"><a href="#NumberWithUnits.text-1314"><span class="linenos">1314</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="NumberWithUnits.text-1315"><a href="#NumberWithUnits.text-1315"><span class="linenos">1315</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="NumberWithUnits.text-1316"><a href="#NumberWithUnits.text-1316"><span class="linenos">1316</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="NumberWithUnits.text-1317"><a href="#NumberWithUnits.text-1317"><span class="linenos">1317</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.text-1318"><a href="#NumberWithUnits.text-1318"><span class="linenos">1318</span></a>        <span class="k">return</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Return number + units as string.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong> (number-with-units):
The method returns the saved number with units as string.
Example: if self.number = 1.2 and self.units = nm, we get '1 nm'.
The units are printed in unicode (important for um and agstrems).</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.units_Ok" class="classattr">
                                        <input id="NumberWithUnits.units_Ok-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">units_Ok</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">units</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.units_Ok-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.units_Ok"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.units_Ok-1320"><a href="#NumberWithUnits.units_Ok-1320"><span class="linenos">1320</span></a>    <span class="k">def</span> <span class="nf">units_Ok</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits.units_Ok-1321"><a href="#NumberWithUnits.units_Ok-1321"><span class="linenos">1321</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.units_Ok-1322"><a href="#NumberWithUnits.units_Ok-1322"><span class="linenos">1322</span></a><span class="sd">        Test if current units are correct.</span>
</span><span id="NumberWithUnits.units_Ok-1323"><a href="#NumberWithUnits.units_Ok-1323"><span class="linenos">1323</span></a>
</span><span id="NumberWithUnits.units_Ok-1324"><a href="#NumberWithUnits.units_Ok-1324"><span class="linenos">1324</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits.units_Ok-1325"><a href="#NumberWithUnits.units_Ok-1325"><span class="linenos">1325</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits.units_Ok-1326"><a href="#NumberWithUnits.units_Ok-1326"><span class="linenos">1326</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="NumberWithUnits.units_Ok-1327"><a href="#NumberWithUnits.units_Ok-1327"><span class="linenos">1327</span></a><span class="sd">            If units=&#39;something&#39;, then &#39;something&#39; is compared</span>
</span><span id="NumberWithUnits.units_Ok-1328"><a href="#NumberWithUnits.units_Ok-1328"><span class="linenos">1328</span></a><span class="sd">            with the list of allowed units for self = NumberWithUnits object.</span>
</span><span id="NumberWithUnits.units_Ok-1329"><a href="#NumberWithUnits.units_Ok-1329"><span class="linenos">1329</span></a>
</span><span id="NumberWithUnits.units_Ok-1330"><a href="#NumberWithUnits.units_Ok-1330"><span class="linenos">1330</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.units_Ok-1331"><a href="#NumberWithUnits.units_Ok-1331"><span class="linenos">1331</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.units_Ok-1332"><a href="#NumberWithUnits.units_Ok-1332"><span class="linenos">1332</span></a><span class="sd">        bool</span>
</span><span id="NumberWithUnits.units_Ok-1333"><a href="#NumberWithUnits.units_Ok-1333"><span class="linenos">1333</span></a><span class="sd">            True if the units are correct and False otherwise.</span>
</span><span id="NumberWithUnits.units_Ok-1334"><a href="#NumberWithUnits.units_Ok-1334"><span class="linenos">1334</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.units_Ok-1335"><a href="#NumberWithUnits.units_Ok-1335"><span class="linenos">1335</span></a>        <span class="c1"># (1) If units argument is not given,</span>
</span><span id="NumberWithUnits.units_Ok-1336"><a href="#NumberWithUnits.units_Ok-1336"><span class="linenos">1336</span></a>        <span class="c1"># check units of current NumberWithUnits object.</span>
</span><span id="NumberWithUnits.units_Ok-1337"><a href="#NumberWithUnits.units_Ok-1337"><span class="linenos">1337</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NumberWithUnits.units_Ok-1338"><a href="#NumberWithUnits.units_Ok-1338"><span class="linenos">1338</span></a>            <span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span>
</span><span id="NumberWithUnits.units_Ok-1339"><a href="#NumberWithUnits.units_Ok-1339"><span class="linenos">1339</span></a>        <span class="c1"># (2) Return True/False if units are correct/incorrect.</span>
</span><span id="NumberWithUnits.units_Ok-1340"><a href="#NumberWithUnits.units_Ok-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="n">units</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">:</span>
</span><span id="NumberWithUnits.units_Ok-1341"><a href="#NumberWithUnits.units_Ok-1341"><span class="linenos">1341</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="NumberWithUnits.units_Ok-1342"><a href="#NumberWithUnits.units_Ok-1342"><span class="linenos">1342</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.units_Ok-1343"><a href="#NumberWithUnits.units_Ok-1343"><span class="linenos">1343</span></a>            <span class="k">return</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Test if current units are correct.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>units</strong> (str, optional, the default is None):
If units='something', then 'something' is compared
with the list of allowed units for self = NumberWithUnits object.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>bool</strong>: True if the units are correct and False otherwise.</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.index_of_units" class="classattr">
                                        <input id="NumberWithUnits.index_of_units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">index_of_units</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">units_to_check</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.index_of_units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.index_of_units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.index_of_units-1345"><a href="#NumberWithUnits.index_of_units-1345"><span class="linenos">1345</span></a>    <span class="k">def</span> <span class="nf">index_of_units</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units_to_check</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="NumberWithUnits.index_of_units-1346"><a href="#NumberWithUnits.index_of_units-1346"><span class="linenos">1346</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.index_of_units-1347"><a href="#NumberWithUnits.index_of_units-1347"><span class="linenos">1347</span></a><span class="sd">        Get index of current or specified units.</span>
</span><span id="NumberWithUnits.index_of_units-1348"><a href="#NumberWithUnits.index_of_units-1348"><span class="linenos">1348</span></a>
</span><span id="NumberWithUnits.index_of_units-1349"><a href="#NumberWithUnits.index_of_units-1349"><span class="linenos">1349</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits.index_of_units-1350"><a href="#NumberWithUnits.index_of_units-1350"><span class="linenos">1350</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits.index_of_units-1351"><a href="#NumberWithUnits.index_of_units-1351"><span class="linenos">1351</span></a><span class="sd">        units_to_check : str, optional, default is None</span>
</span><span id="NumberWithUnits.index_of_units-1352"><a href="#NumberWithUnits.index_of_units-1352"><span class="linenos">1352</span></a><span class="sd">            Any string representing some units.</span>
</span><span id="NumberWithUnits.index_of_units-1353"><a href="#NumberWithUnits.index_of_units-1353"><span class="linenos">1353</span></a><span class="sd">            If units_to_check is not given,</span>
</span><span id="NumberWithUnits.index_of_units-1354"><a href="#NumberWithUnits.index_of_units-1354"><span class="linenos">1354</span></a><span class="sd">            the method check current units of self object.</span>
</span><span id="NumberWithUnits.index_of_units-1355"><a href="#NumberWithUnits.index_of_units-1355"><span class="linenos">1355</span></a><span class="sd">            </span>
</span><span id="NumberWithUnits.index_of_units-1356"><a href="#NumberWithUnits.index_of_units-1356"><span class="linenos">1356</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.index_of_units-1357"><a href="#NumberWithUnits.index_of_units-1357"><span class="linenos">1357</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.index_of_units-1358"><a href="#NumberWithUnits.index_of_units-1358"><span class="linenos">1358</span></a><span class="sd">        int</span>
</span><span id="NumberWithUnits.index_of_units-1359"><a href="#NumberWithUnits.index_of_units-1359"><span class="linenos">1359</span></a><span class="sd">            Index of current or specified units.</span>
</span><span id="NumberWithUnits.index_of_units-1360"><a href="#NumberWithUnits.index_of_units-1360"><span class="linenos">1360</span></a><span class="sd">            If units = &#39;um&#39; then index_of_units = 2,</span>
</span><span id="NumberWithUnits.index_of_units-1361"><a href="#NumberWithUnits.index_of_units-1361"><span class="linenos">1361</span></a><span class="sd">            because Units.Lenghts.units = (&#39;m&#39;, &#39;mm&#39;, &#39;um&#39;, &#39;nm&#39;, &#39;A&#39;),</span>
</span><span id="NumberWithUnits.index_of_units-1362"><a href="#NumberWithUnits.index_of_units-1362"><span class="linenos">1362</span></a><span class="sd">            which means: &#39;m&#39; =&gt; 0, &#39;mm&#39; =&gt; 1, &#39;um&#39; =&gt; 2...</span>
</span><span id="NumberWithUnits.index_of_units-1363"><a href="#NumberWithUnits.index_of_units-1363"><span class="linenos">1363</span></a><span class="sd">        </span>
</span><span id="NumberWithUnits.index_of_units-1364"><a href="#NumberWithUnits.index_of_units-1364"><span class="linenos">1364</span></a><span class="sd">        Note</span>
</span><span id="NumberWithUnits.index_of_units-1365"><a href="#NumberWithUnits.index_of_units-1365"><span class="linenos">1365</span></a><span class="sd">        ----</span>
</span><span id="NumberWithUnits.index_of_units-1366"><a href="#NumberWithUnits.index_of_units-1366"><span class="linenos">1366</span></a><span class="sd">        This function is employed in further functions</span>
</span><span id="NumberWithUnits.index_of_units-1367"><a href="#NumberWithUnits.index_of_units-1367"><span class="linenos">1367</span></a><span class="sd">        manipulating with units, such as increase_units, decrease_units...</span>
</span><span id="NumberWithUnits.index_of_units-1368"><a href="#NumberWithUnits.index_of_units-1368"><span class="linenos">1368</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.index_of_units-1369"><a href="#NumberWithUnits.index_of_units-1369"><span class="linenos">1369</span></a>        <span class="k">if</span> <span class="n">units_to_check</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">units_to_check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span> 
</span><span id="NumberWithUnits.index_of_units-1370"><a href="#NumberWithUnits.index_of_units-1370"><span class="linenos">1370</span></a>        <span class="n">index_of_units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">units_to_check</span><span class="p">)</span>
</span><span id="NumberWithUnits.index_of_units-1371"><a href="#NumberWithUnits.index_of_units-1371"><span class="linenos">1371</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">index_of_units</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get index of current or specified units.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>units_to_check</strong> (str, optional, default is None):
Any string representing some units.
If units_to_check is not given,
the method check current units of self object.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>int</strong>: Index of current or specified units.
If units = 'um' then index_of_units = 2,
because Units.Lenghts.units = ('m', 'mm', 'um', 'nm', 'A'),
which means: 'm' =&gt; 0, 'mm' =&gt; 1, 'um' =&gt; 2...</li>
</ul>

<h6 id="note">Note</h6>

<p>This function is employed in further functions
manipulating with units, such as increase_units, decrease_units...</p>
</div>


                            </div>
                            <div id="NumberWithUnits.increase_units" class="classattr">
                                        <input id="NumberWithUnits.increase_units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">increase_units</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.increase_units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.increase_units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.increase_units-1373"><a href="#NumberWithUnits.increase_units-1373"><span class="linenos">1373</span></a>    <span class="k">def</span> <span class="nf">increase_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits.increase_units-1374"><a href="#NumberWithUnits.increase_units-1374"><span class="linenos">1374</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.increase_units-1375"><a href="#NumberWithUnits.increase_units-1375"><span class="linenos">1375</span></a><span class="sd">        Increase current units (for example: um -&gt; mm).</span>
</span><span id="NumberWithUnits.increase_units-1376"><a href="#NumberWithUnits.increase_units-1376"><span class="linenos">1376</span></a>
</span><span id="NumberWithUnits.increase_units-1377"><a href="#NumberWithUnits.increase_units-1377"><span class="linenos">1377</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.increase_units-1378"><a href="#NumberWithUnits.increase_units-1378"><span class="linenos">1378</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.increase_units-1379"><a href="#NumberWithUnits.increase_units-1379"><span class="linenos">1379</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits.increase_units-1380"><a href="#NumberWithUnits.increase_units-1380"><span class="linenos">1380</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits.increase_units-1381"><a href="#NumberWithUnits.increase_units-1381"><span class="linenos">1381</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.increase_units-1382"><a href="#NumberWithUnits.increase_units-1382"><span class="linenos">1382</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="NumberWithUnits.increase_units-1383"><a href="#NumberWithUnits.increase_units-1383"><span class="linenos">1383</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits.increase_units-1384"><a href="#NumberWithUnits.increase_units-1384"><span class="linenos">1384</span></a>        <span class="c1"># (2) If index-of-curent-units = 0,</span>
</span><span id="NumberWithUnits.increase_units-1385"><a href="#NumberWithUnits.increase_units-1385"><span class="linenos">1385</span></a>        <span class="c1"># then it is not possible to increase units - we are at maximum. </span>
</span><span id="NumberWithUnits.increase_units-1386"><a href="#NumberWithUnits.increase_units-1386"><span class="linenos">1386</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits.increase_units-1387"><a href="#NumberWithUnits.increase_units-1387"><span class="linenos">1387</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to increase units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.increase_units-1388"><a href="#NumberWithUnits.increase_units-1388"><span class="linenos">1388</span></a>        <span class="c1"># (3) If index-of-current-units &gt; 0,</span>
</span><span id="NumberWithUnits.increase_units-1389"><a href="#NumberWithUnits.increase_units-1389"><span class="linenos">1389</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) decrease number, 3) increase units.</span>
</span><span id="NumberWithUnits.increase_units-1390"><a href="#NumberWithUnits.increase_units-1390"><span class="linenos">1390</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.increase_units-1391"><a href="#NumberWithUnits.increase_units-1391"><span class="linenos">1391</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="NumberWithUnits.increase_units-1392"><a href="#NumberWithUnits.increase_units-1392"><span class="linenos">1392</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="NumberWithUnits.increase_units-1393"><a href="#NumberWithUnits.increase_units-1393"><span class="linenos">1393</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="NumberWithUnits.increase_units-1394"><a href="#NumberWithUnits.increase_units-1394"><span class="linenos">1394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="NumberWithUnits.increase_units-1395"><a href="#NumberWithUnits.increase_units-1395"><span class="linenos">1395</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Increase current units (for example: um -> mm).</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The result is saved in NumberWithUnits object.</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.decrease_units" class="classattr">
                                        <input id="NumberWithUnits.decrease_units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">decrease_units</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.decrease_units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.decrease_units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.decrease_units-1397"><a href="#NumberWithUnits.decrease_units-1397"><span class="linenos">1397</span></a>    <span class="k">def</span> <span class="nf">decrease_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits.decrease_units-1398"><a href="#NumberWithUnits.decrease_units-1398"><span class="linenos">1398</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.decrease_units-1399"><a href="#NumberWithUnits.decrease_units-1399"><span class="linenos">1399</span></a><span class="sd">        Decrease current units (for example: um -&gt; nm).</span>
</span><span id="NumberWithUnits.decrease_units-1400"><a href="#NumberWithUnits.decrease_units-1400"><span class="linenos">1400</span></a>
</span><span id="NumberWithUnits.decrease_units-1401"><a href="#NumberWithUnits.decrease_units-1401"><span class="linenos">1401</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.decrease_units-1402"><a href="#NumberWithUnits.decrease_units-1402"><span class="linenos">1402</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.decrease_units-1403"><a href="#NumberWithUnits.decrease_units-1403"><span class="linenos">1403</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits.decrease_units-1404"><a href="#NumberWithUnits.decrease_units-1404"><span class="linenos">1404</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits.decrease_units-1405"><a href="#NumberWithUnits.decrease_units-1405"><span class="linenos">1405</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.decrease_units-1406"><a href="#NumberWithUnits.decrease_units-1406"><span class="linenos">1406</span></a>        <span class="c1"># (1) Get index of current units.</span>
</span><span id="NumberWithUnits.decrease_units-1407"><a href="#NumberWithUnits.decrease_units-1407"><span class="linenos">1407</span></a>        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits.decrease_units-1408"><a href="#NumberWithUnits.decrease_units-1408"><span class="linenos">1408</span></a>        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="NumberWithUnits.decrease_units-1409"><a href="#NumberWithUnits.decrease_units-1409"><span class="linenos">1409</span></a>        <span class="c1"># (2) If index-of-curent-units = last-index-of-our-units,</span>
</span><span id="NumberWithUnits.decrease_units-1410"><a href="#NumberWithUnits.decrease_units-1410"><span class="linenos">1410</span></a>        <span class="c1"># then it is not possible to decrease units - we are at minimum. </span>
</span><span id="NumberWithUnits.decrease_units-1411"><a href="#NumberWithUnits.decrease_units-1411"><span class="linenos">1411</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">max_index</span><span class="p">:</span>
</span><span id="NumberWithUnits.decrease_units-1412"><a href="#NumberWithUnits.decrease_units-1412"><span class="linenos">1412</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It is not possible to decrease units!&#39;</span><span class="p">)</span>
</span><span id="NumberWithUnits.decrease_units-1413"><a href="#NumberWithUnits.decrease_units-1413"><span class="linenos">1413</span></a>        <span class="c1"># (3) If index-of-current-units &lt; last-index-of-our-units,</span>
</span><span id="NumberWithUnits.decrease_units-1414"><a href="#NumberWithUnits.decrease_units-1414"><span class="linenos">1414</span></a>        <span class="c1"># we can: 1) calculate ratio, 2) increase number, 3) decrease units.</span>
</span><span id="NumberWithUnits.decrease_units-1415"><a href="#NumberWithUnits.decrease_units-1415"><span class="linenos">1415</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="NumberWithUnits.decrease_units-1416"><a href="#NumberWithUnits.decrease_units-1416"><span class="linenos">1416</span></a>            <span class="n">ratio_between_units</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="NumberWithUnits.decrease_units-1417"><a href="#NumberWithUnits.decrease_units-1417"><span class="linenos">1417</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span>
</span><span id="NumberWithUnits.decrease_units-1418"><a href="#NumberWithUnits.decrease_units-1418"><span class="linenos">1418</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">ratios</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span id="NumberWithUnits.decrease_units-1419"><a href="#NumberWithUnits.decrease_units-1419"><span class="linenos">1419</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">/</span> <span class="n">ratio_between_units</span>
</span><span id="NumberWithUnits.decrease_units-1420"><a href="#NumberWithUnits.decrease_units-1420"><span class="linenos">1420</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">units</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units_description</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Decrease current units (for example: um -> nm).</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The result is saved in NumberWithUnits object.</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.set_units_to" class="classattr">
                                        <input id="NumberWithUnits.set_units_to-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_units_to</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target_units</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.set_units_to-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.set_units_to"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.set_units_to-1422"><a href="#NumberWithUnits.set_units_to-1422"><span class="linenos">1422</span></a>    <span class="k">def</span> <span class="nf">set_units_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_units</span><span class="p">):</span>
</span><span id="NumberWithUnits.set_units_to-1423"><a href="#NumberWithUnits.set_units_to-1423"><span class="linenos">1423</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.set_units_to-1424"><a href="#NumberWithUnits.set_units_to-1424"><span class="linenos">1424</span></a><span class="sd">        Set units to *target_units* and modify number accordingly.</span>
</span><span id="NumberWithUnits.set_units_to-1425"><a href="#NumberWithUnits.set_units_to-1425"><span class="linenos">1425</span></a>
</span><span id="NumberWithUnits.set_units_to-1426"><a href="#NumberWithUnits.set_units_to-1426"><span class="linenos">1426</span></a><span class="sd">        Parameters</span>
</span><span id="NumberWithUnits.set_units_to-1427"><a href="#NumberWithUnits.set_units_to-1427"><span class="linenos">1427</span></a><span class="sd">        ----------</span>
</span><span id="NumberWithUnits.set_units_to-1428"><a href="#NumberWithUnits.set_units_to-1428"><span class="linenos">1428</span></a><span class="sd">        target_units : str</span>
</span><span id="NumberWithUnits.set_units_to-1429"><a href="#NumberWithUnits.set_units_to-1429"><span class="linenos">1429</span></a><span class="sd">            Any string specifying valid units.</span>
</span><span id="NumberWithUnits.set_units_to-1430"><a href="#NumberWithUnits.set_units_to-1430"><span class="linenos">1430</span></a>
</span><span id="NumberWithUnits.set_units_to-1431"><a href="#NumberWithUnits.set_units_to-1431"><span class="linenos">1431</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.set_units_to-1432"><a href="#NumberWithUnits.set_units_to-1432"><span class="linenos">1432</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.set_units_to-1433"><a href="#NumberWithUnits.set_units_to-1433"><span class="linenos">1433</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits.set_units_to-1434"><a href="#NumberWithUnits.set_units_to-1434"><span class="linenos">1434</span></a><span class="sd">            The results = changed units (and correspondingly changed number)</span>
</span><span id="NumberWithUnits.set_units_to-1435"><a href="#NumberWithUnits.set_units_to-1435"><span class="linenos">1435</span></a><span class="sd">            are saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits.set_units_to-1436"><a href="#NumberWithUnits.set_units_to-1436"><span class="linenos">1436</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.set_units_to-1437"><a href="#NumberWithUnits.set_units_to-1437"><span class="linenos">1437</span></a>        <span class="n">index_current</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">()</span>
</span><span id="NumberWithUnits.set_units_to-1438"><a href="#NumberWithUnits.set_units_to-1438"><span class="linenos">1438</span></a>        <span class="n">index_target</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index_of_units</span><span class="p">(</span><span class="n">target_units</span><span class="p">)</span>
</span><span id="NumberWithUnits.set_units_to-1439"><a href="#NumberWithUnits.set_units_to-1439"><span class="linenos">1439</span></a>        <span class="n">index_difference</span> <span class="o">=</span> <span class="n">index_target</span> <span class="o">-</span> <span class="n">index_current</span>
</span><span id="NumberWithUnits.set_units_to-1440"><a href="#NumberWithUnits.set_units_to-1440"><span class="linenos">1440</span></a>        <span class="k">if</span> <span class="n">index_difference</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits.set_units_to-1441"><a href="#NumberWithUnits.set_units_to-1441"><span class="linenos">1441</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">index_difference</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="NumberWithUnits.set_units_to-1442"><a href="#NumberWithUnits.set_units_to-1442"><span class="linenos">1442</span></a>        <span class="k">elif</span> <span class="n">index_difference</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="NumberWithUnits.set_units_to-1443"><a href="#NumberWithUnits.set_units_to-1443"><span class="linenos">1443</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">index_difference</span><span class="p">)):</span> <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Set units to <em>target_units</em> and modify number accordingly.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>target_units</strong> (str):
Any string specifying valid units.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The results = changed units (and correspondingly changed number)
are saved in NumberWithUnits object.</li>
</ul>
</div>


                            </div>
                            <div id="NumberWithUnits.set_correct_units" class="classattr">
                                        <input id="NumberWithUnits.set_correct_units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_correct_units</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="NumberWithUnits.set_correct_units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NumberWithUnits.set_correct_units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NumberWithUnits.set_correct_units-1445"><a href="#NumberWithUnits.set_correct_units-1445"><span class="linenos">1445</span></a>    <span class="k">def</span> <span class="nf">set_correct_units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="NumberWithUnits.set_correct_units-1446"><a href="#NumberWithUnits.set_correct_units-1446"><span class="linenos">1446</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.set_correct_units-1447"><a href="#NumberWithUnits.set_correct_units-1447"><span class="linenos">1447</span></a><span class="sd">        Set correct units, so that the number was between 1 and 1000.</span>
</span><span id="NumberWithUnits.set_correct_units-1448"><a href="#NumberWithUnits.set_correct_units-1448"><span class="linenos">1448</span></a>
</span><span id="NumberWithUnits.set_correct_units-1449"><a href="#NumberWithUnits.set_correct_units-1449"><span class="linenos">1449</span></a><span class="sd">        Returns</span>
</span><span id="NumberWithUnits.set_correct_units-1450"><a href="#NumberWithUnits.set_correct_units-1450"><span class="linenos">1450</span></a><span class="sd">        -------</span>
</span><span id="NumberWithUnits.set_correct_units-1451"><a href="#NumberWithUnits.set_correct_units-1451"><span class="linenos">1451</span></a><span class="sd">        None</span>
</span><span id="NumberWithUnits.set_correct_units-1452"><a href="#NumberWithUnits.set_correct_units-1452"><span class="linenos">1452</span></a><span class="sd">            The result is saved in NumberWithUnits object.</span>
</span><span id="NumberWithUnits.set_correct_units-1453"><a href="#NumberWithUnits.set_correct_units-1453"><span class="linenos">1453</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="NumberWithUnits.set_correct_units-1454"><a href="#NumberWithUnits.set_correct_units-1454"><span class="linenos">1454</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="NumberWithUnits.set_correct_units-1455"><a href="#NumberWithUnits.set_correct_units-1455"><span class="linenos">1455</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">decrease_units</span><span class="p">()</span>
</span><span id="NumberWithUnits.set_correct_units-1456"><a href="#NumberWithUnits.set_correct_units-1456"><span class="linenos">1456</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
</span><span id="NumberWithUnits.set_correct_units-1457"><a href="#NumberWithUnits.set_correct_units-1457"><span class="linenos">1457</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">increase_units</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Set correct units, so that the number was between 1 and 1000.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The result is saved in NumberWithUnits object.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="ScaleWithUnits">
                            <input id="ScaleWithUnits-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ScaleWithUnits</span><wbr>(<span class="base"><a href="#NumberWithUnits">NumberWithUnits</a></span>):

                <label class="view-source-button" for="ScaleWithUnits-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ScaleWithUnits"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ScaleWithUnits-1460"><a href="#ScaleWithUnits-1460"><span class="linenos">1460</span></a><span class="k">class</span> <span class="nc">ScaleWithUnits</span><span class="p">(</span><span class="n">NumberWithUnits</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1461"><a href="#ScaleWithUnits-1461"><span class="linenos">1461</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1462"><a href="#ScaleWithUnits-1462"><span class="linenos">1462</span></a><span class="sd">    Class defining ScaleWithUnits object.</span>
</span><span id="ScaleWithUnits-1463"><a href="#ScaleWithUnits-1463"><span class="linenos">1463</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1464"><a href="#ScaleWithUnits-1464"><span class="linenos">1464</span></a><span class="sd">    * ScaleWithUnits object = number + units + pixels.</span>
</span><span id="ScaleWithUnits-1465"><a href="#ScaleWithUnits-1465"><span class="linenos">1465</span></a><span class="sd">    * The objet defines a scalebar:</span>
</span><span id="ScaleWithUnits-1466"><a href="#ScaleWithUnits-1466"><span class="linenos">1466</span></a><span class="sd">      its lenght (number,units) and length-in-pixels (pixels).</span>
</span><span id="ScaleWithUnits-1467"><a href="#ScaleWithUnits-1467"><span class="linenos">1467</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1468"><a href="#ScaleWithUnits-1468"><span class="linenos">1468</span></a><span class="sd">    Object initialiation</span>
</span><span id="ScaleWithUnits-1469"><a href="#ScaleWithUnits-1469"><span class="linenos">1469</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1470"><a href="#ScaleWithUnits-1470"><span class="linenos">1470</span></a><span class="sd">    &gt;&gt;&gt; # Three basic ways how to initialize a ScaleWithUnits object</span>
</span><span id="ScaleWithUnits-1471"><a href="#ScaleWithUnits-1471"><span class="linenos">1471</span></a><span class="sd">    &gt;&gt;&gt; # (this is a NON-typical usage</span>
</span><span id="ScaleWithUnits-1472"><a href="#ScaleWithUnits-1472"><span class="linenos">1472</span></a><span class="sd">    &gt;&gt;&gt; # (ScaleWithUnits object is used internally, when drawing scalebars</span>
</span><span id="ScaleWithUnits-1473"><a href="#ScaleWithUnits-1473"><span class="linenos">1473</span></a><span class="sd">    &gt;&gt;&gt; from myimg.nwu import ScaleWithUnits</span>
</span><span id="ScaleWithUnits-1474"><a href="#ScaleWithUnits-1474"><span class="linenos">1474</span></a><span class="sd">    &gt;&gt;&gt; swu1 = ScaleWithUnits(&#39;1.2um&#39;, pixels=100)</span>
</span><span id="ScaleWithUnits-1475"><a href="#ScaleWithUnits-1475"><span class="linenos">1475</span></a><span class="sd">    &gt;&gt;&gt; swu2 = ScaleWithUnits(number=1.2, units=&#39;um&#39;, pixels=100)</span>
</span><span id="ScaleWithUnits-1476"><a href="#ScaleWithUnits-1476"><span class="linenos">1476</span></a><span class="sd">    &gt;&gt;&gt; swu3 = ScaleWithUnits(a_number_with_units_object, pixels=100)</span>
</span><span id="ScaleWithUnits-1477"><a href="#ScaleWithUnits-1477"><span class="linenos">1477</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1478"><a href="#ScaleWithUnits-1478"><span class="linenos">1478</span></a><span class="sd">    List of object properties</span>
</span><span id="ScaleWithUnits-1479"><a href="#ScaleWithUnits-1479"><span class="linenos">1479</span></a><span class="sd">        </span>
</span><span id="ScaleWithUnits-1480"><a href="#ScaleWithUnits-1480"><span class="linenos">1480</span></a><span class="sd">    * number = number/numeric value</span>
</span><span id="ScaleWithUnits-1481"><a href="#ScaleWithUnits-1481"><span class="linenos">1481</span></a><span class="sd">    * units  = units corresponding to number</span>
</span><span id="ScaleWithUnits-1482"><a href="#ScaleWithUnits-1482"><span class="linenos">1482</span></a><span class="sd">    * pixels = pixels corresponding to number-with-units</span>
</span><span id="ScaleWithUnits-1483"><a href="#ScaleWithUnits-1483"><span class="linenos">1483</span></a><span class="sd">    * _units_description: myimg.settings.Units subclass, private property</span>
</span><span id="ScaleWithUnits-1484"><a href="#ScaleWithUnits-1484"><span class="linenos">1484</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1485"><a href="#ScaleWithUnits-1485"><span class="linenos">1485</span></a><span class="sd">    Object methods</span>
</span><span id="ScaleWithUnits-1486"><a href="#ScaleWithUnits-1486"><span class="linenos">1486</span></a><span class="sd">    </span>
</span><span id="ScaleWithUnits-1487"><a href="#ScaleWithUnits-1487"><span class="linenos">1487</span></a><span class="sd">    * inherited methods from myimg.nwu.NumberWithUnits</span>
</span><span id="ScaleWithUnits-1488"><a href="#ScaleWithUnits-1488"><span class="linenos">1488</span></a><span class="sd">    * adjust_lenght_to = adjust lenght in pixels and modify number accordingly</span>
</span><span id="ScaleWithUnits-1489"><a href="#ScaleWithUnits-1489"><span class="linenos">1489</span></a><span class="sd">    * adjust_scalebar_size = adjusts scalebar lenght to some reasonable size</span>
</span><span id="ScaleWithUnits-1490"><a href="#ScaleWithUnits-1490"><span class="linenos">1490</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1491"><a href="#ScaleWithUnits-1491"><span class="linenos">1491</span></a>    
</span><span id="ScaleWithUnits-1492"><a href="#ScaleWithUnits-1492"><span class="linenos">1492</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1493"><a href="#ScaleWithUnits-1493"><span class="linenos">1493</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1494"><a href="#ScaleWithUnits-1494"><span class="linenos">1494</span></a><span class="sd">        Initialize ScaleWithUnits object.</span>
</span><span id="ScaleWithUnits-1495"><a href="#ScaleWithUnits-1495"><span class="linenos">1495</span></a>
</span><span id="ScaleWithUnits-1496"><a href="#ScaleWithUnits-1496"><span class="linenos">1496</span></a><span class="sd">        Parameters</span>
</span><span id="ScaleWithUnits-1497"><a href="#ScaleWithUnits-1497"><span class="linenos">1497</span></a><span class="sd">        ----------</span>
</span><span id="ScaleWithUnits-1498"><a href="#ScaleWithUnits-1498"><span class="linenos">1498</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="ScaleWithUnits-1499"><a href="#ScaleWithUnits-1499"><span class="linenos">1499</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="ScaleWithUnits-1500"><a href="#ScaleWithUnits-1500"><span class="linenos">1500</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="ScaleWithUnits-1501"><a href="#ScaleWithUnits-1501"><span class="linenos">1501</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="ScaleWithUnits-1502"><a href="#ScaleWithUnits-1502"><span class="linenos">1502</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="ScaleWithUnits-1503"><a href="#ScaleWithUnits-1503"><span class="linenos">1503</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="ScaleWithUnits-1504"><a href="#ScaleWithUnits-1504"><span class="linenos">1504</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="ScaleWithUnits-1505"><a href="#ScaleWithUnits-1505"><span class="linenos">1505</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="ScaleWithUnits-1506"><a href="#ScaleWithUnits-1506"><span class="linenos">1506</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="ScaleWithUnits-1507"><a href="#ScaleWithUnits-1507"><span class="linenos">1507</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="ScaleWithUnits-1508"><a href="#ScaleWithUnits-1508"><span class="linenos">1508</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="ScaleWithUnits-1509"><a href="#ScaleWithUnits-1509"><span class="linenos">1509</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="ScaleWithUnits-1510"><a href="#ScaleWithUnits-1510"><span class="linenos">1510</span></a><span class="sd">        pixels : float</span>
</span><span id="ScaleWithUnits-1511"><a href="#ScaleWithUnits-1511"><span class="linenos">1511</span></a><span class="sd">            Length of scalebar in pixels.</span>
</span><span id="ScaleWithUnits-1512"><a href="#ScaleWithUnits-1512"><span class="linenos">1512</span></a><span class="sd">            This is a keyword argument that is formally optional, but in fact </span>
</span><span id="ScaleWithUnits-1513"><a href="#ScaleWithUnits-1513"><span class="linenos">1513</span></a><span class="sd">            it must be specified so that the initialization made sense.</span>
</span><span id="ScaleWithUnits-1514"><a href="#ScaleWithUnits-1514"><span class="linenos">1514</span></a><span class="sd">            Moreover, this argument must be specified as keyword argument,</span>
</span><span id="ScaleWithUnits-1515"><a href="#ScaleWithUnits-1515"><span class="linenos">1515</span></a><span class="sd">            because the 2nd argument (units) is really optional and</span>
</span><span id="ScaleWithUnits-1516"><a href="#ScaleWithUnits-1516"><span class="linenos">1516</span></a><span class="sd">            it may not be clear, which argument is which.</span>
</span><span id="ScaleWithUnits-1517"><a href="#ScaleWithUnits-1517"><span class="linenos">1517</span></a><span class="sd">            </span>
</span><span id="ScaleWithUnits-1518"><a href="#ScaleWithUnits-1518"><span class="linenos">1518</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits-1519"><a href="#ScaleWithUnits-1519"><span class="linenos">1519</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits-1520"><a href="#ScaleWithUnits-1520"><span class="linenos">1520</span></a><span class="sd">        ScaleWithUnits object</span>
</span><span id="ScaleWithUnits-1521"><a href="#ScaleWithUnits-1521"><span class="linenos">1521</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="ScaleWithUnits-1522"><a href="#ScaleWithUnits-1522"><span class="linenos">1522</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="ScaleWithUnits-1523"><a href="#ScaleWithUnits-1523"><span class="linenos">1523</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units),</span>
</span><span id="ScaleWithUnits-1524"><a href="#ScaleWithUnits-1524"><span class="linenos">1524</span></a><span class="sd">            (iii) length-of-scalebar-in-pixels and</span>
</span><span id="ScaleWithUnits-1525"><a href="#ScaleWithUnits-1525"><span class="linenos">1525</span></a><span class="sd">            (iv) further props/methods (most of which</span>
</span><span id="ScaleWithUnits-1526"><a href="#ScaleWithUnits-1526"><span class="linenos">1526</span></a><span class="sd">            are inherited from NumberWithUnits superclass).</span>
</span><span id="ScaleWithUnits-1527"><a href="#ScaleWithUnits-1527"><span class="linenos">1527</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1528"><a href="#ScaleWithUnits-1528"><span class="linenos">1528</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1529"><a href="#ScaleWithUnits-1529"><span class="linenos">1529</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">pixels</span>
</span><span id="ScaleWithUnits-1530"><a href="#ScaleWithUnits-1530"><span class="linenos">1530</span></a>    
</span><span id="ScaleWithUnits-1531"><a href="#ScaleWithUnits-1531"><span class="linenos">1531</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1532"><a href="#ScaleWithUnits-1532"><span class="linenos">1532</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;Overwritten __str__ method to get nice output with print.&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1533"><a href="#ScaleWithUnits-1533"><span class="linenos">1533</span></a>        <span class="n">text</span> <span class="o">=</span> \
</span><span id="ScaleWithUnits-1534"><a href="#ScaleWithUnits-1534"><span class="linenos">1534</span></a>            <span class="s1">&#39;Scalebar: &#39;</span> <span class="o">+</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span> <span class="o">+</span> \
</span><span id="ScaleWithUnits-1535"><a href="#ScaleWithUnits-1535"><span class="linenos">1535</span></a>            <span class="s1">&#39;, length-in-pixels: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1536"><a href="#ScaleWithUnits-1536"><span class="linenos">1536</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1537"><a href="#ScaleWithUnits-1537"><span class="linenos">1537</span></a>    
</span><span id="ScaleWithUnits-1538"><a href="#ScaleWithUnits-1538"><span class="linenos">1538</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1539"><a href="#ScaleWithUnits-1539"><span class="linenos">1539</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1540"><a href="#ScaleWithUnits-1540"><span class="linenos">1540</span></a><span class="sd">        Return number-with-units as string (ignoring pixels).</span>
</span><span id="ScaleWithUnits-1541"><a href="#ScaleWithUnits-1541"><span class="linenos">1541</span></a>
</span><span id="ScaleWithUnits-1542"><a href="#ScaleWithUnits-1542"><span class="linenos">1542</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits-1543"><a href="#ScaleWithUnits-1543"><span class="linenos">1543</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits-1544"><a href="#ScaleWithUnits-1544"><span class="linenos">1544</span></a><span class="sd">        str : number-with-units</span>
</span><span id="ScaleWithUnits-1545"><a href="#ScaleWithUnits-1545"><span class="linenos">1545</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="ScaleWithUnits-1546"><a href="#ScaleWithUnits-1546"><span class="linenos">1546</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="ScaleWithUnits-1547"><a href="#ScaleWithUnits-1547"><span class="linenos">1547</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="ScaleWithUnits-1548"><a href="#ScaleWithUnits-1548"><span class="linenos">1548</span></a>
</span><span id="ScaleWithUnits-1549"><a href="#ScaleWithUnits-1549"><span class="linenos">1549</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1550"><a href="#ScaleWithUnits-1550"><span class="linenos">1550</span></a>        <span class="c1"># We need JUST text.</span>
</span><span id="ScaleWithUnits-1551"><a href="#ScaleWithUnits-1551"><span class="linenos">1551</span></a>        <span class="c1"># =&gt; therefore, we call super().__str__() - this returns just text.</span>
</span><span id="ScaleWithUnits-1552"><a href="#ScaleWithUnits-1552"><span class="linenos">1552</span></a>        <span class="c1"># =&gt; if we called self.__str__(), we would get text + pixel-size-info.</span>
</span><span id="ScaleWithUnits-1553"><a href="#ScaleWithUnits-1553"><span class="linenos">1553</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</span><span id="ScaleWithUnits-1554"><a href="#ScaleWithUnits-1554"><span class="linenos">1554</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1555"><a href="#ScaleWithUnits-1555"><span class="linenos">1555</span></a>    
</span><span id="ScaleWithUnits-1556"><a href="#ScaleWithUnits-1556"><span class="linenos">1556</span></a>    <span class="k">def</span> <span class="nf">adjust_length_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1557"><a href="#ScaleWithUnits-1557"><span class="linenos">1557</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1558"><a href="#ScaleWithUnits-1558"><span class="linenos">1558</span></a><span class="sd">        Set lenght-of-scalebar to *n* and modify lenght-in-pixels accordingly.</span>
</span><span id="ScaleWithUnits-1559"><a href="#ScaleWithUnits-1559"><span class="linenos">1559</span></a>
</span><span id="ScaleWithUnits-1560"><a href="#ScaleWithUnits-1560"><span class="linenos">1560</span></a><span class="sd">        Parameters</span>
</span><span id="ScaleWithUnits-1561"><a href="#ScaleWithUnits-1561"><span class="linenos">1561</span></a><span class="sd">        ----------</span>
</span><span id="ScaleWithUnits-1562"><a href="#ScaleWithUnits-1562"><span class="linenos">1562</span></a><span class="sd">        n : float</span>
</span><span id="ScaleWithUnits-1563"><a href="#ScaleWithUnits-1563"><span class="linenos">1563</span></a><span class="sd">            The new length-of-scalebar (= self.number).</span>
</span><span id="ScaleWithUnits-1564"><a href="#ScaleWithUnits-1564"><span class="linenos">1564</span></a>
</span><span id="ScaleWithUnits-1565"><a href="#ScaleWithUnits-1565"><span class="linenos">1565</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits-1566"><a href="#ScaleWithUnits-1566"><span class="linenos">1566</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits-1567"><a href="#ScaleWithUnits-1567"><span class="linenos">1567</span></a><span class="sd">        None</span>
</span><span id="ScaleWithUnits-1568"><a href="#ScaleWithUnits-1568"><span class="linenos">1568</span></a><span class="sd">            The new lenght-of-scalebar and lenght-of-scalebar-in-pixels</span>
</span><span id="ScaleWithUnits-1569"><a href="#ScaleWithUnits-1569"><span class="linenos">1569</span></a><span class="sd">            are saved in ScaleWithUnits.number and ScaleWithUnits.pixels</span>
</span><span id="ScaleWithUnits-1570"><a href="#ScaleWithUnits-1570"><span class="linenos">1570</span></a><span class="sd">            properties, respectively.</span>
</span><span id="ScaleWithUnits-1571"><a href="#ScaleWithUnits-1571"><span class="linenos">1571</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1572"><a href="#ScaleWithUnits-1572"><span class="linenos">1572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">*</span> <span class="n">n</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span>
</span><span id="ScaleWithUnits-1573"><a href="#ScaleWithUnits-1573"><span class="linenos">1573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">n</span>
</span><span id="ScaleWithUnits-1574"><a href="#ScaleWithUnits-1574"><span class="linenos">1574</span></a>        
</span><span id="ScaleWithUnits-1575"><a href="#ScaleWithUnits-1575"><span class="linenos">1575</span></a>    <span class="k">def</span> <span class="nf">adjust_scalebar_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ScaleWithUnits-1576"><a href="#ScaleWithUnits-1576"><span class="linenos">1576</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1577"><a href="#ScaleWithUnits-1577"><span class="linenos">1577</span></a><span class="sd">        Set scalebar to some reasonable lenght</span>
</span><span id="ScaleWithUnits-1578"><a href="#ScaleWithUnits-1578"><span class="linenos">1578</span></a><span class="sd">        and modify lenght-in-pixels accordingly.</span>
</span><span id="ScaleWithUnits-1579"><a href="#ScaleWithUnits-1579"><span class="linenos">1579</span></a>
</span><span id="ScaleWithUnits-1580"><a href="#ScaleWithUnits-1580"><span class="linenos">1580</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits-1581"><a href="#ScaleWithUnits-1581"><span class="linenos">1581</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits-1582"><a href="#ScaleWithUnits-1582"><span class="linenos">1582</span></a><span class="sd">        None</span>
</span><span id="ScaleWithUnits-1583"><a href="#ScaleWithUnits-1583"><span class="linenos">1583</span></a><span class="sd">            The modified (number, units, and pixels) are saved in</span>
</span><span id="ScaleWithUnits-1584"><a href="#ScaleWithUnits-1584"><span class="linenos">1584</span></a><span class="sd">            ScaleWithUnits object.</span>
</span><span id="ScaleWithUnits-1585"><a href="#ScaleWithUnits-1585"><span class="linenos">1585</span></a><span class="sd">            </span>
</span><span id="ScaleWithUnits-1586"><a href="#ScaleWithUnits-1586"><span class="linenos">1586</span></a><span class="sd">        Examples</span>
</span><span id="ScaleWithUnits-1587"><a href="#ScaleWithUnits-1587"><span class="linenos">1587</span></a><span class="sd">        --------</span>
</span><span id="ScaleWithUnits-1588"><a href="#ScaleWithUnits-1588"><span class="linenos">1588</span></a><span class="sd">        * swu = 0.3 um =&gt; swu.adjust_scalebar_size() =&gt; 300 nm</span>
</span><span id="ScaleWithUnits-1589"><a href="#ScaleWithUnits-1589"><span class="linenos">1589</span></a><span class="sd">        * swu = 2.3 um =&gt; swu.adjust_scalebar_size() =&gt; 2 um</span>
</span><span id="ScaleWithUnits-1590"><a href="#ScaleWithUnits-1590"><span class="linenos">1590</span></a><span class="sd">        * swu = 456 um =&gt; swu.adjust_scalebar_size() =&gt; 500 um</span>
</span><span id="ScaleWithUnits-1591"><a href="#ScaleWithUnits-1591"><span class="linenos">1591</span></a><span class="sd">        * swu = 888 um =&gt; swu.adjust_scalebar_size() =&gt; 1 mm</span>
</span><span id="ScaleWithUnits-1592"><a href="#ScaleWithUnits-1592"><span class="linenos">1592</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits-1593"><a href="#ScaleWithUnits-1593"><span class="linenos">1593</span></a>        <span class="c1"># Get the number in the interval &lt;1...1000)</span>
</span><span id="ScaleWithUnits-1594"><a href="#ScaleWithUnits-1594"><span class="linenos">1594</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="ScaleWithUnits-1595"><a href="#ScaleWithUnits-1595"><span class="linenos">1595</span></a>        <span class="c1"># Adjust the number to a reasonable value (1,2,3,5,10,20,30...),</span>
</span><span id="ScaleWithUnits-1596"><a href="#ScaleWithUnits-1596"><span class="linenos">1596</span></a>        <span class="c1"># modify the lenght-in-pixels accordingly, and change units if needed.</span>
</span><span id="ScaleWithUnits-1597"><a href="#ScaleWithUnits-1597"><span class="linenos">1597</span></a>        <span class="k">if</span>   <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">750</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1598"><a href="#ScaleWithUnits-1598"><span class="linenos">1598</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">350</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">500</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1599"><a href="#ScaleWithUnits-1599"><span class="linenos">1599</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">250</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1600"><a href="#ScaleWithUnits-1600"><span class="linenos">1600</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">200</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1601"><a href="#ScaleWithUnits-1601"><span class="linenos">1601</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">50</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1602"><a href="#ScaleWithUnits-1602"><span class="linenos">1602</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">35</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">50</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1603"><a href="#ScaleWithUnits-1603"><span class="linenos">1603</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">25</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">30</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1604"><a href="#ScaleWithUnits-1604"><span class="linenos">1604</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">15</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">20</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1605"><a href="#ScaleWithUnits-1605"><span class="linenos">1605</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">7.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">10</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1606"><a href="#ScaleWithUnits-1606"><span class="linenos">1606</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">3.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">5</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1607"><a href="#ScaleWithUnits-1607"><span class="linenos">1607</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">2.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">3</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1608"><a href="#ScaleWithUnits-1608"><span class="linenos">1608</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">1.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">2</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1609"><a href="#ScaleWithUnits-1609"><span class="linenos">1609</span></a>        <span class="k">else</span>                  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">1</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1610"><a href="#ScaleWithUnits-1610"><span class="linenos">1610</span></a>        <span class="c1"># Correct units in case we achieved the value of 1000.</span>
</span><span id="ScaleWithUnits-1611"><a href="#ScaleWithUnits-1611"><span class="linenos">1611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="ScaleWithUnits-1612"><a href="#ScaleWithUnits-1612"><span class="linenos">1612</span></a>        <span class="c1"># Round number (for nicer output: 1 um instead of 1.0 um)</span>
</span><span id="ScaleWithUnits-1613"><a href="#ScaleWithUnits-1613"><span class="linenos">1613</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
</span><span id="ScaleWithUnits-1614"><a href="#ScaleWithUnits-1614"><span class="linenos">1614</span></a>        <span class="c1"># Round pixels (for correct drawing in image = whole pixels)</span>
</span><span id="ScaleWithUnits-1615"><a href="#ScaleWithUnits-1615"><span class="linenos">1615</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Class defining ScaleWithUnits object.</p>

<ul>
<li>ScaleWithUnits object = number + units + pixels.</li>
<li>The objet defines a scalebar:
its lenght (number,units) and length-in-pixels (pixels).</li>
</ul>

<p>Object initialiation</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Three basic ways how to initialize a ScaleWithUnits object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (this is a NON-typical usage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># (ScaleWithUnits object is used internally, when drawing scalebars</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myimg.nwu</span> <span class="kn">import</span> <span class="n">ScaleWithUnits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">swu1</span> <span class="o">=</span> <span class="n">ScaleWithUnits</span><span class="p">(</span><span class="s1">&#39;1.2um&#39;</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">swu2</span> <span class="o">=</span> <span class="n">ScaleWithUnits</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;um&#39;</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">swu3</span> <span class="o">=</span> <span class="n">ScaleWithUnits</span><span class="p">(</span><span class="n">a_number_with_units_object</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre>
</div>

<p>List of object properties</p>

<ul>
<li>number = number/numeric value</li>
<li>units  = units corresponding to number</li>
<li>pixels = pixels corresponding to number-with-units</li>
<li>_units_description: <a href="#Units">myimg.settings.Units</a> subclass, private property</li>
</ul>

<p>Object methods</p>

<ul>
<li>inherited methods from <a href="#NumberWithUnits">myimg.nwu.NumberWithUnits</a></li>
<li>adjust_lenght_to = adjust lenght in pixels and modify number accordingly</li>
<li>adjust_scalebar_size = adjusts scalebar lenght to some reasonable size</li>
</ul>
</div>


                            <div id="ScaleWithUnits.__init__" class="classattr">
                                        <input id="ScaleWithUnits.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ScaleWithUnits</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">number</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">units</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">pixels</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="ScaleWithUnits.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ScaleWithUnits.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ScaleWithUnits.__init__-1492"><a href="#ScaleWithUnits.__init__-1492"><span class="linenos">1492</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ScaleWithUnits.__init__-1493"><a href="#ScaleWithUnits.__init__-1493"><span class="linenos">1493</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.__init__-1494"><a href="#ScaleWithUnits.__init__-1494"><span class="linenos">1494</span></a><span class="sd">        Initialize ScaleWithUnits object.</span>
</span><span id="ScaleWithUnits.__init__-1495"><a href="#ScaleWithUnits.__init__-1495"><span class="linenos">1495</span></a>
</span><span id="ScaleWithUnits.__init__-1496"><a href="#ScaleWithUnits.__init__-1496"><span class="linenos">1496</span></a><span class="sd">        Parameters</span>
</span><span id="ScaleWithUnits.__init__-1497"><a href="#ScaleWithUnits.__init__-1497"><span class="linenos">1497</span></a><span class="sd">        ----------</span>
</span><span id="ScaleWithUnits.__init__-1498"><a href="#ScaleWithUnits.__init__-1498"><span class="linenos">1498</span></a><span class="sd">        number : float or str or NumberWithUnits object</span>
</span><span id="ScaleWithUnits.__init__-1499"><a href="#ScaleWithUnits.__init__-1499"><span class="linenos">1499</span></a><span class="sd">            Number with (or without) units, which can be:</span>
</span><span id="ScaleWithUnits.__init__-1500"><a href="#ScaleWithUnits.__init__-1500"><span class="linenos">1500</span></a><span class="sd">            (i) Number (float; such as: 100),</span>
</span><span id="ScaleWithUnits.__init__-1501"><a href="#ScaleWithUnits.__init__-1501"><span class="linenos">1501</span></a><span class="sd">            but then the 2nd argument should be given (such as units=&#39;um&#39;). </span>
</span><span id="ScaleWithUnits.__init__-1502"><a href="#ScaleWithUnits.__init__-1502"><span class="linenos">1502</span></a><span class="sd">            (ii) String (str; such as: &#39;100 um&#39; or &#39;1.2nm&#39;).</span>
</span><span id="ScaleWithUnits.__init__-1503"><a href="#ScaleWithUnits.__init__-1503"><span class="linenos">1503</span></a><span class="sd">            (iii) Another NumberWithUnits object;</span>
</span><span id="ScaleWithUnits.__init__-1504"><a href="#ScaleWithUnits.__init__-1504"><span class="linenos">1504</span></a><span class="sd">            in such a case we receive the copy of the argument.</span>
</span><span id="ScaleWithUnits.__init__-1505"><a href="#ScaleWithUnits.__init__-1505"><span class="linenos">1505</span></a><span class="sd">        units : str, optional, the default is None</span>
</span><span id="ScaleWithUnits.__init__-1506"><a href="#ScaleWithUnits.__init__-1506"><span class="linenos">1506</span></a><span class="sd">            If the 1st argument (number) is a float, the 2nd argument (units)</span>
</span><span id="ScaleWithUnits.__init__-1507"><a href="#ScaleWithUnits.__init__-1507"><span class="linenos">1507</span></a><span class="sd">            defines units of the first argument.</span>
</span><span id="ScaleWithUnits.__init__-1508"><a href="#ScaleWithUnits.__init__-1508"><span class="linenos">1508</span></a><span class="sd">            If the 1st argument is string or NumberWithUnits object,</span>
</span><span id="ScaleWithUnits.__init__-1509"><a href="#ScaleWithUnits.__init__-1509"><span class="linenos">1509</span></a><span class="sd">            the 2nd argument is ignored.</span>
</span><span id="ScaleWithUnits.__init__-1510"><a href="#ScaleWithUnits.__init__-1510"><span class="linenos">1510</span></a><span class="sd">        pixels : float</span>
</span><span id="ScaleWithUnits.__init__-1511"><a href="#ScaleWithUnits.__init__-1511"><span class="linenos">1511</span></a><span class="sd">            Length of scalebar in pixels.</span>
</span><span id="ScaleWithUnits.__init__-1512"><a href="#ScaleWithUnits.__init__-1512"><span class="linenos">1512</span></a><span class="sd">            This is a keyword argument that is formally optional, but in fact </span>
</span><span id="ScaleWithUnits.__init__-1513"><a href="#ScaleWithUnits.__init__-1513"><span class="linenos">1513</span></a><span class="sd">            it must be specified so that the initialization made sense.</span>
</span><span id="ScaleWithUnits.__init__-1514"><a href="#ScaleWithUnits.__init__-1514"><span class="linenos">1514</span></a><span class="sd">            Moreover, this argument must be specified as keyword argument,</span>
</span><span id="ScaleWithUnits.__init__-1515"><a href="#ScaleWithUnits.__init__-1515"><span class="linenos">1515</span></a><span class="sd">            because the 2nd argument (units) is really optional and</span>
</span><span id="ScaleWithUnits.__init__-1516"><a href="#ScaleWithUnits.__init__-1516"><span class="linenos">1516</span></a><span class="sd">            it may not be clear, which argument is which.</span>
</span><span id="ScaleWithUnits.__init__-1517"><a href="#ScaleWithUnits.__init__-1517"><span class="linenos">1517</span></a><span class="sd">            </span>
</span><span id="ScaleWithUnits.__init__-1518"><a href="#ScaleWithUnits.__init__-1518"><span class="linenos">1518</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits.__init__-1519"><a href="#ScaleWithUnits.__init__-1519"><span class="linenos">1519</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits.__init__-1520"><a href="#ScaleWithUnits.__init__-1520"><span class="linenos">1520</span></a><span class="sd">        ScaleWithUnits object</span>
</span><span id="ScaleWithUnits.__init__-1521"><a href="#ScaleWithUnits.__init__-1521"><span class="linenos">1521</span></a><span class="sd">            NumberWithUnits object contains:</span>
</span><span id="ScaleWithUnits.__init__-1522"><a href="#ScaleWithUnits.__init__-1522"><span class="linenos">1522</span></a><span class="sd">            (i) numerical value (NumberWithUnits.number),</span>
</span><span id="ScaleWithUnits.__init__-1523"><a href="#ScaleWithUnits.__init__-1523"><span class="linenos">1523</span></a><span class="sd">            (ii) corresponding units (NumberWithUnits.units),</span>
</span><span id="ScaleWithUnits.__init__-1524"><a href="#ScaleWithUnits.__init__-1524"><span class="linenos">1524</span></a><span class="sd">            (iii) length-of-scalebar-in-pixels and</span>
</span><span id="ScaleWithUnits.__init__-1525"><a href="#ScaleWithUnits.__init__-1525"><span class="linenos">1525</span></a><span class="sd">            (iv) further props/methods (most of which</span>
</span><span id="ScaleWithUnits.__init__-1526"><a href="#ScaleWithUnits.__init__-1526"><span class="linenos">1526</span></a><span class="sd">            are inherited from NumberWithUnits superclass).</span>
</span><span id="ScaleWithUnits.__init__-1527"><a href="#ScaleWithUnits.__init__-1527"><span class="linenos">1527</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.__init__-1528"><a href="#ScaleWithUnits.__init__-1528"><span class="linenos">1528</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>
</span><span id="ScaleWithUnits.__init__-1529"><a href="#ScaleWithUnits.__init__-1529"><span class="linenos">1529</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="n">pixels</span>
</span></pre></div>


            <div class="docstring"><p>Initialize ScaleWithUnits object.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>number</strong> (float or str or NumberWithUnits object):
Number with (or without) units, which can be:
(i) Number (float; such as: 100),
but then the 2nd argument should be given (such as units='um'). 
(ii) String (str; such as: '100 um' or '1.2nm').
(iii) Another NumberWithUnits object;
in such a case we receive the copy of the argument.</li>
<li><strong>units</strong> (str, optional, the default is None):
If the 1st argument (number) is a float, the 2nd argument (units)
defines units of the first argument.
If the 1st argument is string or NumberWithUnits object,
the 2nd argument is ignored.</li>
<li><strong>pixels</strong> (float):
Length of scalebar in pixels.
This is a keyword argument that is formally optional, but in fact 
it must be specified so that the initialization made sense.
Moreover, this argument must be specified as keyword argument,
because the 2nd argument (units) is really optional and
it may not be clear, which argument is which.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>ScaleWithUnits object</strong>: NumberWithUnits object contains:
(i) numerical value (NumberWithUnits.number),
(ii) corresponding units (NumberWithUnits.units),
(iii) length-of-scalebar-in-pixels and
(iv) further props/methods (most of which
are inherited from NumberWithUnits superclass).</li>
</ul>
</div>


                            </div>
                            <div id="ScaleWithUnits.text" class="classattr">
                                        <input id="ScaleWithUnits.text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ScaleWithUnits.text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ScaleWithUnits.text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ScaleWithUnits.text-1538"><a href="#ScaleWithUnits.text-1538"><span class="linenos">1538</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ScaleWithUnits.text-1539"><a href="#ScaleWithUnits.text-1539"><span class="linenos">1539</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.text-1540"><a href="#ScaleWithUnits.text-1540"><span class="linenos">1540</span></a><span class="sd">        Return number-with-units as string (ignoring pixels).</span>
</span><span id="ScaleWithUnits.text-1541"><a href="#ScaleWithUnits.text-1541"><span class="linenos">1541</span></a>
</span><span id="ScaleWithUnits.text-1542"><a href="#ScaleWithUnits.text-1542"><span class="linenos">1542</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits.text-1543"><a href="#ScaleWithUnits.text-1543"><span class="linenos">1543</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits.text-1544"><a href="#ScaleWithUnits.text-1544"><span class="linenos">1544</span></a><span class="sd">        str : number-with-units</span>
</span><span id="ScaleWithUnits.text-1545"><a href="#ScaleWithUnits.text-1545"><span class="linenos">1545</span></a><span class="sd">            The method returns the saved number with units as string.</span>
</span><span id="ScaleWithUnits.text-1546"><a href="#ScaleWithUnits.text-1546"><span class="linenos">1546</span></a><span class="sd">            Example: if self.number = 1.2 and self.units = nm, we get &#39;1 nm&#39;.</span>
</span><span id="ScaleWithUnits.text-1547"><a href="#ScaleWithUnits.text-1547"><span class="linenos">1547</span></a><span class="sd">            The units are printed in unicode (important for um and agstrems).</span>
</span><span id="ScaleWithUnits.text-1548"><a href="#ScaleWithUnits.text-1548"><span class="linenos">1548</span></a>
</span><span id="ScaleWithUnits.text-1549"><a href="#ScaleWithUnits.text-1549"><span class="linenos">1549</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.text-1550"><a href="#ScaleWithUnits.text-1550"><span class="linenos">1550</span></a>        <span class="c1"># We need JUST text.</span>
</span><span id="ScaleWithUnits.text-1551"><a href="#ScaleWithUnits.text-1551"><span class="linenos">1551</span></a>        <span class="c1"># =&gt; therefore, we call super().__str__() - this returns just text.</span>
</span><span id="ScaleWithUnits.text-1552"><a href="#ScaleWithUnits.text-1552"><span class="linenos">1552</span></a>        <span class="c1"># =&gt; if we called self.__str__(), we would get text + pixel-size-info.</span>
</span><span id="ScaleWithUnits.text-1553"><a href="#ScaleWithUnits.text-1553"><span class="linenos">1553</span></a>        <span class="n">text</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</span><span id="ScaleWithUnits.text-1554"><a href="#ScaleWithUnits.text-1554"><span class="linenos">1554</span></a>        <span class="k">return</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Return number-with-units as string (ignoring pixels).</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>str</strong> (number-with-units):
The method returns the saved number with units as string.
Example: if self.number = 1.2 and self.units = nm, we get '1 nm'.
The units are printed in unicode (important for um and agstrems).</li>
</ul>
</div>


                            </div>
                            <div id="ScaleWithUnits.adjust_length_to" class="classattr">
                                        <input id="ScaleWithUnits.adjust_length_to-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adjust_length_to</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">n</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ScaleWithUnits.adjust_length_to-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ScaleWithUnits.adjust_length_to"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ScaleWithUnits.adjust_length_to-1556"><a href="#ScaleWithUnits.adjust_length_to-1556"><span class="linenos">1556</span></a>    <span class="k">def</span> <span class="nf">adjust_length_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span id="ScaleWithUnits.adjust_length_to-1557"><a href="#ScaleWithUnits.adjust_length_to-1557"><span class="linenos">1557</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.adjust_length_to-1558"><a href="#ScaleWithUnits.adjust_length_to-1558"><span class="linenos">1558</span></a><span class="sd">        Set lenght-of-scalebar to *n* and modify lenght-in-pixels accordingly.</span>
</span><span id="ScaleWithUnits.adjust_length_to-1559"><a href="#ScaleWithUnits.adjust_length_to-1559"><span class="linenos">1559</span></a>
</span><span id="ScaleWithUnits.adjust_length_to-1560"><a href="#ScaleWithUnits.adjust_length_to-1560"><span class="linenos">1560</span></a><span class="sd">        Parameters</span>
</span><span id="ScaleWithUnits.adjust_length_to-1561"><a href="#ScaleWithUnits.adjust_length_to-1561"><span class="linenos">1561</span></a><span class="sd">        ----------</span>
</span><span id="ScaleWithUnits.adjust_length_to-1562"><a href="#ScaleWithUnits.adjust_length_to-1562"><span class="linenos">1562</span></a><span class="sd">        n : float</span>
</span><span id="ScaleWithUnits.adjust_length_to-1563"><a href="#ScaleWithUnits.adjust_length_to-1563"><span class="linenos">1563</span></a><span class="sd">            The new length-of-scalebar (= self.number).</span>
</span><span id="ScaleWithUnits.adjust_length_to-1564"><a href="#ScaleWithUnits.adjust_length_to-1564"><span class="linenos">1564</span></a>
</span><span id="ScaleWithUnits.adjust_length_to-1565"><a href="#ScaleWithUnits.adjust_length_to-1565"><span class="linenos">1565</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits.adjust_length_to-1566"><a href="#ScaleWithUnits.adjust_length_to-1566"><span class="linenos">1566</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits.adjust_length_to-1567"><a href="#ScaleWithUnits.adjust_length_to-1567"><span class="linenos">1567</span></a><span class="sd">        None</span>
</span><span id="ScaleWithUnits.adjust_length_to-1568"><a href="#ScaleWithUnits.adjust_length_to-1568"><span class="linenos">1568</span></a><span class="sd">            The new lenght-of-scalebar and lenght-of-scalebar-in-pixels</span>
</span><span id="ScaleWithUnits.adjust_length_to-1569"><a href="#ScaleWithUnits.adjust_length_to-1569"><span class="linenos">1569</span></a><span class="sd">            are saved in ScaleWithUnits.number and ScaleWithUnits.pixels</span>
</span><span id="ScaleWithUnits.adjust_length_to-1570"><a href="#ScaleWithUnits.adjust_length_to-1570"><span class="linenos">1570</span></a><span class="sd">            properties, respectively.</span>
</span><span id="ScaleWithUnits.adjust_length_to-1571"><a href="#ScaleWithUnits.adjust_length_to-1571"><span class="linenos">1571</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.adjust_length_to-1572"><a href="#ScaleWithUnits.adjust_length_to-1572"><span class="linenos">1572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">*</span> <span class="n">n</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span>
</span><span id="ScaleWithUnits.adjust_length_to-1573"><a href="#ScaleWithUnits.adjust_length_to-1573"><span class="linenos">1573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">n</span>
</span></pre></div>


            <div class="docstring"><p>Set lenght-of-scalebar to <em>n</em> and modify lenght-in-pixels accordingly.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>n</strong> (float):
The new length-of-scalebar (= self.number).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The new lenght-of-scalebar and lenght-of-scalebar-in-pixels
are saved in ScaleWithUnits.number and ScaleWithUnits.pixels
properties, respectively.</li>
</ul>
</div>


                            </div>
                            <div id="ScaleWithUnits.adjust_scalebar_size" class="classattr">
                                        <input id="ScaleWithUnits.adjust_scalebar_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adjust_scalebar_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ScaleWithUnits.adjust_scalebar_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ScaleWithUnits.adjust_scalebar_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ScaleWithUnits.adjust_scalebar_size-1575"><a href="#ScaleWithUnits.adjust_scalebar_size-1575"><span class="linenos">1575</span></a>    <span class="k">def</span> <span class="nf">adjust_scalebar_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1576"><a href="#ScaleWithUnits.adjust_scalebar_size-1576"><span class="linenos">1576</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1577"><a href="#ScaleWithUnits.adjust_scalebar_size-1577"><span class="linenos">1577</span></a><span class="sd">        Set scalebar to some reasonable lenght</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1578"><a href="#ScaleWithUnits.adjust_scalebar_size-1578"><span class="linenos">1578</span></a><span class="sd">        and modify lenght-in-pixels accordingly.</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1579"><a href="#ScaleWithUnits.adjust_scalebar_size-1579"><span class="linenos">1579</span></a>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1580"><a href="#ScaleWithUnits.adjust_scalebar_size-1580"><span class="linenos">1580</span></a><span class="sd">        Returns</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1581"><a href="#ScaleWithUnits.adjust_scalebar_size-1581"><span class="linenos">1581</span></a><span class="sd">        -------</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1582"><a href="#ScaleWithUnits.adjust_scalebar_size-1582"><span class="linenos">1582</span></a><span class="sd">        None</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1583"><a href="#ScaleWithUnits.adjust_scalebar_size-1583"><span class="linenos">1583</span></a><span class="sd">            The modified (number, units, and pixels) are saved in</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1584"><a href="#ScaleWithUnits.adjust_scalebar_size-1584"><span class="linenos">1584</span></a><span class="sd">            ScaleWithUnits object.</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1585"><a href="#ScaleWithUnits.adjust_scalebar_size-1585"><span class="linenos">1585</span></a><span class="sd">            </span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1586"><a href="#ScaleWithUnits.adjust_scalebar_size-1586"><span class="linenos">1586</span></a><span class="sd">        Examples</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1587"><a href="#ScaleWithUnits.adjust_scalebar_size-1587"><span class="linenos">1587</span></a><span class="sd">        --------</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1588"><a href="#ScaleWithUnits.adjust_scalebar_size-1588"><span class="linenos">1588</span></a><span class="sd">        * swu = 0.3 um =&gt; swu.adjust_scalebar_size() =&gt; 300 nm</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1589"><a href="#ScaleWithUnits.adjust_scalebar_size-1589"><span class="linenos">1589</span></a><span class="sd">        * swu = 2.3 um =&gt; swu.adjust_scalebar_size() =&gt; 2 um</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1590"><a href="#ScaleWithUnits.adjust_scalebar_size-1590"><span class="linenos">1590</span></a><span class="sd">        * swu = 456 um =&gt; swu.adjust_scalebar_size() =&gt; 500 um</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1591"><a href="#ScaleWithUnits.adjust_scalebar_size-1591"><span class="linenos">1591</span></a><span class="sd">        * swu = 888 um =&gt; swu.adjust_scalebar_size() =&gt; 1 mm</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1592"><a href="#ScaleWithUnits.adjust_scalebar_size-1592"><span class="linenos">1592</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1593"><a href="#ScaleWithUnits.adjust_scalebar_size-1593"><span class="linenos">1593</span></a>        <span class="c1"># Get the number in the interval &lt;1...1000)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1594"><a href="#ScaleWithUnits.adjust_scalebar_size-1594"><span class="linenos">1594</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1595"><a href="#ScaleWithUnits.adjust_scalebar_size-1595"><span class="linenos">1595</span></a>        <span class="c1"># Adjust the number to a reasonable value (1,2,3,5,10,20,30...),</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1596"><a href="#ScaleWithUnits.adjust_scalebar_size-1596"><span class="linenos">1596</span></a>        <span class="c1"># modify the lenght-in-pixels accordingly, and change units if needed.</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1597"><a href="#ScaleWithUnits.adjust_scalebar_size-1597"><span class="linenos">1597</span></a>        <span class="k">if</span>   <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">750</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1598"><a href="#ScaleWithUnits.adjust_scalebar_size-1598"><span class="linenos">1598</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">350</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">500</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1599"><a href="#ScaleWithUnits.adjust_scalebar_size-1599"><span class="linenos">1599</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">250</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1600"><a href="#ScaleWithUnits.adjust_scalebar_size-1600"><span class="linenos">1600</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">200</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1601"><a href="#ScaleWithUnits.adjust_scalebar_size-1601"><span class="linenos">1601</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">50</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1602"><a href="#ScaleWithUnits.adjust_scalebar_size-1602"><span class="linenos">1602</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">35</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">50</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1603"><a href="#ScaleWithUnits.adjust_scalebar_size-1603"><span class="linenos">1603</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">25</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">30</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1604"><a href="#ScaleWithUnits.adjust_scalebar_size-1604"><span class="linenos">1604</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span>  <span class="mi">15</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">20</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1605"><a href="#ScaleWithUnits.adjust_scalebar_size-1605"><span class="linenos">1605</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">7.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>  <span class="mi">10</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1606"><a href="#ScaleWithUnits.adjust_scalebar_size-1606"><span class="linenos">1606</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">3.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">5</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1607"><a href="#ScaleWithUnits.adjust_scalebar_size-1607"><span class="linenos">1607</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">2.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">3</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1608"><a href="#ScaleWithUnits.adjust_scalebar_size-1608"><span class="linenos">1608</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mf">1.5</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">2</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1609"><a href="#ScaleWithUnits.adjust_scalebar_size-1609"><span class="linenos">1609</span></a>        <span class="k">else</span>                  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjust_length_to</span><span class="p">(</span>   <span class="mi">1</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1610"><a href="#ScaleWithUnits.adjust_scalebar_size-1610"><span class="linenos">1610</span></a>        <span class="c1"># Correct units in case we achieved the value of 1000.</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1611"><a href="#ScaleWithUnits.adjust_scalebar_size-1611"><span class="linenos">1611</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_correct_units</span><span class="p">()</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1612"><a href="#ScaleWithUnits.adjust_scalebar_size-1612"><span class="linenos">1612</span></a>        <span class="c1"># Round number (for nicer output: 1 um instead of 1.0 um)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1613"><a href="#ScaleWithUnits.adjust_scalebar_size-1613"><span class="linenos">1613</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1614"><a href="#ScaleWithUnits.adjust_scalebar_size-1614"><span class="linenos">1614</span></a>        <span class="c1"># Round pixels (for correct drawing in image = whole pixels)</span>
</span><span id="ScaleWithUnits.adjust_scalebar_size-1615"><a href="#ScaleWithUnits.adjust_scalebar_size-1615"><span class="linenos">1615</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pixels</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pixels</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set scalebar to some reasonable lenght
and modify lenght-in-pixels accordingly.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong>: The modified (number, units, and pixels) are saved in
ScaleWithUnits object.</li>
</ul>

<h6 id="examples">Examples</h6>

<ul>
<li>swu = 0.3 um =&gt; swu.adjust_scalebar_size() =&gt; 300 nm</li>
<li>swu = 2.3 um =&gt; swu.adjust_scalebar_size() =&gt; 2 um</li>
<li>swu = 456 um =&gt; swu.adjust_scalebar_size() =&gt; 500 um</li>
<li>swu = 888 um =&gt; swu.adjust_scalebar_size() =&gt; 1 mm</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#NumberWithUnits">NumberWithUnits</a></dt>
                                <dd id="ScaleWithUnits.units_Ok" class="function"><a href="#NumberWithUnits.units_Ok">units_Ok</a></dd>
                <dd id="ScaleWithUnits.index_of_units" class="function"><a href="#NumberWithUnits.index_of_units">index_of_units</a></dd>
                <dd id="ScaleWithUnits.increase_units" class="function"><a href="#NumberWithUnits.increase_units">increase_units</a></dd>
                <dd id="ScaleWithUnits.decrease_units" class="function"><a href="#NumberWithUnits.decrease_units">decrease_units</a></dd>
                <dd id="ScaleWithUnits.set_units_to" class="function"><a href="#NumberWithUnits.set_units_to">set_units_to</a></dd>
                <dd id="ScaleWithUnits.set_correct_units" class="function"><a href="#NumberWithUnits.set_correct_units">set_correct_units</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>